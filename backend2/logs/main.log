2025-07-31 12:54:25 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:54:25 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:54:25 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:54:25 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3MtuU1FKDGW2DL7NhYzEZktnM8FT__pJbo1q96EVvkByReU6cE-GMv3ePJm5Lv4qrfve1b4f4y27o4nb39e-dH4Zx1z36Oo-r3dfd4mP0m48wBi5R6uwbHXGP3JMOdF5Gx369-GZzB5pcE7qGKUS9iJe4qqbUBkl0vihmKKwNOzgVLsFPASRB_EhPCdBYVnP8A3diGVN-XeeC8Ov2zpDPiUESVmAJfhSOZlzpCesMFY-0NnWiEYNSF2K2HiNqC85N3ZNJYBs4Od_Yej7v61yd-UXzT4l7YfzcYHTZEDRJvGMKuCvIbEcgtRIxTBbdB6koBhOCHg67L7t4bkAbdw8feoEeSJwmaYzCfscB9AEn6eOXHYh--RIv5zQQQ3ADZ8NaZVQFcieXfeOdZEou9Vw1lUkx5UkVvUxxNMw12VzN0kxdk9U1FdTFFNJd-cnNZNQzhVIVeXA9nZH4zmyYFxvVwFN7gzRNiCtbqI4kfQrXerxiQuZiNBpU-notozHAos4zyCzAkA0ijasNQp4VzlpvZjIpGb-qnEJc7wziVx6mclGrYFHv4nbmbSWWCOrfXcLFUkQRoyl0UvRaClMoKYOH0aOHzUV0V4uwVEfIWQSVNkD-XgYTcO92Lmc1UEwGVdacUDjIu2rr7YRC6Q0WZRrur2oVOCqUbC0K5_WqU2A3Ua0jjq1CSagjg0xDif2t5W6v3v0M9ZCI55DIdeM1oL0VxADQ3oyHHPykZgmqmi55M_P5xskk1Isqp60Ndu86RbfVBTUVQenB2oUlMlPGw9DUd6Zf9XvO9nt-RqW9-I7XeI4GbpW-RI4FcQTkjqVpiCWbn0t4Ql0DD9fQiWQbPwPHtmcbVV-xOLMbVlDSENfaeqWoeT_6nLf4XHEN8762kELy7kVjbTpKMg2cz3OZL9qDLP6o71Mj27i4joal9R89n2tlIasAo6tAtNEQsxeoYYjg_ej02fvRNWhWw0IiwFTFdejWxFXPRmbDAOhLy86Ca5EfBkbzDi9kZmn1tn0uAkueQxHlbcTrlFLATaEw45ynwzXHro6yzVPl370iKKA2By1-efo57h7UUXSx_TvnQR_d-xnd_PAdAYGxWV23ObRQNXMRiFfEEpzPjMfhX4RUzXxRM51-exGUkkq1yfNtx6ESmIVVyR2Luzw75FSwnY1a15oANWgf5LgmpHa5kS_D4GxWaciHZKcSYRFasMdOJ5Gy8IM8Zxmf54qbcB8BHnwQK1PpHtOFcytm8sgGZDytEac9NYnWFMkKVglO8Vqoh3jwLsh4Szj6ZCnl_OqmZRW1KrNZ9IIa9fOjasZHZe8Z1_soVURuwg7D94cxK_nAfbL9x0M8juUxHR7zQH3oo86qMxtYmcNMDxp5EKaS9LGVnbCudocPwF3bi-uVh5M1H6MjKR58YACgCtd0YV7Hq6I0eq48BcDoRH6WuKf6ouarag_YY9-oF2dxzPapDKrWBgG-CJSIaYRDHvfCMPDWBF-3LqybGD5Y8FuB6K-075vu6_v7NE1vSV0nRew3oHsL6_LdH_r0fVsDoHrWb01bP0ER_-8X4tIHBST8fCEf_fLJysZ-C_fK9_WyHftcMf0j9bsUprFmf79M-CuRnDZwrZdjZHPBwOP-EME0isDX-IhgKE7gx31DZONIHHI8KcMhjDGEKkkwHsO0R5LmlQ5vftN0P2rc6MK66uGC20rdENfm_4z4XfDXXQhf3Gfc-u1w_Heyxf7MP0ao-wni6OeehVvljzVDfNk9_RIUy6Pyy82w70DwdgJGaOOP6EYBY-D3iiKp7S7oOpj92SK4uuuh6n9W_KOMPyD--oVe1VW4Ra_UpU6pNqUv7SU1ZDFegAbTDQj7oY3_wC5S_L8b8e6_M6fkWIdXv85vnetc9fM-YzHeV2-XmrszoRrvLT0uWbQpOUcoMH-6usbK_KujqX24TegQbJ1BcRShjlAYTdPoEaMRkkR23759H50H2OYBp6gIedLEHomfwZ44xMjep2NiHx8OQUiRJB7j9O7bP54d-Io.aIs9UQ.j5Hs_jWCvCxOnGdrQsrbkiApflg'}
2025-07-31 12:54:25 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:54:25 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:54:25 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x06F96A80>
2025-07-31 12:54:25 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:25 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:25 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:54:25 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:25 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:54:25 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:54:25 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:54:26 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:26 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:54:26 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:54:26 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:54:26 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:54:26 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:54:26 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:54:26 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:26 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:54:26 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 12:54:26 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 12:54:26 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010671615600585938,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.707806"
  },
  "success": false
}

2025-07-31 12:54:26 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010671615600585938,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.707806"
  },
  "success": false
}

2025-07-31 12:54:26 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010671615600585938,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.707806"
  },
  "success": false
}

2025-07-31 12:54:26 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 12:54:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:26 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 12:54:27 - managers.commands_server - DEBUG - Request completed in 0.17s with status 400
2025-07-31 12:54:27 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007622241973876953,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.899931"
  },
  "success": false
}

2025-07-31 12:54:27 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007622241973876953,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.899931"
  },
  "success": false
}

2025-07-31 12:54:27 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007622241973876953,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.899931"
  },
  "success": false
}

2025-07-31 12:54:27 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 12:54:27 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:27 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:27 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:54:27 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 12:54:28 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:54:28 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:54:28 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:54:28 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3MtuU1FKDGW2DL7NhYzEZktnM8FT__pJbo1q96EVvkByReU6cE-GMv3ePJm5Lv4qrfve1b4f4y27o4nb39e-dH4Zx1z36Oo-r3dfd4mP0m48wBi5R6uwbHXGP3JMOdF5Gx369-GZzB5pcE7qGKUS9iJe4qqbUBkl0vihmKKwNOzgVLsFPASRB_EhPCdBYVnP8A3diGVN-XeeC8Ov2zpDPiUESVmAJfhSOZlzpCesMFY-0NnWiEYNSF2K2HiNqC85N3ZNJYBs4Od_Yej7v61yd-UXzT4l7YfzcYHTZEDRJvGMKuCvIbEcgtRIxTBbdB6koBhOCHg67L7t4bkAbdw8feoEeSJwmaYzCfscB9AEn6eOXHYh--RIv5zQQQ3ADZ8NaZVQFcieXfeOdZEou9Vw1lUkx5UkVvUxxNMw12VzN0kxdk9U1FdTFFNJd-cnNZNQzhVIVeXA9nZH4zmyYFxvVwFN7gzRNiCtbqI4kfQrXerxiQuZiNBpU-notozHAos4zyCzAkA0ijasNQp4VzlpvZjIpGb-qnEJc7wziVx6mclGrYFHv4nbmbSWWCOrfXcLFUkQRoyl0UvRaClMoKYOH0aOHzUV0V4uwVEfIWQSVNkD-XgYTcO92Lmc1UEwGVdacUDjIu2rr7YRC6Q0WZRrur2oVOCqUbC0K5_WqU2A3Ua0jjq1CSagjg0xDif2t5W6v3v0M9ZCI55DIdeM1oL0VxADQ3oyHHPykZgmqmi55M_P5xskk1Isqp60Ndu86RbfVBTUVQenB2oUlMlPGw9DUd6Zf9XvO9nt-RqW9-I7XeI4GbpW-RI4FcQTkjqVpiCWbn0t4Ql0DD9fQiWQbPwPHtmcbVV-xOLMbVlDSENfaeqWoeT_6nLf4XHEN8762kELy7kVjbTpKMg2cz3OZL9qDLP6o71Mj27i4joal9R89n2tlIasAo6tAtNEQsxeoYYjg_ej02fvRNWhWw0IiwFTFdejWxFXPRmbDAOhLy86Ca5EfBkbzDi9kZmn1tn0uAkueQxHlbcTrlFLATaEw45ynwzXHro6yzVPl370iKKA2By1-efo57h7UUXSx_TvnQR_d-xnd_PAdAYGxWV23ObRQNXMRiFfEEpzPjMfhX4RUzXxRM51-exGUkkq1yfNtx6ESmIVVyR2Luzw75FSwnY1a15oANWgf5LgmpHa5kS_D4GxWaciHZKcSYRFasMdOJ5Gy8IM8Zxmf54qbcB8BHnwQK1PpHtOFcytm8sgGZDytEac9NYnWFMkKVglO8Vqoh3jwLsh4Szj6ZCnl_OqmZRW1KrNZ9IIa9fOjasZHZe8Z1_soVURuwg7D94cxK_nAfbL9x0M8juUxHR7zQH3oo86qMxtYmcNMDxp5EKaS9LGVnbCudocPwF3bi-uVh5M1H6MjKR58YACgCtd0YV7Hq6I0eq48BcDoRH6WuKf6ouarag_YY9-oF2dxzPapDKrWBgG-CJSIaYRDHvfCMPDWBF-3LqybGD5Y8FuB6K-075vu6_v7NE1vSV0nRew3oHsL6_LdH_r0fVsDoHrWb01bP0ER_-8X4tIHBST8fCEf_fLJysZ-C_fK9_WyHftcMf0j9bsUprFmf79M-CuRnDZwrZdjZHPBwOP-EME0isDX-IhgKE7gx31DZONIHHI8KcMhjDGEKkkwHsO0R5LmlQ5vftN0P2rc6MK66uGC20rdENfm_4z4XfDXXQhf3Gfc-u1w_Heyxf7MP0ao-wni6OeehVvljzVDfNk9_RIUy6Pyy82w70DwdgJGaOOP6EYBY-D3iiKp7S7oOpj92SK4uuuh6n9W_KOMPyD--oVe1VW4Ra_UpU6pNqUv7SU1ZDFegAbTDQj7oY3_wC5S_L8b8e6_M6fkWIdXv85vnetc9fM-YzHeV2-XmrszoRrvLT0uWbQpOUcoMH-6usbK_KujqX24TegQbJ1BcRShjlAYTdPoEaMRkkR23759H50H2OYBp6gIedLEHomfwZ44xMjep2NiHx8OQUiRJB7j9O7bP54d-Io.aIs9Uw.MM-nLZtAlgwmIQ6W31Vciscpri0'}
2025-07-31 12:54:28 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:54:28 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:54:28 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x01C45330>
2025-07-31 12:54:28 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:28 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:28 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:54:28 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:28 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:54:28 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:54:28 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:54:28 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:28 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:54:28 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:54:28 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:54:28 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:54:28 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:54:28 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:54:28 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:28 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:54:30 - managers.commands_server - DEBUG - Request completed in 2.54s with status 200
2025-07-31 12:54:30 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.387146234512329, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T09:54:29.795139'}, 'success': True}
2025-07-31 12:54:30 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 12:54:30 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 12:54:30 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 12:54:30 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 12:54:30 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 12:54:30 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 12:54:30 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 12:54:30 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:54:56 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:54:56 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:54:56 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:54:56 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3MtuU1FKDGW2DL7NhYzEZktnM8FT__pJbo1q96EVvkByReU6cE-GMv3ePJm5Lv4qrfve1b4f4y27o4nb39e-dH4Zx1z36Oo-r3dfd4mP0m48wBi5R6uwbHXGP3JMOdF5Gx369-GZzB5pcE7qGKUS9iJe4qqbUBkl0vihmKKwNOzgVLsFPASRB_EhPCdBYVnP8A3diGVN-XeeC8Ov2zpDPiUESVmAJfhSOZlzpCesMFY-0NnWiEYNSF2K2HiNqC85N3ZNJYBs4Od_Yej7v61yd-UXzT4l7YfzcYHTZEDRJvGMKuCvIbEcgtRIxTBbdB6koBhOCHg67L7t4bkAbdw8feoEeSJwmaYzCfscB9AEn6eOXHYh--RIv5zQQQ3ADZ8NaZVQFcieXfeOdZEou9Vw1lUkx5UkVvUxxNMw12VzN0kxdk9U1FdTFFNJd-cnNZNQzhVIVeXA9nZH4zmyYFxvVwFN7gzRNiCtbqI4kfQrXerxiQuZiNBpU-notozHAos4zyCzAkA0ijasNQp4VzlpvZjIpGb-qnEJc7wziVx6mclGrYFHv4nbmbSWWCOrfXcLFUkQRoyl0UvRaClMoKYOH0aOHzUV0V4uwVEfIWQSVNkD-XgYTcO92Lmc1UEwGVdacUDjIu2rr7YRC6Q0WZRrur2oVOCqUbC0K5_WqU2A3Ua0jjq1CSagjg0xDif2t5W6v3v0M9ZCI55DIdeM1oL0VxADQ3oyHHPykZgmqmi55M_P5xskk1Isqp60Ndu86RbfVBTUVQenB2oUlMlPGw9DUd6Zf9XvO9nt-RqW9-I7XeI4GbpW-RI4FcQTkjqVpiCWbn0t4Ql0DD9fQiWQbPwPHtmcbVV-xOLMbVlDSENfaeqWoeT_6nLf4XHEN8762kELy7kVjbTpKMg2cz3OZL9qDLP6o71Mj27i4joal9R89n2tlIasAo6tAtNEQsxeoYYjg_ej02fvRNWhWw0IiwFTFdejWxFXPRmbDAOhLy86Ca5EfBkbzDi9kZmn1tn0uAkueQxHlbcTrlFLATaEw45ynwzXHro6yzVPl370iKKA2By1-efo57h7UUXSx_TvnQR_d-xnd_PAdAYGxWV23ObRQNXMRiFfEEpzPjMfhX4RUzXxRM51-exGUkkq1yfNtx6ESmIVVyR2Luzw75FSwnY1a15oANWgf5LgmpHa5kS_D4GxWaciHZKcSYRFasMdOJ5Gy8IM8Zxmf54qbcB8BHnwQK1PpHtOFcytm8sgGZDytEac9NYnWFMkKVglO8Vqoh3jwLsh4Szj6ZCnl_OqmZRW1KrNZ9IIa9fOjasZHZe8Z1_soVURuwg7D94cxK_nAfbL9x0M8juUxHR7zQH3oo86qMxtYmcNMDxp5EKaS9LGVnbCudocPwF3bi-uVh5M1H6MjKR58YACgCtd0YV7Hq6I0eq48BcDoRH6WuKf6ouarag_YY9-oF2dxzPapDKrWBgG-CJSIaYRDHvfCMPDWBF-3LqybGD5Y8FuB6K-075vu6_v7NE1vSV0nRew3oHsL6_LdH_r0fVsDoHrWb01bP0ER_-8X4tIHBST8fCEf_fLJysZ-C_fK9_WyHftcMf0j9bsUprFmf79M-CuRnDZwrZdjZHPBwOP-EME0isDX-IhgKE7gx31DZONIHHI8KcMhjDGEKkkwHsO0R5LmlQ5vftN0P2rc6MK66uGC20rdENfm_4z4XfDXXQhf3Gfc-u1w_Heyxf7MP0ao-wni6OeehVvljzVDfNk9_RIUy6Pyy82w70DwdgJGaOOP6EYBY-D3iiKp7S7oOpj92SK4uuuh6n9W_KOMPyD--oVe1VW4Ra_UpU6pNqUv7SU1ZDFegAbTDQj7oY3_wC5S_L8b8e6_M6fkWIdXv85vnetc9fM-YzHeV2-XmrszoRrvLT0uWbQpOUcoMH-6usbK_KujqX24TegQbJ1BcRShjlAYTdPoEaMRkkR23759H50H2OYBp6gIedLEHomfwZ44xMjep2NiHx8OQUiRJB7j9O7bP54d-Io.aIs9cA.acu9HpwFo_j6O-1gLEV1680nygU'}
2025-07-31 12:54:56 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:54:56 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:54:56 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x01C45780>
2025-07-31 12:54:56 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:56 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:56 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:54:56 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:56 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:54:56 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:54:56 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:54:57 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:54:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:54:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:54:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:54:57 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:54:57 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:54:57 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:54:57 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3MtuU1FKDGW2DL7NhYzEZktnM8FT__pJbo1q96EVvkByReU6cE-GMv3ePJm5Lv4qrfve1b4f4y27o4nb39e-dH4Zx1z36Oo-r3dfd4mP0m48wBi5R6uwbHXGP3JMOdF5Gx369-GZzB5pcE7qGKUS9iJe4qqbUBkl0vihmKKwNOzgVLsFPASRB_EhPCdBYVnP8A3diGVN-XeeC8Ov2zpDPiUESVmAJfhSOZlzpCesMFY-0NnWiEYNSF2K2HiNqC85N3ZNJYBs4Od_Yej7v61yd-UXzT4l7YfzcYHTZEDRJvGMKuCvIbEcgtRIxTBbdB6koBhOCHg67L7t4bkAbdw8feoEeSJwmaYzCfscB9AEn6eOXHYh--RIv5zQQQ3ADZ8NaZVQFcieXfeOdZEou9Vw1lUkx5UkVvUxxNMw12VzN0kxdk9U1FdTFFNJd-cnNZNQzhVIVeXA9nZH4zmyYFxvVwFN7gzRNiCtbqI4kfQrXerxiQuZiNBpU-notozHAos4zyCzAkA0ijasNQp4VzlpvZjIpGb-qnEJc7wziVx6mclGrYFHv4nbmbSWWCOrfXcLFUkQRoyl0UvRaClMoKYOH0aOHzUV0V4uwVEfIWQSVNkD-XgYTcO92Lmc1UEwGVdacUDjIu2rr7YRC6Q0WZRrur2oVOCqUbC0K5_WqU2A3Ua0jjq1CSagjg0xDif2t5W6v3v0M9ZCI55DIdeM1oL0VxADQ3oyHHPykZgmqmi55M_P5xskk1Isqp60Ndu86RbfVBTUVQenB2oUlMlPGw9DUd6Zf9XvO9nt-RqW9-I7XeI4GbpW-RI4FcQTkjqVpiCWbn0t4Ql0DD9fQiWQbPwPHtmcbVV-xOLMbVlDSENfaeqWoeT_6nLf4XHEN8762kELy7kVjbTpKMg2cz3OZL9qDLP6o71Mj27i4joal9R89n2tlIasAo6tAtNEQsxeoYYjg_ej02fvRNWhWw0IiwFTFdejWxFXPRmbDAOhLy86Ca5EfBkbzDi9kZmn1tn0uAkueQxHlbcTrlFLATaEw45ynwzXHro6yzVPl370iKKA2By1-efo57h7UUXSx_TvnQR_d-xnd_PAdAYGxWV23ObRQNXMRiFfEEpzPjMfhX4RUzXxRM51-exGUkkq1yfNtx6ESmIVVyR2Luzw75FSwnY1a15oANWgf5LgmpHa5kS_D4GxWaciHZKcSYRFasMdOJ5Gy8IM8Zxmf54qbcB8BHnwQK1PpHtOFcytm8sgGZDytEac9NYnWFMkKVglO8Vqoh3jwLsh4Szj6ZCnl_OqmZRW1KrNZ9IIa9fOjasZHZe8Z1_soVURuwg7D94cxK_nAfbL9x0M8juUxHR7zQH3oo86qMxtYmcNMDxp5EKaS9LGVnbCudocPwF3bi-uVh5M1H6MjKR58YACgCtd0YV7Hq6I0eq48BcDoRH6WuKf6ouarag_YY9-oF2dxzPapDKrWBgG-CJSIaYRDHvfCMPDWBF-3LqybGD5Y8FuB6K-075vu6_v7NE1vSV0nRew3oHsL6_LdH_r0fVsDoHrWb01bP0ER_-8X4tIHBST8fCEf_fLJysZ-C_fK9_WyHftcMf0j9bsUprFmf79M-CuRnDZwrZdjZHPBwOP-EME0isDX-IhgKE7gx31DZONIHHI8KcMhjDGEKkkwHsO0R5LmlQ5vftN0P2rc6MK66uGC20rdENfm_4z4XfDXXQhf3Gfc-u1w_Heyxf7MP0ao-wni6OeehVvljzVDfNk9_RIUy6Pyy82w70DwdgJGaOOP6EYBY-D3iiKp7S7oOpj92SK4uuuh6n9W_KOMPyD--oVe1VW4Ra_UpU6pNqUv7SU1ZDFegAbTDQj7oY3_wC5S_L8b8e6_M6fkWIdXv85vnetc9fM-YzHeV2-XmrszoRrvLT0uWbQpOUcoMH-6usbK_KujqX24TegQbJ1BcRShjlAYTdPoEaMRkkR23759H50H2OYBp6gIedLEHomfwZ44xMjep2NiHx8OQUiRJB7j9O7bP54d-Io.aIs9cA.acu9HpwFo_j6O-1gLEV1680nygU'}
2025-07-31 12:54:57 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:54:57 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:54:57 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x06F958D0>
2025-07-31 12:54:57 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:57 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:57 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:54:57 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:57 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:54:57 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:54:57 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:54:57 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:54:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:54:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:54:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:54:57 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:57 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 12:54:57 - managers.commands_server - INFO - Checking commands server health
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.3126602172851562e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T09:54:57.719938'}, 'success': True}
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 12:54:58 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 12:54:58 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007033348083496094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:57.872605"
  },
  "success": false
}

2025-07-31 12:54:58 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007033348083496094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:57.872605"
  },
  "success": false
}

2025-07-31 12:54:58 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007033348083496094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:57.872605"
  },
  "success": false
}

2025-07-31 12:54:58 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 12:54:58 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:58 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:58 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:54:58 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 12:55:01 - managers.commands_server - DEBUG - Request completed in 2.43s with status 200
2025-07-31 12:55:01 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.283355474472046, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T09:55:01.185405'}, 'success': True}
2025-07-31 12:55:01 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 12:55:01 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 12:55:01 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 12:55:01 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 12:55:01 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 12:55:02 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 12:55:02 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 12:55:02 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:57:07 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:07 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:07 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:07 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 12:57:07 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:07 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 12:57:08 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 12:57:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:08 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:08 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 12:57:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:09 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:09 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:09 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:09 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 12:57:09 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:09 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 12:57:10 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:10 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:10 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 12:57:10 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:10 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:10 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 12:57:28 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:57:28 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:57:28 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:57:28 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3QjLYlNRSgwEb24AxMxsrGcw8XAYzPNW_v-TWqFYvetEbS0RknhPnRDjj782jidoSVlHVb7727RB92Qxd1G6-_r2BQRB13aOv86jafN3MEDBvEGN14kQrY0nJsrStKeWWDpN7yxIKHvn-wRa3qjtxBj1sMfbC2Bd1h6m2WV41NXj2efrQcKs_ADqhS-JsnXTqZXUQknkVWeTj2Ov7lGhEWmtZgh44eVu_bl3XW06Wysdrtj-GRJDTk9zayyXjDntNdrCP7Qfj5hQ7tw5tC06-y8nlo_cuQwwPsXthNUFn75IuaqejA-SUF6-MOMfscmN4e6Jvwo0Hkobhu93myyaamrSNugdEXuA7imAohiTJ3_EU-UBQzP7LJg1_-RLN58Q_BqmannVzkXAllTqp7BvvINFSec8VQx5lQxqVo5fJtgZcg8uVLMmUJV5cQ8ZdIFPuIoxuJuGeIZbKUUivhzMWOeyKebFwLX1qb4imCQh5DdXh6T4GS_26AjFzAYP71X25luHLB2Hn6VTmA2yFSKJqhZAmmTcX1YhHORMWhZfJq8NisPKAwoetDMLeJazMW0ssMRw6LumCBJOP4RjYCX4txTE4yYMHmJcHpiJ0lCIolRfiLPxKGxB_L6Vj6jpWLmV1KhssLi85KfOId9EW9YAj6Q0IM42Ai1L5toIkm7PMe71iF0A9KnXIc1VwEutQp5LgxP3W4liL55yRHgrzbAq7rrw6srdCGCmyNxMQhzAqWYwrhkupRj6pvEQhvbh8WNtg9a5ddGtdSFPhlx6qXZxDI2E9gCfQHn_V79nr9_QMS2uGttd4tpaq1X0ObRPhiJgDkiQA8eo_H5q9YOZ30gTxrAtny3eai21ORGAo1YrllwzCNdezYnBU6Ht-PhpA5DSbGu-lNcplr3ufY0Ilvv15LoNHa5COP-r71Mg1LnHHg9L8j55PtTxTlQ-Yyj9aeACsGWkYQnQ_PHz2_uXqDKeBgPSBIrs20xqE4lnYpOsp_qFlZ9E1qZsOGMEWxMwozd6yzoVvSlNwxAUL8zq5FAlDLIwoF5hgycHVltd5qqDjFX6BtNl48cvTTx0e0lF0kfU75yEfXeeMr35AW8RQbFKWdQ5NXOU1gPCK6ITmMxMI9BehFCPHFN5j3oQlkWfzLr8spjO0ajlkzm3eisKDeUmzTAq11Ia0ZKt7IJ7FctFMg3UdwNiUQysfYR8F0KRwFesvucak0O1z0qVGqozdiHTCUmgvzWKGTyFtRTrfU16LH29EOSlnrRZ8ir3uXYIrWf0ycvKE-huTlrfsNZKYxaOrECpJ3Fv38HjY7NMrGLL24W1mTQcqDLYb70SXTPg4amU_mAYhPqq4OTQCYNliThkuYWOgKLoqJSVL9B234zlKE19Q1vrqeq2AebukuMkp_rwbSW2Kje0rdNSPc9Pr1IGIr-0OG8XFJpfTx0WsWyogA0AMdlJXJyrdtlOGh6U_KZZE7q2KNgW78fqnYZ-Spx2j160L6iZCDxb6rdLwr6Tvm-7r-_s4jm9xXcdFBJu0ewvq8h0OffK-roG0etZvUQnT4n8_3rT1My0iRPj5Qj76-ZOVi2CL9sr39bIe_Fwx_SOBXYLSh-HC3_lJT8CJM8vl7F7HD2KtGg4hSuMYeo33GMAJkthvGzJ7vchdTsRlMAQRwOiSSl_7IOmxuPlIhjfYNN2PKle6oK56tODWYlfEpfk_I346hDAD9OI-oxa2w_7f8Rr7M_94Id3PNAp_7lm0Vf5YM_SXzROWaTE_Kliuhn0HQrfj9IVs_BFdKVAs_b2iqP16N-06lP3ZJLS666Hqf1b8o4w_IP76hV7VVbBGhSZYRE5UIctWjRg1IL8_UbpJg35ooz-wi4T470a8w3f2EO_r4ArrXO1c-3o_bzMOCFBRLzXvsIESbc17VHJ4U_K2WAA4Xl19Yf_VMfQ2WCd08NfO4ASO0XuKohmGwfeAwSgK23z79n10Huk6DwRNh9iTIbdY9PS35C7CtpCJyG202_kBTVFERDCbb_8ArRnzQg.aIs-CA.SskV7PWimqG0gQ5NQQ6bOo_fasg'}
2025-07-31 12:57:28 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:57:28 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:57:28 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x01C45450>
2025-07-31 12:57:28 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:28 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:28 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:57:28 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:28 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:57:28 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:57:28 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:57:28 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:57:28 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:57:28 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:57:28 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:57:28 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:57:28 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:57:28 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:57:28 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:57:28 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:57:28 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:28 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 12:57:28 - managers.commands_server - INFO - Checking commands server health
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0002589225769042969, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T09:57:28.555567'}, 'success': True}
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 12:57:28 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0013225078582763672,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:57:28.704020"
  },
  "success": false
}

2025-07-31 12:57:28 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0013225078582763672,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:57:28.704020"
  },
  "success": false
}

2025-07-31 12:57:28 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0013225078582763672,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:57:28.704020"
  },
  "success": false
}

2025-07-31 12:57:28 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 12:57:28 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:57:30 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:30 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:57:30 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 12:57:31 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:57:31 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:57:31 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:57:31 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3QjLYlNRSgwEb24AxMxsrGcw8XAYzPNW_v-TWqFYvetEbS0RknhPnRDjj782jidoSVlHVb7727RB92Qxd1G6-_r2BQRB13aOv86jafN3MEDBvEGN14kQrY0nJsrStKeWWDpN7yxIKHvn-wRa3qjtxBj1sMfbC2Bd1h6m2WV41NXj2efrQcKs_ADqhS-JsnXTqZXUQknkVWeTj2Ov7lGhEWmtZgh44eVu_bl3XW06Wysdrtj-GRJDTk9zayyXjDntNdrCP7Qfj5hQ7tw5tC06-y8nlo_cuQwwPsXthNUFn75IuaqejA-SUF6-MOMfscmN4e6Jvwo0Hkobhu93myyaamrSNugdEXuA7imAohiTJ3_EU-UBQzP7LJg1_-RLN58Q_BqmannVzkXAllTqp7BvvINFSec8VQx5lQxqVo5fJtgZcg8uVLMmUJV5cQ8ZdIFPuIoxuJuGeIZbKUUivhzMWOeyKebFwLX1qb4imCQh5DdXh6T4GS_26AjFzAYP71X25luHLB2Hn6VTmA2yFSKJqhZAmmTcX1YhHORMWhZfJq8NisPKAwoetDMLeJazMW0ssMRw6LumCBJOP4RjYCX4txTE4yYMHmJcHpiJ0lCIolRfiLPxKGxB_L6Vj6jpWLmV1KhssLi85KfOId9EW9YAj6Q0IM42Ai1L5toIkm7PMe71iF0A9KnXIc1VwEutQp5LgxP3W4liL55yRHgrzbAq7rrw6srdCGCmyNxMQhzAqWYwrhkupRj6pvEQhvbh8WNtg9a5ddGtdSFPhlx6qXZxDI2E9gCfQHn_V79nr9_QMS2uGttd4tpaq1X0ObRPhiJgDkiQA8eo_H5q9YOZ30gTxrAtny3eai21ORGAo1YrllwzCNdezYnBU6Ht-PhpA5DSbGu-lNcplr3ufY0Ilvv15LoNHa5COP-r71Mg1LnHHg9L8j55PtTxTlQ-Yyj9aeACsGWkYQnQ_PHz2_uXqDKeBgPSBIrs20xqE4lnYpOsp_qFlZ9E1qZsOGMEWxMwozd6yzoVvSlNwxAUL8zq5FAlDLIwoF5hgycHVltd5qqDjFX6BtNl48cvTTx0e0lF0kfU75yEfXeeMr35AW8RQbFKWdQ5NXOU1gPCK6ITmMxMI9BehFCPHFN5j3oQlkWfzLr8spjO0ajlkzm3eisKDeUmzTAq11Ia0ZKt7IJ7FctFMg3UdwNiUQysfYR8F0KRwFesvucak0O1z0qVGqozdiHTCUmgvzWKGTyFtRTrfU16LH29EOSlnrRZ8ir3uXYIrWf0ycvKE-huTlrfsNZKYxaOrECpJ3Fv38HjY7NMrGLL24W1mTQcqDLYb70SXTPg4amU_mAYhPqq4OTQCYNliThkuYWOgKLoqJSVL9B234zlKE19Q1vrqeq2AebukuMkp_rwbSW2Kje0rdNSPc9Pr1IGIr-0OG8XFJpfTx0WsWyogA0AMdlJXJyrdtlOGh6U_KZZE7q2KNgW78fqnYZ-Spx2j160L6iZCDxb6rdLwr6Tvm-7r-_s4jm9xXcdFBJu0ewvq8h0OffK-roG0etZvUQnT4n8_3rT1My0iRPj5Qj76-ZOVi2CL9sr39bIe_Fwx_SOBXYLSh-HC3_lJT8CJM8vl7F7HD2KtGg4hSuMYeo33GMAJkthvGzJ7vchdTsRlMAQRwOiSSl_7IOmxuPlIhjfYNN2PKle6oK56tODWYlfEpfk_I346hDAD9OI-oxa2w_7f8Rr7M_94Id3PNAp_7lm0Vf5YM_SXzROWaTE_Kliuhn0HQrfj9IVs_BFdKVAs_b2iqP16N-06lP3ZJLS666Hqf1b8o4w_IP76hV7VVbBGhSZYRE5UIctWjRg1IL8_UbpJg35ooz-wi4T470a8w3f2EO_r4ArrXO1c-3o_bzMOCFBRLzXvsIESbc17VHJ4U_K2WAA4Xl19Yf_VMfQ2WCd08NfO4ASO0XuKohmGwfeAwSgK23z79n10Huk6DwRNh9iTIbdY9PS35C7CtpCJyG202_kBTVFERDCbb_8ArRnzQg.aIs-CQ.ntYrGt7W-T_W4CSn7RUY5lsvN4E'}
2025-07-31 12:57:31 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:57:31 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:57:31 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x06F96D20>
2025-07-31 12:57:31 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:31 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:31 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:57:31 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:31 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:57:31 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:57:31 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:57:31 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:57:31 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:57:31 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:57:31 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:57:31 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:57:31 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:57:31 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:57:31 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:57:31 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:57:32 - managers.commands_server - DEBUG - Request completed in 2.53s with status 200
2025-07-31 12:57:32 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.378375768661499, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T09:57:32.397652'}, 'success': True}
2025-07-31 12:57:32 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 12:57:32 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 12:57:32 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 12:57:32 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 12:57:33 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 12:57:33 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 12:57:33 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 12:57:33 - services.base - INFO - Service operation completed: scan_network
2025-07-31 13:05:48 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:48 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:48 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:48 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:05:48 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:05:48 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:48 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:48 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:49 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:05:49 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:49 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:49 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:05:50 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:50 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:50 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:50 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:05:50 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:50 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:05:50 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:50 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:50 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:05:50 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:50 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:50 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:09:13 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:13 - services.base - INFO - Service operation completed: scan_network
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 13:09:13 - managers.commands_server - INFO - Checking commands server health
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Request completed in 0.17s with status 200
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.361701965332031e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T10:09:13.117020'}, 'success': True}
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 13:09:16 - managers.commands_server - DEBUG - Request completed in 2.96s with status 200
2025-07-31 13:09:16 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.8203132152557373, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T10:09:16.090073'}, 'success': True}
2025-07-31 13:09:16 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 13:09:16 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 13:09:16 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 13:09:16 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 13:09:16 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 13:09:16 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 13:09:16 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 13:09:16 - services.base - INFO - Service operation completed: scan_network
2025-07-31 13:09:34 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:34 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:09:35 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:09:35 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:09:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:09:35 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:35 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:09:35 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:09:35 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:09:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:14:16 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:14:16 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:14:16 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:14:16 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:14:16 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:14:16 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:14:16 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:14:16 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:14:17 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:14:17 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:14:17 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:14:17 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:15:24 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 13:15:27 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 13:33:36 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 13:33:39 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 13:33:59 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 13:33:59 - endpoints.settings - INFO - Request method: GET
2025-07-31 13:33:59 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 13:33:59 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcuyosoS_ZUTjtu9qUJQOuJEHFRQ1AJ5PyYGFCggL3mI0NH_ford3bs7btzBHdyJEWRVrZVrZZr5bXapojr3i6hoZ1_buou-zLomqmdfv818jKOmubTlPSpmX2eDD7k3n-J1es_Kr9y4ZPs00IOxpFlz0QTPXcwL53JjhFcF5aoxrHxGNUEcbPgHeF7PN87LW6hHcwb7uL8-XaR6p_GMnLDU-GawpHyAp9zqFbtnBNAt9_yyyw5Vl94Y2Voi50JvlmfjQNv6XjmearYQ61it-uaxacxykAT3yB3c1f0hhMDxV1v53vubm3vkA0rnNUkX1f3OgSg5rjS0jHjd6i7OZld4tHFIHJ4Cy-Xsyyx6VUkdNRefeAGWDM2xgKWZ3_GE-EAz3OrLLAk_fYmGQxzscKIkB90cJSAnUiPlbeVtJFbKtbtsoB4ZUi_vvBTZKnSN9V1O41Qeb6NrIOBCxLij0LupBDxDzOWdkJw2Bypy-AnzaAE1uapvhKbCNJpCZbjXejyWzxMUUxdyICi08ZSHzwCGjaczaQCpCSKOiglCeqGtOSrGrUepMMpbtDgRxX7hQXkb1giGrUtbqTelmFPAd9yFC2MK7cIe2zE45WKP96jzIPf04CsLHTnDufwknFlQqB3hb6WkT1zHuktpmSCDB2i8L9CW8I7qqGwAkV7BMFVpf5SLwJaJZHNAW6-V7QwqO7kMt-sC78Uy1JkY79e_tTjW6DkHooehPJuhThOvTuwtCEZC7E0FwiH0cnoDsuEyinF_KVuJIXoB2kxlsFrXzpopL6IpC3KP5C4OoRHzHgSxb_ef-Xv29P26hrk1-LZXebaaKIU2hLZJcETKgXGM4W3yk9LyKsGFOmgmSGX7lTtUe7QzK_ZFrZiwgpwjuOZUK1MX0KjvLAWJsqLeNSSL6kuGL9GbdORMHNgf91J_Z3XS7md-HxrXlUtrAOfmf9T8VaKBKQLIFcHOAhhaA9HQheR9uPmo_dPVubUK8SKAMnJtrjZo2bOol64n4KGmB9E1mbMOOcEWxNTIzdayDllgSi-8A4JFeQ3KRdoQMyO6Cxwe7_Bko6mfCt_xsiAj2myQfXr60e4e0ZE1kfX7zCM-us4BTH74tkiR2Esepz40SW8gSPCyaE_6MxVo8hdh5FSAaPS4N9F6VAzy6gUdwY3DldBZnQ89ozUwDRMrlDfz8XDc5q_zTVZlFlT8Y4jA3OqQUkLK3EVicQQnFrO-pSV2xu-xh9SBUZPsIRz3PhidnBXK7pF39JG0da64r0jbx2t292Ky5VnO_Ktid4mK1mcvrq-8FiPAnIy5dTXc8AjW7EZgqTp5AiF8igJnJt3h6T7n-8r0imTjiiURCh-hIc3zRzoatw1vVdt-EaSOcQcws-vaXcPNwVQGT1cHSWrsOr9iuj-X65Wq7S5eR-9u2V5cJfMlsi-tBfqQwf2NzDQal6stfHllW-W-ocjO1bg_50XOBPL6FfSZRB01elS35oXDd7UR8Gqxp5SGn-9Lnky3BpdVRAYW-S2S8K-4bavm6_t73_dvt7K8ZZFfJc0bLvN3v2vj92kNJMW1fItyP8n-9-tVXV6TLCKEHxPy0g4frOvIr8le-bFeposfK6a9xH4Tk-OFmAZ1CwWEmex6OR4804-NG7nudyE5BhSZxisKAnpBr-bVIn0-F8s7fctxhyNIsTmTPFc4bqlb9Yi7N7-qmp9ZTnS4LFqy4KZkJ8Sx-j8jfjhEMDGZuNeo9utu9c9tiv15fnkS3dckCn_tWbJV_lgz7JfZ1c-TbLgUfj4Z9gOIvL4lT2Ljz-hEQWLJ54piVtT0NmkacvqrSGR1l13R_sr4Zxp_QPz1iV6UBZ6ixn5D7yOZ0uX19rQwwDITphqSQdd2dfQHdhbT_92Id_-d39xWJT755V1pXPukHebpGgq-rBzLrcNjOZqbWpSvQZVvbTGDfn9y9ZH_u-HYOZ46tAumygAaUOyKYViO48AKchTDULPv33-0ziWZ-oFm2ZC6cos5FV2D-WIZUXOfixbzaLkMMMswdERzs-__AjeD9Go.aItGlw.268TFQGg580WNctnE2gJNkrRXFI'}
2025-07-31 13:33:59 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 13:33:59 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 13:33:59 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x065ECAF8>
2025-07-31 13:33:59 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:33:59 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:33:59 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 13:33:59 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:33:59 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 13:33:59 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 13:33:59 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 13:33:59 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 13:33:59 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 13:33:59 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 13:33:59 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 13:33:59 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 13:33:59 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 13:33:59 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 13:33:59 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 13:33:59 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 13:34:00 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:00 - services.base - INFO - Service operation completed: start_session
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 13:34:00 - managers.commands_server - INFO - Checking commands server health
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 13:34:00 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:00 - services.base - INFO - Service operation completed: start_session
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 13:34:00 - managers.commands_server - INFO - Checking commands server health
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.838539123535156e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T10:34:00.444431'}, 'success': True}
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.337860107421875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T10:34:00.550646'}, 'success': True}
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 13:34:00 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011415481567382812,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.591241"
  },
  "success": false
}

2025-07-31 13:34:00 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011415481567382812,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.591241"
  },
  "success": false
}

2025-07-31 13:34:00 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011415481567382812,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.591241"
  },
  "success": false
}

2025-07-31 13:34:00 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 13:34:00 - services.base - INFO - Service operation completed: start_session
2025-07-31 13:34:01 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 13:34:01 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007476806640625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.704504"
  },
  "success": false
}

2025-07-31 13:34:01 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007476806640625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.704504"
  },
  "success": false
}

2025-07-31 13:34:01 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007476806640625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.704504"
  },
  "success": false
}

2025-07-31 13:34:01 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 13:34:01 - services.base - INFO - Service operation completed: start_session
2025-07-31 13:34:01 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:01 - services.base - INFO - Service operation completed: scan_network
2025-07-31 13:34:01 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 13:34:02 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 13:34:02 - endpoints.settings - INFO - Request method: GET
2025-07-31 13:34:02 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 13:34:02 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcuyosoS_ZUTjtu9qUJQOuJEHFRQ1AJ5PyYGFCggL3mI0NH_ford3bs7btzBHdyJEWRVrZVrZZr5bXapojr3i6hoZ1_buou-zLomqmdfv818jKOmubTlPSpmX2eDD7k3n-J1es_Kr9y4ZPs00IOxpFlz0QTPXcwL53JjhFcF5aoxrHxGNUEcbPgHeF7PN87LW6hHcwb7uL8-XaR6p_GMnLDU-GawpHyAp9zqFbtnBNAt9_yyyw5Vl94Y2Voi50JvlmfjQNv6XjmearYQ61it-uaxacxykAT3yB3c1f0hhMDxV1v53vubm3vkA0rnNUkX1f3OgSg5rjS0jHjd6i7OZld4tHFIHJ4Cy-Xsyyx6VUkdNRefeAGWDM2xgKWZ3_GE-EAz3OrLLAk_fYmGQxzscKIkB90cJSAnUiPlbeVtJFbKtbtsoB4ZUi_vvBTZKnSN9V1O41Qeb6NrIOBCxLij0LupBDxDzOWdkJw2Bypy-AnzaAE1uapvhKbCNJpCZbjXejyWzxMUUxdyICi08ZSHzwCGjaczaQCpCSKOiglCeqGtOSrGrUepMMpbtDgRxX7hQXkb1giGrUtbqTelmFPAd9yFC2MK7cIe2zE45WKP96jzIPf04CsLHTnDufwknFlQqB3hb6WkT1zHuktpmSCDB2i8L9CW8I7qqGwAkV7BMFVpf5SLwJaJZHNAW6-V7QwqO7kMt-sC78Uy1JkY79e_tTjW6DkHooehPJuhThOvTuwtCEZC7E0FwiH0cnoDsuEyinF_KVuJIXoB2kxlsFrXzpopL6IpC3KP5C4OoRHzHgSxb_ef-Xv29P26hrk1-LZXebaaKIU2hLZJcETKgXGM4W3yk9LyKsGFOmgmSGX7lTtUe7QzK_ZFrZiwgpwjuOZUK1MX0KjvLAWJsqLeNSSL6kuGL9GbdORMHNgf91J_Z3XS7md-HxrXlUtrAOfmf9T8VaKBKQLIFcHOAhhaA9HQheR9uPmo_dPVubUK8SKAMnJtrjZo2bOol64n4KGmB9E1mbMOOcEWxNTIzdayDllgSi-8A4JFeQ3KRdoQMyO6Cxwe7_Bko6mfCt_xsiAj2myQfXr60e4e0ZE1kfX7zCM-us4BTH74tkiR2Esepz40SW8gSPCyaE_6MxVo8hdh5FSAaPS4N9F6VAzy6gUdwY3DldBZnQ89ozUwDRMrlDfz8XDc5q_zTVZlFlT8Y4jA3OqQUkLK3EVicQQnFrO-pSV2xu-xh9SBUZPsIRz3PhidnBXK7pF39JG0da64r0jbx2t292Ky5VnO_Ktid4mK1mcvrq-8FiPAnIy5dTXc8AjW7EZgqTp5AiF8igJnJt3h6T7n-8r0imTjiiURCh-hIc3zRzoatw1vVdt-EaSOcQcws-vaXcPNwVQGT1cHSWrsOr9iuj-X65Wq7S5eR-9u2V5cJfMlsi-tBfqQwf2NzDQal6stfHllW-W-ocjO1bg_50XOBPL6FfSZRB01elS35oXDd7UR8Gqxp5SGn-9Lnky3BpdVRAYW-S2S8K-4bavm6_t73_dvt7K8ZZFfJc0bLvN3v2vj92kNJMW1fItyP8n-9-tVXV6TLCKEHxPy0g4frOvIr8le-bFeposfK6a9xH4Tk-OFmAZ1CwWEmex6OR4804-NG7nudyE5BhSZxisKAnpBr-bVIn0-F8s7fctxhyNIsTmTPFc4bqlb9Yi7N7-qmp9ZTnS4LFqy4KZkJ8Sx-j8jfjhEMDGZuNeo9utu9c9tiv15fnkS3dckCn_tWbJV_lgz7JfZ1c-TbLgUfj4Z9gOIvL4lT2Ljz-hEQWLJ54piVtT0NmkacvqrSGR1l13R_sr4Zxp_QPz1iV6UBZ6ixn5D7yOZ0uX19rQwwDITphqSQdd2dfQHdhbT_92Id_-d39xWJT755V1pXPukHebpGgq-rBzLrcNjOZqbWpSvQZVvbTGDfn9y9ZH_u-HYOZ46tAumygAaUOyKYViO48AKchTDULPv33-0ziWZ-oFm2ZC6cos5FV2D-WIZUXOfixbzaLkMMMswdERzs-__AjeD9Go.aItGmQ.-bZ-NMmRhRf83C5qly2o3bwL0NU'}
2025-07-31 13:34:02 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 13:34:02 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 13:34:02 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x06606510>
2025-07-31 13:34:02 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:02 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:02 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 13:34:02 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:02 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 13:34:02 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 13:34:02 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 13:34:02 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 13:34:02 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 13:34:02 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 13:34:02 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 13:34:02 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 13:34:02 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 13:34:02 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 13:34:02 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 13:34:02 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 13:34:04 - managers.commands_server - DEBUG - Request completed in 3.12s with status 200
2025-07-31 13:34:04 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.9592514038085938, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T10:34:04.257984'}, 'success': True}
2025-07-31 13:34:04 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 13:34:04 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 13:34:04 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 13:34:04 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 13:34:05 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 13:34:05 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 13:34:05 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 13:34:05 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:52:19 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:52:25 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:52:33 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:52:33 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:52:33 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:52:33 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItnEA.UalLOOIDQWSfgkj1NAMs2oMO6Pg'}
2025-07-31 15:52:33 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:52:33 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:52:33 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f26dd582020>
2025-07-31 15:52:33 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:52:33 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:52:33 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:52:33 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:52:33 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:33 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:52:33 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:52:33 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:52:33 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:33 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:52:33 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:52:33 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:52:33 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:52:33 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItnEQ.7pGXx5sPjSF84VwFQiGkYTfI6qQ'}
2025-07-31 15:52:33 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:52:33 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:52:33 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f26dd581e70>
2025-07-31 15:52:33 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:52:33 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:52:33 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:52:33 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:52:33 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:33 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:52:33 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:52:33 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:52:33 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:33 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:52:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:34 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 15:52:34 - managers.commands_server - INFO - Checking commands server health
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.6941299438476562e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T12:52:34.003548'}, 'success': True}
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 15:52:34 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007786750793457031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:34.145840"
  },
  "success": false
}

2025-07-31 15:52:34 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007786750793457031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:34.145840"
  },
  "success": false
}

2025-07-31 15:52:34 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007786750793457031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:34.145840"
  },
  "success": false
}

2025-07-31 15:52:34 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:52:34 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:52:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:34 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 15:52:37 - managers.commands_server - DEBUG - Request completed in 2.62s with status 200
2025-07-31 15:52:37 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.438366174697876, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:52:37.261592'}, 'success': True}
2025-07-31 15:52:37 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 15:52:37 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 15:52:37 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 15:52:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 15:52:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 15:52:38 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 15:52:38 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 15:52:38 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:52:47 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:52:47 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:52:47 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:52:47 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItnHg.qJuHJuPzgN_vDdL9w0eKN-ZrDYc'}
2025-07-31 15:52:47 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:52:47 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:52:47 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f26da34d090>
2025-07-31 15:52:47 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:47 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:47 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:52:47 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:47 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:52:47 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:52:47 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:52:47 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:47 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:52:47 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:52:47 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:52:47 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:52:47 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:52:47 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:52:47 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:47 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:52:47 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:47 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:52:47 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:52:47 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 15:52:47 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006444454193115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:47.177494"
  },
  "success": false
}

2025-07-31 15:52:47 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006444454193115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:47.177494"
  },
  "success": false
}

2025-07-31 15:52:47 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006444454193115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:47.177494"
  },
  "success": false
}

2025-07-31 15:52:47 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:52:47 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:52:48 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:48 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:52:48 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 15:52:50 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:52:50 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:52:50 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:52:50 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItnHw.Y27qMBB-uz-Whi7tGSmxHy8BlYA'}
2025-07-31 15:52:50 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:52:50 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:52:50 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f26da301720>
2025-07-31 15:52:50 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:50 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:50 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:52:50 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:50 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:52:50 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:52:50 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:52:50 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:50 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:52:50 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:52:50 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:52:50 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:52:50 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:52:50 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:52:50 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:50 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:52:51 - managers.commands_server - DEBUG - Request completed in 2.61s with status 200
2025-07-31 15:52:51 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.4197170734405518, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:52:50.589606'}, 'success': True}
2025-07-31 15:52:51 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 15:52:51 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 15:52:51 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 15:52:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 15:52:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 15:52:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 15:52:51 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 15:52:51 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:56:34 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:56:39 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:56:45 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:56:45 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:56:45 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:56:45 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItoDA.VQuy2BoqS5kJwtwoIDN2qyu6_pE'}
2025-07-31 15:56:45 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:56:45 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:56:45 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe13077da50>
2025-07-31 15:56:45 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:56:45 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:56:45 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:56:45 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:56:45 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:56:45 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:56:45 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:56:45 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:56:45 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:56:45 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:56:45 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:56:45 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:56:45 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:56:45 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItoDQ.5VYfpQYDAHNBEEQY4aIeW5MUUJg'}
2025-07-31 15:56:45 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:56:45 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:56:45 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe13077dd80>
2025-07-31 15:56:45 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:56:45 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:56:45 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:56:45 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:56:45 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:56:45 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:56:45 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:56:45 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:56:45 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:56:45 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:56:46 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:46 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 15:56:46 - managers.commands_server - INFO - Checking commands server health
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0002803802490234375, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T12:56:46.095564'}, 'success': True}
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 15:56:46 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0058438777923583984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:56:46.246042"
  },
  "success": false
}

2025-07-31 15:56:46 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0058438777923583984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:56:46.246042"
  },
  "success": false
}

2025-07-31 15:56:46 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0058438777923583984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:56:46.246042"
  },
  "success": false
}

2025-07-31 15:56:46 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:56:46 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:56:46 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:46 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 15:56:49 - managers.commands_server - DEBUG - Request completed in 2.62s with status 200
2025-07-31 15:56:49 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.4429194927215576, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:56:49.362596'}, 'success': True}
2025-07-31 15:56:49 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 15:56:49 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 15:56:49 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 15:56:49 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 15:56:49 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 15:56:50 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 15:56:50 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 15:56:50 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:57:00 - endpoints.settings - INFO - === Starting save_router_id endpoint ===
2025-07-31 15:57:00 - endpoints.settings - INFO - Request method: POST
2025-07-31 15:57:00 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:57:00 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Content-Length': '79', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Content-Type': 'application/json', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItoEg.YRW6nn2PLO0jO8Jk06xroplTep4'}
2025-07-31 15:57:00 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe1303d1c30>
2025-07-31 15:57:00 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:57:00 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 15:57:00 - endpoints.settings - INFO - Request body parsed: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:57:00 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:57:00 - endpoints.settings - INFO - Calling save_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:57:00 - services.settings_service - INFO - === Starting save_router_id_setting ===
2025-07-31 15:57:00 - services.settings_service - INFO - Input parameters - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:57:00 - services.settings_service - INFO - Router ID validation passed: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:57:00 - services.settings_service - INFO - Allowing multiple users to use the same router ID
2025-07-31 15:57:00 - services.settings_service - INFO - Querying existing UserSetting record...
2025-07-31 15:57:00 - services.settings_service - INFO - Found existing UserSetting record: id=33039718-fdde-458e-b250-50e52516db96
2025-07-31 15:57:00 - services.settings_service - INFO - Updating setting_value from {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'} to {'routerId': e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f}
2025-07-31 15:57:00 - services.settings_service - INFO - UserSetting record updated successfully
2025-07-31 15:57:00 - services.settings_service - INFO - Querying existing UserRouter record...
2025-07-31 15:57:00 - services.settings_service - INFO - Found existing UserRouter record: id=4f9b95d3-cc3f-461e-a1db-8ed7fedf123d, is_active=True
2025-07-31 15:57:00 - services.settings_service - INFO - UserRouter is already active
2025-07-31 15:57:00 - services.settings_service - INFO - About to commit session to database...
2025-07-31 15:57:00 - services.settings_service - INFO - Session committed successfully!
2025-07-31 15:57:00 - services.settings_service - INFO - === save_router_id_setting completed successfully ===
2025-07-31 15:57:00 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'message': 'RouterId saved in settings.'}, error: None
2025-07-31 15:57:00 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'message': 'RouterId saved in settings.'}
2025-07-31 15:57:00 - endpoints.settings - INFO - === save_router_id endpoint completed successfully ===
2025-07-31 17:54:45 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 17:54:50 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 17:54:57 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 17:54:57 - endpoints.settings - INFO - Request method: GET
2025-07-31 17:54:57 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 17:54:57 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuDvw.Hdf7rSrOaWxIVC-MOXhToHGdmco'}
2025-07-31 17:54:57 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 17:54:57 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 17:54:57 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe63859e260>
2025-07-31 17:54:57 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 17:54:57 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 17:54:57 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 17:54:57 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 17:54:57 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 17:54:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 17:54:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 17:54:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 17:54:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 17:54:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 17:54:57 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 17:54:57 - endpoints.settings - INFO - Request method: GET
2025-07-31 17:54:57 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 17:54:57 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuDwQ.H1V7u8D4-IxKKClf4pLX8Ej2LFU'}
2025-07-31 17:54:57 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 17:54:57 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 17:54:57 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe63859d1e0>
2025-07-31 17:54:57 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 17:54:57 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 17:54:57 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 17:54:57 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 17:54:57 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 17:54:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 17:54:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 17:54:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 17:54:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 17:54:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 17:54:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:58 - services.base - INFO - Service operation completed: start_session
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 17:54:58 - managers.commands_server - INFO - Checking commands server health
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Request completed in 0.18s with status 200
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.00027108192443847656, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T14:54:58.219373'}, 'success': True}
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 17:55:00 - managers.commands_server - DEBUG - Request completed in 2.40s with status 200
2025-07-31 17:55:00 - managers.commands_server - DEBUG - Received response: {'data': {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, 'error': None, 'metadata': {'executionTime': 2.2913856506347656, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T14:55:00.678728'}, 'success': True}
2025-07-31 17:55:00 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/session/start'
2025-07-31 17:55:00 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, error: None
2025-07-31 17:55:00 - services.commands_server_operations.session_execute - INFO - Session started successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:55:00 - services.base - INFO - Service operation completed: start_session
2025-07-31 17:55:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:55:01 - services.base - INFO - Service operation completed: scan_network
2025-07-31 17:55:01 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 17:55:03 - managers.commands_server - DEBUG - Request completed in 2.60s with status 200
2025-07-31 17:55:03 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.494995594024658, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T14:55:03.863680'}, 'success': True}
2025-07-31 17:55:03 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 17:55:03 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 17:55:03 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 17:55:03 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 17:55:04 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 17:55:04 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 17:55:04 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 17:55:04 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:04:18 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:04:24 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:04:32 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:04:32 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:04:32 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:04:32 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuF_w.qZFXsB43EM1BEf9FzfB7PsDbabI'}
2025-07-31 18:04:32 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:04:32 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:04:32 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f102dfa2230>
2025-07-31 18:04:32 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:04:32 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:04:32 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:04:32 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:04:32 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:04:32 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:04:32 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:04:32 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:04:32 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:04:32 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:04:32 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:04:32 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:04:32 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:04:32 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuGAA.EoQT8kF59qH0JM_q3V1TtvyKSVs'}
2025-07-31 18:04:32 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:04:32 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:04:32 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f102dfa13f0>
2025-07-31 18:04:32 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:04:32 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:04:32 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:04:32 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:04:32 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:04:32 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:04:32 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:04:32 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:04:32 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:04:32 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:04:33 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:33 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:04:33 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 5.745887756347656e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:04:33.452867'}, 'success': True}
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 18:04:33 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012547969818115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:04:33.591790"
  },
  "success": false
}

2025-07-31 18:04:33 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012547969818115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:04:33.591790"
  },
  "success": false
}

2025-07-31 18:04:33 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012547969818115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:04:33.591790"
  },
  "success": false
}

2025-07-31 18:04:33 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 18:04:33 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:04:33 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:33 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 18:04:36 - managers.commands_server - DEBUG - Request completed in 3.03s with status 200
2025-07-31 18:04:36 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.9874773025512695, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:04:37.268296'}, 'success': True}
2025-07-31 18:04:36 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 18:04:36 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 18:04:36 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 18:04:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 18:04:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 18:04:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 18:04:37 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 18:04:37 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:10:46 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:10:46 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:10:46 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:10:46 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuHdQ.iRwa7AANcoHkkdmOlRaiH4PSGVI'}
2025-07-31 18:10:46 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:10:46 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:10:46 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f102dbface0>
2025-07-31 18:10:46 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:10:46 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:10:46 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:10:46 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:10:46 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:10:46 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:10:46 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:46 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:10:46 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:10:46 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:10:46 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:10:46 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:10:46 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:10:46 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:10:46 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:10:46 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:10:46 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuHdg.IihtDr1-UVqmwjrYn8G65oeswyo'}
2025-07-31 18:10:46 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:10:46 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:10:46 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f102dfa23e0>
2025-07-31 18:10:46 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:10:46 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:10:46 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:10:46 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:10:47 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:10:47 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:10:47 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:47 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:10:47 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:10:47 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:10:47 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:10:47 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:10:47 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:10:47 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:47 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:10:47 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.0279159545898438e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:10:48.154969'}, 'success': True}
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 18:10:47 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015690326690673828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:10:48.302797"
  },
  "success": false
}

2025-07-31 18:10:47 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015690326690673828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:10:48.302797"
  },
  "success": false
}

2025-07-31 18:10:47 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015690326690673828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:10:48.302797"
  },
  "success": false
}

2025-07-31 18:10:47 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 18:10:47 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:10:48 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:48 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:10:48 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 18:10:50 - managers.commands_server - DEBUG - Request completed in 2.64s with status 200
2025-07-31 18:10:50 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.59097957611084, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:10:51.572667'}, 'success': True}
2025-07-31 18:10:50 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 18:10:50 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 18:10:50 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 18:10:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 18:10:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 18:10:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 18:10:51 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 18:10:51 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:10:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:53 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD ENDPOINT - Starting request processing
2025-07-31 18:10:53 - endpoints.blacklist - INFO -   - Authenticated user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:53 - endpoints.blacklist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:53 - endpoints.blacklist - INFO -   - Session ID: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:53 - endpoints.blacklist - INFO -   - Request body: {'ip': '192.168.1.122', 'name': 'DESKTOP-DQ80I51', 'description': 'DESKTOP-DQ80I51 - d8:bb:c1:47:3a:43'}
2025-07-31 18:10:53 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD - Calling service with IP: 192.168.1.122
2025-07-31 18:10:53 - services.base - INFO - Service operation completed: add_device_to_blacklist
2025-07-31 18:10:53 - services.db_operations.blacklist_db - INFO - Added device 192.168.1.122 to blacklist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:53 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/add
2025-07-31 18:10:55 - managers.commands_server - DEBUG - Request completed in 1.28s with status 200
2025-07-31 18:10:55 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 added to blacklist.', 'error': None, 'metadata': {'executionTime': 1.1798653602600098, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:10:55.927712'}, 'success': True}
2025-07-31 18:10:55 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/add'
2025-07-31 18:10:55 - services.commands_server_operations.blacklist_execute - INFO - Added device 192.168.1.122 to blacklist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:55 - services.base - INFO - Service operation completed: add_device_to_blacklist
2025-07-31 18:10:55 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD - Success! Result: Device 192.168.1.122 added to blacklist.
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.db_operations.blacklist_db - INFO - Created blacklist limit rate setting for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:10:58 - services.db_operations.blacklist_db - INFO - Created blacklist mode setting for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:10:59 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:17 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:17 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:11:26 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:26 - services.base - INFO - Service operation completed: set_blacklist_limit_rate
2025-07-31 18:11:26 - services.db_operations.blacklist_db - INFO - Set blacklist limit rate for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 50 Mbps
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:11:26 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.0517578125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:11:27.867282'}, 'success': True}
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/limit-rate
2025-07-31 18:11:27 - managers.commands_server - DEBUG - Request completed in 0.51s with status 200
2025-07-31 18:11:27 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': 50}, 'error': None, 'metadata': {'executionTime': 0.3969461917877197, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:11:28.402115'}, 'success': True}
2025-07-31 18:11:27 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/limit-rate'
2025-07-31 18:11:27 - services.commands_server_operations.blacklist_execute - INFO - Set blacklist rate limit to 50 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:11:27 - services.base - INFO - Service operation completed: set_blacklist_limit_rate
2025-07-31 18:11:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:27 - services.base - INFO - Service operation completed: activate_blacklist_mode
2025-07-31 18:11:27 - services.db_operations.blacklist_db - INFO - Activated blacklist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:11:27 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/mode
2025-07-31 18:11:39 - managers.commands_server - DEBUG - Request completed in 11.67s with status 200
2025-07-31 18:11:39 - managers.commands_server - DEBUG - Received response: {'data': 'Blacklist mode activated.', 'error': None, 'metadata': {'executionTime': 10.666852474212646, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:11:39.532503'}, 'success': True}
2025-07-31 18:11:39 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/mode'
2025-07-31 18:11:39 - services.commands_server_operations.blacklist_execute - INFO - Activated blacklist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:11:39 - services.base - INFO - Service operation completed: activate_blacklist_mode
2025-07-31 18:11:40 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:50 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:12:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:12:17 - services.base - INFO - Service operation completed: deactivate_blacklist_mode
2025-07-31 18:12:17 - services.db_operations.blacklist_db - INFO - Deactivated blacklist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:12:17 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.3855438232421875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:12:17.460595'}, 'success': True}
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/blacklist/mode
2025-07-31 18:12:21 - managers.commands_server - DEBUG - Request completed in 3.55s with status 200
2025-07-31 18:12:21 - managers.commands_server - DEBUG - Received response: {'data': 'Blacklist mode deactivated.', 'error': None, 'metadata': {'executionTime': 3.6382131576538086, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:12:21.237765'}, 'success': True}
2025-07-31 18:12:21 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/mode'
2025-07-31 18:12:21 - services.commands_server_operations.blacklist_execute - INFO - Deactivated blacklist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:12:21 - services.base - INFO - Service operation completed: deactivate_blacklist_mode
2025-07-31 18:12:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:21:53 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:22:00 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:22:09 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:23:56 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:24:58 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:25:04 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:25:09 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:25:09 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:25:09 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:25:09 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuK1Q.wmWrtX5ktq0vCIQ-p8pc51HI32s'}
2025-07-31 18:25:09 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:25:09 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:25:09 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7faed7996500>
2025-07-31 18:25:09 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:09 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:09 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:25:09 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:09 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:25:09 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:25:09 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:25:10 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:25:10 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:25:10 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:25:10 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:25:10 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:25:10 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:25:10 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:25:10 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:25:10 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:25:10 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuK1Q.wmWrtX5ktq0vCIQ-p8pc51HI32s'}
2025-07-31 18:25:10 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:25:10 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:25:10 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7faed79951e0>
2025-07-31 18:25:10 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:10 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:10 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:25:10 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:10 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:25:10 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:25:10 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:25:10 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:25:10 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:25:10 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:25:10 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:25:10 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:25:10 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:25:10 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:10 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:25:10 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:25:10 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:25:10 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Request completed in 0.20s with status 200
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0003871917724609375, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:25:11.352738'}, 'success': True}
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 18:25:11 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002445697784423828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:25:11.523259"
  },
  "success": false
}

2025-07-31 18:25:11 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002445697784423828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:25:11.523259"
  },
  "success": false
}

2025-07-31 18:25:11 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002445697784423828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:25:11.523259"
  },
  "success": false
}

2025-07-31 18:25:11 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 18:25:11 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:25:11 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:11 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 18:25:14 - managers.commands_server - DEBUG - Request completed in 3.07s with status 200
2025-07-31 18:25:14 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.0522141456604004, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:25:15.258326'}, 'success': True}
2025-07-31 18:25:14 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 18:25:14 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 18:25:14 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 18:25:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 18:25:15 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 18:25:15 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 18:25:15 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 18:25:15 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:21 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:21 - services.base - INFO - Service operation completed: remove_device_from_blacklist
2025-07-31 18:25:22 - services.db_operations.blacklist_db - INFO - Removed device 192.168.1.122 from blacklist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:22 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/remove
2025-07-31 18:25:22 - managers.commands_server - DEBUG - Request completed in 0.78s with status 200
2025-07-31 18:25:22 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 removed from blacklist.', 'error': None, 'metadata': {'executionTime': 0.6668331623077393, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:25:23.720848'}, 'success': True}
2025-07-31 18:25:22 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/remove'
2025-07-31 18:25:22 - services.commands_server_operations.blacklist_execute - INFO - Removed device 192.168.1.122 from blacklist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:22 - services.base - INFO - Service operation completed: remove_device_from_blacklist
2025-07-31 18:25:26 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:26 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD ENDPOINT - Starting request processing
2025-07-31 18:25:26 - endpoints.blacklist - INFO -   - Authenticated user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:26 - endpoints.blacklist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:26 - endpoints.blacklist - INFO -   - Session ID: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:26 - endpoints.blacklist - INFO -   - Request body: {'ip': '192.168.1.122', 'name': 'DESKTOP-DQ80I51', 'description': 'DESKTOP-DQ80I51 - d8:bb:c1:47:3a:43'}
2025-07-31 18:25:26 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD - Calling service with IP: 192.168.1.122, name: DESKTOP-DQ80I51
2025-07-31 18:25:26 - services.base - INFO - Service operation completed: add_device_to_blacklist
2025-07-31 18:25:26 - services.db_operations.blacklist_db - INFO - Added device 192.168.1.122 to blacklist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/add
2025-07-31 18:25:28 - managers.commands_server - DEBUG - Request completed in 1.27s with status 200
2025-07-31 18:25:28 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 added to blacklist.', 'error': None, 'metadata': {'executionTime': 1.1729037761688232, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:25:29.158172'}, 'success': True}
2025-07-31 18:25:28 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/add'
2025-07-31 18:25:28 - services.commands_server_operations.blacklist_execute - INFO - Added device 192.168.1.122 to blacklist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:28 - services.base - INFO - Service operation completed: add_device_to_blacklist
2025-07-31 18:25:28 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD - Success! Result: Device 192.168.1.122 added to blacklist.
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:42 - services.base - INFO - Service operation completed: remove_device_from_blacklist
2025-07-31 18:25:42 - services.db_operations.blacklist_db - INFO - Removed device 192.168.1.122 from blacklist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:25:42 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.765655517578125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:25:43.038204'}, 'success': True}
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/remove
2025-07-31 18:25:43 - managers.commands_server - DEBUG - Request completed in 0.76s with status 200
2025-07-31 18:25:43 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 removed from blacklist.', 'error': None, 'metadata': {'executionTime': 0.6565783023834229, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:25:43.831718'}, 'success': True}
2025-07-31 18:25:43 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/remove'
2025-07-31 18:25:43 - services.commands_server_operations.blacklist_execute - INFO - Removed device 192.168.1.122 from blacklist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:43 - services.base - INFO - Service operation completed: remove_device_from_blacklist
2025-07-31 18:28:58 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:29:03 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:29:06 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:06 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:07 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:29:07 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:29:07 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:29:07 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuLwg.GLO0kRSBQ10CVvxPTNqufrrcrrs'}
2025-07-31 18:29:07 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:29:07 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:29:07 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fc1b7bd02b0>
2025-07-31 18:29:07 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:29:07 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:29:07 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:29:07 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:07 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:29:07 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:29:07 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:07 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:29:07 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:29:07 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:29:07 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:29:07 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:29:07 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:08 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:29:08 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:29:08 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:29:08 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuLww.mH1vVa56yd6pRfpJ13x95rSQs8g'}
2025-07-31 18:29:08 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:29:08 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:29:08 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fc1b7b8dd20>
2025-07-31 18:29:08 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:29:08 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:29:08 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:29:08 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:29:08 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.6702880859375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:29:09.246068'}, 'success': True}
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 18:29:08 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:29:08 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:29:08 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:08 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:29:08 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:29:08 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:29:08 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:29:08 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:29:08 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-07-31 18:29:08 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007791519165039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:29:09.384105"
  },
  "success": false
}

2025-07-31 18:29:08 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007791519165039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:29:09.384105"
  },
  "success": false
}

2025-07-31 18:29:08 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007791519165039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:29:09.384105"
  },
  "success": false
}

2025-07-31 18:29:08 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:29:13 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:13 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:29:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 18:29:16 - managers.commands_server - DEBUG - Request completed in 2.55s with status 200
2025-07-31 18:29:16 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.5122084617614746, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:29:17.164796'}, 'success': True}
2025-07-31 18:29:16 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 18:29:16 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 18:29:16 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 18:29:16 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 18:29:16 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 18:29:16 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 18:29:16 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 18:29:16 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:29:23 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:23 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD ENDPOINT - Starting request processing
2025-07-31 18:29:23 - endpoints.whitelist - INFO -   - Authenticated user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:23 - endpoints.whitelist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:23 - endpoints.whitelist - INFO -   - Session ID: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:23 - endpoints.whitelist - INFO -   - Request body: {'ip': '192.168.1.122', 'name': 'DESKTOP-DQ80I51', 'description': 'DESKTOP-DQ80I51 - d8:bb:c1:47:3a:43'}
2025-07-31 18:29:23 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD - Calling service with IP: 192.168.1.122, name: DESKTOP-DQ80I51
2025-07-31 18:29:23 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-07-31 18:29:23 - services.db_operations.whitelist_db - INFO - Added device 192.168.1.122 to whitelist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:23 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/add
2025-07-31 18:29:25 - managers.commands_server - DEBUG - Request completed in 1.77s with status 200
2025-07-31 18:29:25 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 added to whitelist.', 'error': None, 'metadata': {'executionTime': 1.6942095756530762, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:29:26.649142'}, 'success': True}
2025-07-31 18:29:25 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/add'
2025-07-31 18:29:25 - services.commands_server_operations.whitelist_execute - INFO - Added device 192.168.1.122 to whitelist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:25 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-07-31 18:29:25 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD - Success! Result: Device 192.168.1.122 added to whitelist.
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:34 - services.base - INFO - Service operation completed: remove_device_from_whitelist
2025-07-31 18:29:35 - services.db_operations.whitelist_db - INFO - Removed device 192.168.1.122 from whitelist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:35 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/remove
2025-07-31 18:29:36 - managers.commands_server - DEBUG - Request completed in 1.70s with status 200
2025-07-31 18:29:36 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 removed from whitelist.', 'error': None, 'metadata': {'executionTime': 1.6202030181884766, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:29:37.111991'}, 'success': True}
2025-07-31 18:29:36 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/remove'
2025-07-31 18:29:36 - services.commands_server_operations.whitelist_execute - INFO - Removed device 192.168.1.122 from whitelist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:36 - services.base - INFO - Service operation completed: remove_device_from_whitelist
2025-07-31 18:29:47 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:47 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 18:29:47 - services.db_operations.whitelist_db - INFO - Set whitelist limit rate for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 90 Mbps
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:29:47 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.4318695068359375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:29:48.307215'}, 'success': True}
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/limit-rate
2025-07-31 18:29:48 - managers.commands_server - DEBUG - Request completed in 0.51s with status 200
2025-07-31 18:29:48 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': 90}, 'error': None, 'metadata': {'executionTime': 0.3988471031188965, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:29:48.841896'}, 'success': True}
2025-07-31 18:29:48 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/limit-rate'
2025-07-31 18:29:48 - services.commands_server_operations.whitelist_execute - INFO - Set whitelist rate limit to 90 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:48 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 18:29:48 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:48 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 18:29:49 - services.db_operations.whitelist_db - INFO - Activated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:49 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 18:29:59 - managers.commands_server - DEBUG - Request completed in 10.23s with status 200
2025-07-31 18:29:59 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode activated.', 'error': None, 'metadata': {'executionTime': 10.492425680160522, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:30:00.402395'}, 'success': True}
2025-07-31 18:29:59 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 18:29:59 - services.commands_server_operations.whitelist_execute - INFO - Activated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:59 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 18:29:59 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:30:09 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:30:09 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 18:30:10 - services.db_operations.whitelist_db - INFO - Deactivated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:30:10 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 18:30:15 - managers.commands_server - DEBUG - Request completed in 4.93s with status 200
2025-07-31 18:30:15 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode deactivated.', 'error': None, 'metadata': {'executionTime': 4.775225639343262, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:30:16.308043'}, 'success': True}
2025-07-31 18:30:15 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 18:30:15 - services.commands_server_operations.whitelist_execute - INFO - Deactivated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:30:15 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 19:23:49 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 19:23:51 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 19:24:23 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:24:23 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:24:23 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:24:23 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVUnTqkoS_SsvXF-_r5gUbkRHtMogCiiKTBsCipJ5kFF5cf97F96xIzqie9EbFllZJ0-eSvL8vfBq1BR-icpu8bVrevRl0beoWXz9e-FDiNrW66oMlYuvi5dPch8bsLlS-5X2qqlSXDeAKbzEhw_P3qddAx90uW0ydyXRfRGvYOSsraZY5upRG-qXogixqqweqZ3I15U0SnJb2-pKFtQ6zZtz4joBayytlDv2z9D2h0H0rKAXnPFEk6E1Lm8kYtzAqK_ZiVyywnB1Za9VeXCIiNNobIfOQg0EXbAfAjK2wJM4d7x6gEQnyw87O8eTwALAmkAnmWu9v_i7yDludPa6uWyuor6XbFJNCIkxuGfkODBf3lfncpNY8TMCJFgvvizQs04a1Ho-VopYMxTHkhRB_o4nWCWK4dgviyT8pRp6HeJAgskpOVxvk0xoidzKRVe7O3klF5dMM9RRNeRRk9xUtXTSMbaZlsapNkWTY6iEQ6qMMwmjk8qEa4iFJgmJsjsAZG9mzKNJ6Mld_8Blakipc6gK95cRTtWgkGLqkBwRlJdJKUIsS9i6VyYNSDBDxKicIeSnyt-mkxGNaipMGq_Sir0BfumSGh82Khl2DmWm7kyxAIRvO7RDxkCVwhFaMaEU4gj3au-S3OCSzzy0tRwW2oBr5kGp97h-Jydj4thmJqdVohobQp0yWuVx3UmfTjsCt16TYapT_qSVgaXhlm8vlXc7zcrJk6RVIb8t4V6swisTw_32dy-2Obn2AffDANdigDLXvWJ5S4yRYHlTYTzxGVCnG6Px0ail8qROG6Cm2VN7zc9gdo6VtzMvVxJ7lboMAZ8xuhS-47_wfuTZlIt7ywvfmnupASzNfNYxFLnKsbXqOw5zdE33YliaaAmaafJbQi1k2iUZ1X3XZIag0PI5V7MvzcncUnA6SK6tyS5geLfcZj4eF4zbOxbxzrtgbrKIuUlm5ljMMOsJpTwN9-bLvc5jFIMQ63JKWJwT_Rd9uFgBIu9O8eCAjtBzcWcZGwaate8WYXYjTVITMsbMD4JfEMotM3WTOgw2Vcc36bBVTDeFYl77N52DU0YqljpzLX3bzYOc-3fOmKdbiJ1vPRmbZOLAus3zeQvwnMx6B2898jjEv4JqwHkuqBMPJ_WF79nxiHGe2vSezZeKXw6P-Y7gHxVTCct4GiKhh4OIglRwH5XjFTHULz63q9yV7Aw5QvJYeawRh-djYxfcTr9Vjtjmx1Cq7V1EefGYLGUL0UZ43UDN3ArGmYMEgJxKmGvVfNbaI5VWjpAzV7wplu60kY8P21dFvmnEgl3fPaSw-T4pTs6QbpYOut-JMAd9-ywVQuGM4SiBUS9XsQwk6S50W3Bc72ukP4NXfnqMm3OwFDPv-gjHwOhuT2J1GZJNeS8uokcvFd3iViDrnO1jZdhH02PdNOWfjZ-ypgw7toZ7xJbnnnuSFyHbdlcqCEo0paeJBbvnLlpG_b28saId23l6Pg1PMm-D_IzuoR2WijBtDyi474fiKbMXUce7rYVVjfC6wt8yCf-Ku65uv35-juP4EVVVlCO_TtoPWBWfft_Fn7NFJOW9-kCFn-T_e3rdVPckR7jgez963etddYv8BnvOd-uZE9_203mx38b4OCwPyNRVKNi7mwF6MmCjUolwut-H-JgA8y4GJEHRFLus6XQY6HVGRQXsISLBqmCSgYVxB6L6Efcffl23P1jO5WBVdtj8ZrIz4lT_nxHfCs1N-CXVVTnH_TOaI3-eegPu-p6g8KcDY0f5bTEU9WVx94skf3mlX8xyGVWOMFyF70fJgGX8Eef9EoeSX_60Ztfz5aRt8eHPN8KuXvVl95PwDx6_Ef76A72sSjiHmS7jzmNLiqjdR9ruXofxLH-dwK5v0B_geUz9ZyE-_c_NLmIreOy3-tYB3MN171F4RQMtc-aFT4vjRThbTeVN_jnYLE1YO0nC_6PlVks4z2cfvN-F5WhssTQLVlgYQGN3Wy--ffs-OF4yTwOiKT8IELX0GZZd0tAHS5YKiaXPInK1RneWvdOLb_8CNHsDIw.aIuYtw.u1af9U-tUmN-X-b39vv6Eak9OJ8'}
2025-07-31 19:24:23 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:24:23 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:24:23 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000216177D5090>
2025-07-31 19:24:23 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:23 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:23 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:24:23 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:23 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:24:23 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:24:23 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 19:24:23 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:23 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:24:23 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:24:23 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:24:23 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:24:23 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:24:23 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:24:23 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:23 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:24:23 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:24:23 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:24:23 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:24:23 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVUnTqkoS_SsvXF-_r5gUbkRHtMogCiiKTBsCipJ5kFF5cf97F96xIzqie9EbFllZJ0-eSvL8vfBq1BR-icpu8bVrevRl0beoWXz9e-FDiNrW66oMlYuvi5dPch8bsLlS-5X2qqlSXDeAKbzEhw_P3qddAx90uW0ydyXRfRGvYOSsraZY5upRG-qXogixqqweqZ3I15U0SnJb2-pKFtQ6zZtz4joBayytlDv2z9D2h0H0rKAXnPFEk6E1Lm8kYtzAqK_ZiVyywnB1Za9VeXCIiNNobIfOQg0EXbAfAjK2wJM4d7x6gEQnyw87O8eTwALAmkAnmWu9v_i7yDludPa6uWyuor6XbFJNCIkxuGfkODBf3lfncpNY8TMCJFgvvizQs04a1Ho-VopYMxTHkhRB_o4nWCWK4dgviyT8pRp6HeJAgskpOVxvk0xoidzKRVe7O3klF5dMM9RRNeRRk9xUtXTSMbaZlsapNkWTY6iEQ6qMMwmjk8qEa4iFJgmJsjsAZG9mzKNJ6Mld_8Blakipc6gK95cRTtWgkGLqkBwRlJdJKUIsS9i6VyYNSDBDxKicIeSnyt-mkxGNaipMGq_Sir0BfumSGh82Khl2DmWm7kyxAIRvO7RDxkCVwhFaMaEU4gj3au-S3OCSzzy0tRwW2oBr5kGp97h-Jydj4thmJqdVohobQp0yWuVx3UmfTjsCt16TYapT_qSVgaXhlm8vlXc7zcrJk6RVIb8t4V6swisTw_32dy-2Obn2AffDANdigDLXvWJ5S4yRYHlTYTzxGVCnG6Px0ail8qROG6Cm2VN7zc9gdo6VtzMvVxJ7lboMAZ8xuhS-47_wfuTZlIt7ywvfmnupASzNfNYxFLnKsbXqOw5zdE33YliaaAmaafJbQi1k2iUZ1X3XZIag0PI5V7MvzcncUnA6SK6tyS5geLfcZj4eF4zbOxbxzrtgbrKIuUlm5ljMMOsJpTwN9-bLvc5jFIMQ63JKWJwT_Rd9uFgBIu9O8eCAjtBzcWcZGwaate8WYXYjTVITMsbMD4JfEMotM3WTOgw2Vcc36bBVTDeFYl77N52DU0YqljpzLX3bzYOc-3fOmKdbiJ1vPRmbZOLAus3zeQvwnMx6B2898jjEv4JqwHkuqBMPJ_WF79nxiHGe2vSezZeKXw6P-Y7gHxVTCct4GiKhh4OIglRwH5XjFTHULz63q9yV7Aw5QvJYeawRh-djYxfcTr9Vjtjmx1Cq7V1EefGYLGUL0UZ43UDN3ArGmYMEgJxKmGvVfNbaI5VWjpAzV7wplu60kY8P21dFvmnEgl3fPaSw-T4pTs6QbpYOut-JMAd9-ywVQuGM4SiBUS9XsQwk6S50W3Bc72ukP4NXfnqMm3OwFDPv-gjHwOhuT2J1GZJNeS8uokcvFd3iViDrnO1jZdhH02PdNOWfjZ-ypgw7toZ7xJbnnnuSFyHbdlcqCEo0paeJBbvnLlpG_b28saId23l6Pg1PMm-D_IzuoR2WijBtDyi474fiKbMXUce7rYVVjfC6wt8yCf-Ku65uv35-juP4EVVVlCO_TtoPWBWfft_Fn7NFJOW9-kCFn-T_e3rdVPckR7jgez963etddYv8BnvOd-uZE9_203mx38b4OCwPyNRVKNi7mwF6MmCjUolwut-H-JgA8y4GJEHRFLus6XQY6HVGRQXsISLBqmCSgYVxB6L6Efcffl23P1jO5WBVdtj8ZrIz4lT_nxHfCs1N-CXVVTnH_TOaI3-eegPu-p6g8KcDY0f5bTEU9WVx94skf3mlX8xyGVWOMFyF70fJgGX8Eef9EoeSX_60Ztfz5aRt8eHPN8KuXvVl95PwDx6_Ef76A72sSjiHmS7jzmNLiqjdR9ruXofxLH-dwK5v0B_geUz9ZyE-_c_NLmIreOy3-tYB3MN171F4RQMtc-aFT4vjRThbTeVN_jnYLE1YO0nC_6PlVks4z2cfvN-F5WhssTQLVlgYQGN3Wy--ffs-OF4yTwOiKT8IELX0GZZd0tAHS5YKiaXPInK1RneWvdOLb_8CNHsDIw.aIuYtw.u1af9U-tUmN-X-b39vv6Eak9OJ8'}
2025-07-31 19:24:23 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:24:23 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:24:23 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000216177EA8B0>
2025-07-31 19:24:23 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:23 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:23 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:24:23 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:23 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:24:23 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:24:23 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 19:24:24 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:24 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:24:24 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:24:24 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:24:24 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:24:24 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:24:24 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:24:24 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:24 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:24:24 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:24 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:24 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 19:24:24 - managers.commands_server - INFO - Checking commands server health
2025-07-31 19:24:24 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 19:24:24 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 19:24:24 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.3855438232421875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T16:24:43.523775'}, 'success': True}
2025-07-31 19:24:24 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 19:24:24 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 19:24:24 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-07-31 19:24:24 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009160041809082031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:24:43.678916"
  },
  "success": false
}

2025-07-31 19:24:24 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009160041809082031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:24:43.678916"
  },
  "success": false
}

2025-07-31 19:24:24 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009160041809082031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:24:43.678916"
  },
  "success": false
}

2025-07-31 19:24:24 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 19:24:24 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:25 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:24:25 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:24:25 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:24:25 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVUnTqkoS_SsvXF-_r5gUbkRHtMogCiiKTBsCipJ5kFF5cf97F96xIzqie9EbFllZJ0-eSvL8vfBq1BR-icpu8bVrevRl0beoWXz9e-FDiNrW66oMlYuvi5dPch8bsLlS-5X2qqlSXDeAKbzEhw_P3qddAx90uW0ydyXRfRGvYOSsraZY5upRG-qXogixqqweqZ3I15U0SnJb2-pKFtQ6zZtz4joBayytlDv2z9D2h0H0rKAXnPFEk6E1Lm8kYtzAqK_ZiVyywnB1Za9VeXCIiNNobIfOQg0EXbAfAjK2wJM4d7x6gEQnyw87O8eTwALAmkAnmWu9v_i7yDludPa6uWyuor6XbFJNCIkxuGfkODBf3lfncpNY8TMCJFgvvizQs04a1Ho-VopYMxTHkhRB_o4nWCWK4dgviyT8pRp6HeJAgskpOVxvk0xoidzKRVe7O3klF5dMM9RRNeRRk9xUtXTSMbaZlsapNkWTY6iEQ6qMMwmjk8qEa4iFJgmJsjsAZG9mzKNJ6Mld_8Blakipc6gK95cRTtWgkGLqkBwRlJdJKUIsS9i6VyYNSDBDxKicIeSnyt-mkxGNaipMGq_Sir0BfumSGh82Khl2DmWm7kyxAIRvO7RDxkCVwhFaMaEU4gj3au-S3OCSzzy0tRwW2oBr5kGp97h-Jydj4thmJqdVohobQp0yWuVx3UmfTjsCt16TYapT_qSVgaXhlm8vlXc7zcrJk6RVIb8t4V6swisTw_32dy-2Obn2AffDANdigDLXvWJ5S4yRYHlTYTzxGVCnG6Px0ail8qROG6Cm2VN7zc9gdo6VtzMvVxJ7lboMAZ8xuhS-47_wfuTZlIt7ywvfmnupASzNfNYxFLnKsbXqOw5zdE33YliaaAmaafJbQi1k2iUZ1X3XZIag0PI5V7MvzcncUnA6SK6tyS5geLfcZj4eF4zbOxbxzrtgbrKIuUlm5ljMMOsJpTwN9-bLvc5jFIMQ63JKWJwT_Rd9uFgBIu9O8eCAjtBzcWcZGwaate8WYXYjTVITMsbMD4JfEMotM3WTOgw2Vcc36bBVTDeFYl77N52DU0YqljpzLX3bzYOc-3fOmKdbiJ1vPRmbZOLAus3zeQvwnMx6B2898jjEv4JqwHkuqBMPJ_WF79nxiHGe2vSezZeKXw6P-Y7gHxVTCct4GiKhh4OIglRwH5XjFTHULz63q9yV7Aw5QvJYeawRh-djYxfcTr9Vjtjmx1Cq7V1EefGYLGUL0UZ43UDN3ArGmYMEgJxKmGvVfNbaI5VWjpAzV7wplu60kY8P21dFvmnEgl3fPaSw-T4pTs6QbpYOut-JMAd9-ywVQuGM4SiBUS9XsQwk6S50W3Bc72ukP4NXfnqMm3OwFDPv-gjHwOhuT2J1GZJNeS8uokcvFd3iViDrnO1jZdhH02PdNOWfjZ-ypgw7toZ7xJbnnnuSFyHbdlcqCEo0paeJBbvnLlpG_b28saId23l6Pg1PMm-D_IzuoR2WijBtDyi474fiKbMXUce7rYVVjfC6wt8yCf-Ku65uv35-juP4EVVVlCO_TtoPWBWfft_Fn7NFJOW9-kCFn-T_e3rdVPckR7jgez963etddYv8BnvOd-uZE9_203mx38b4OCwPyNRVKNi7mwF6MmCjUolwut-H-JgA8y4GJEHRFLus6XQY6HVGRQXsISLBqmCSgYVxB6L6Efcffl23P1jO5WBVdtj8ZrIz4lT_nxHfCs1N-CXVVTnH_TOaI3-eegPu-p6g8KcDY0f5bTEU9WVx94skf3mlX8xyGVWOMFyF70fJgGX8Eef9EoeSX_60Ztfz5aRt8eHPN8KuXvVl95PwDx6_Ef76A72sSjiHmS7jzmNLiqjdR9ruXofxLH-dwK5v0B_geUz9ZyE-_c_NLmIreOy3-tYB3MN171F4RQMtc-aFT4vjRThbTeVN_jnYLE1YO0nC_6PlVks4z2cfvN-F5WhssTQLVlgYQGN3Wy--ffs-OF4yTwOiKT8IELX0GZZd0tAHS5YKiaXPInK1RneWvdOLb_8CNHsDIw.aIuYuQ.VSeOo5KWKRwdf1BoZaIIi1n9ckM'}
2025-07-31 19:24:25 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:24:25 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:24:25 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x000002161743FD50>
2025-07-31 19:24:25 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:25 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:25 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:24:25 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:25 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:24:25 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:24:25 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 19:24:25 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:25 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:24:25 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:24:25 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:24:25 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:24:25 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:24:25 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:24:25 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:25 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:24:25 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:24:25 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:24:25 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:24:25 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVUnTqkoS_SsvXF-_r5gUbkRHtMogCiiKTBsCipJ5kFF5cf97F96xIzqie9EbFllZJ0-eSvL8vfBq1BR-icpu8bVrevRl0beoWXz9e-FDiNrW66oMlYuvi5dPch8bsLlS-5X2qqlSXDeAKbzEhw_P3qddAx90uW0ydyXRfRGvYOSsraZY5upRG-qXogixqqweqZ3I15U0SnJb2-pKFtQ6zZtz4joBayytlDv2z9D2h0H0rKAXnPFEk6E1Lm8kYtzAqK_ZiVyywnB1Za9VeXCIiNNobIfOQg0EXbAfAjK2wJM4d7x6gEQnyw87O8eTwALAmkAnmWu9v_i7yDludPa6uWyuor6XbFJNCIkxuGfkODBf3lfncpNY8TMCJFgvvizQs04a1Ho-VopYMxTHkhRB_o4nWCWK4dgviyT8pRp6HeJAgskpOVxvk0xoidzKRVe7O3klF5dMM9RRNeRRk9xUtXTSMbaZlsapNkWTY6iEQ6qMMwmjk8qEa4iFJgmJsjsAZG9mzKNJ6Mld_8Blakipc6gK95cRTtWgkGLqkBwRlJdJKUIsS9i6VyYNSDBDxKicIeSnyt-mkxGNaipMGq_Sir0BfumSGh82Khl2DmWm7kyxAIRvO7RDxkCVwhFaMaEU4gj3au-S3OCSzzy0tRwW2oBr5kGp97h-Jydj4thmJqdVohobQp0yWuVx3UmfTjsCt16TYapT_qSVgaXhlm8vlXc7zcrJk6RVIb8t4V6swisTw_32dy-2Obn2AffDANdigDLXvWJ5S4yRYHlTYTzxGVCnG6Px0ail8qROG6Cm2VN7zc9gdo6VtzMvVxJ7lboMAZ8xuhS-47_wfuTZlIt7ywvfmnupASzNfNYxFLnKsbXqOw5zdE33YliaaAmaafJbQi1k2iUZ1X3XZIag0PI5V7MvzcncUnA6SK6tyS5geLfcZj4eF4zbOxbxzrtgbrKIuUlm5ljMMOsJpTwN9-bLvc5jFIMQ63JKWJwT_Rd9uFgBIu9O8eCAjtBzcWcZGwaate8WYXYjTVITMsbMD4JfEMotM3WTOgw2Vcc36bBVTDeFYl77N52DU0YqljpzLX3bzYOc-3fOmKdbiJ1vPRmbZOLAus3zeQvwnMx6B2898jjEv4JqwHkuqBMPJ_WF79nxiHGe2vSezZeKXw6P-Y7gHxVTCct4GiKhh4OIglRwH5XjFTHULz63q9yV7Aw5QvJYeawRh-djYxfcTr9Vjtjmx1Cq7V1EefGYLGUL0UZ43UDN3ArGmYMEgJxKmGvVfNbaI5VWjpAzV7wplu60kY8P21dFvmnEgl3fPaSw-T4pTs6QbpYOut-JMAd9-ywVQuGM4SiBUS9XsQwk6S50W3Bc72ukP4NXfnqMm3OwFDPv-gjHwOhuT2J1GZJNeS8uokcvFd3iViDrnO1jZdhH02PdNOWfjZ-ypgw7toZ7xJbnnnuSFyHbdlcqCEo0paeJBbvnLlpG_b28saId23l6Pg1PMm-D_IzuoR2WijBtDyi474fiKbMXUce7rYVVjfC6wt8yCf-Ku65uv35-juP4EVVVlCO_TtoPWBWfft_Fn7NFJOW9-kCFn-T_e3rdVPckR7jgez963etddYv8BnvOd-uZE9_203mx38b4OCwPyNRVKNi7mwF6MmCjUolwut-H-JgA8y4GJEHRFLus6XQY6HVGRQXsISLBqmCSgYVxB6L6Efcffl23P1jO5WBVdtj8ZrIz4lT_nxHfCs1N-CXVVTnH_TOaI3-eegPu-p6g8KcDY0f5bTEU9WVx94skf3mlX8xyGVWOMFyF70fJgGX8Eef9EoeSX_60Ztfz5aRt8eHPN8KuXvVl95PwDx6_Ef76A72sSjiHmS7jzmNLiqjdR9ruXofxLH-dwK5v0B_geUz9ZyE-_c_NLmIreOy3-tYB3MN171F4RQMtc-aFT4vjRThbTeVN_jnYLE1YO0nC_6PlVks4z2cfvN-F5WhssTQLVlgYQGN3Wy--ffs-OF4yTwOiKT8IELX0GZZd0tAHS5YKiaXPInK1RneWvdOLb_8CNHsDIw.aIuYuQ.VSeOo5KWKRwdf1BoZaIIi1n9ckM'}
2025-07-31 19:24:25 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:24:25 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:24:25 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000216179085F0>
2025-07-31 19:24:25 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:25 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:25 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:24:25 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:25 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:24:25 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:24:25 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 19:24:26 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:26 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:24:26 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:24:26 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:24:26 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:24:26 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:24:26 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:24:26 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:26 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:24:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 19:24:26 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 19:24:26 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007355213165283203,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:24:45.225603"
  },
  "success": false
}

2025-07-31 19:24:26 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007355213165283203,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:24:45.225603"
  },
  "success": false
}

2025-07-31 19:24:26 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007355213165283203,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:24:45.225603"
  },
  "success": false
}

2025-07-31 19:24:26 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 19:24:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:24:26 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:24:26 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 19:24:30 - managers.commands_server - DEBUG - Request completed in 3.48s with status 200
2025-07-31 19:24:30 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.3255977630615234, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T16:24:49.170649'}, 'success': True}
2025-07-31 19:24:30 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 19:24:30 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 19:24:30 - services.db_operations.network_db - INFO - Saving network scan result for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 19:24:30 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 19:24:30 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 19:24:31 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 19:24:31 - services.db_operations.network_db - INFO - Network scan save completed for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 19:24:31 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:24:41 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:24:41 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:24:41 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:24:41 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVvPqlgS_SsTn4_fB5uLcpJJBuWqAqKAwIvZbJD75ZOb0Dn_vTd2n9OdzCQzD5MQiVWLVVWrKlW_re5N9CxhFVXd6nv37KNvq76Nnqvvv60gQlHb3rs6j6rV99UEAfcBCf5KKaw-ifezv84tgSfzK61PjzH2CdZxbGGvNKOpFBxR2KFbMSdVrx03EqkroAhATEGv9WL5ytpGNcGY1ume27DQdb4CxSHIqduqSK-c87Hg95bDGxYcLxvomLoEPN6DCjg1XUwlfPXKAGAO3plTuJ2sOZWRha_6PBvuCTKoS00a7mPvyF_iK38xr5KpyC7QUg2pyf2kjXR6vI6J9CVSakzGBLlhVt9W0atJn1F7h1gJbKG4LWA37F_2FKtAMdz22yoNf6kSTYckkFFqpIerPauknqqtWnaNv1dZtbzkuqWNmqWOuuxn2s0EnrXL9SzJ9DmePUsjPaAx3iyOXqaSviWVuiymp_2BiFx-4Tw6pJk-zA8cpkGUtpjqULmMaK6HE5AyD3BkUF3mUxkOAQhb_8pkASAWiiSqFgr1pQn2bFjxqGXirAsafXJ5AlY-0IXwqYGw8ygn85cUS4KErkd7ICE0ORzRLSFPpTQiRet9wA0-eBWhqxeo1Accswgqs8fxOzUdU891cjWrU83iSW3OaU3AcWdzNvYkLr0BYWZScNar4Kbjku1JE_xOvxXAkPU6FHYVUqQ6vDIJUnZ_1eI6s-8ecD0M4d8Y4rTEvWJ5K8yRYnkzEUvrzYZgM5plkoaAa8g8GttobcGVTufdinbJKygdAslFG1CXLJA50hd3OBepCfa_9Cre_yUO4JiNXxbF0sJQOZD-danv8oCyNMOlrdXhZZaXRMtNcL0SIKxUEJUXUr81SUC829fjnDP_irFF8xWUpKLl-g25jenPHqMJF9siDsdFt6CUujcuZ4pQ2jU4N2Kx41yzUHGmt69MiBDrYqTbIZDj_6IPl5wISfDnZPCIejadhDKpnWO4vm6Ldme6Im05Dg2tUHVnPEcEdzNuMRGSnIiKojBsaQwLR77Z9mhaJJ4br_OmRcuwCUundwGTBDd7mUPDdy8mvL2GcL_4iwS_Wc1CS_8pw-IZfRpT301GrP9Ln98zOOlZTuFxdrRcmCDpmMy8zeXDCJuodcXYJCjIdvfHVEb1PqnCChyQ8xSieBgGlD9gfYyT0iSFRK5OtuHYz2IzHKLItXcbZaA55TXvVXc8i64qR2cxur1uzJTn_c4zvvqJVYemaDHgxOUoOQfnjngZtUxBjWsp7jjoh2JDOrwqz68jf5vo0-NOT3rcSHHQ7a4aaIbpZdWzBIX79bJ7mcp0jNxnPCLqMIKjhjj2mDSXUOJs7SAZMveVb8j-dUorYHoxteX33XOt3dUzEe0YtwXq-hg8NqoHhawuFBH1gzYSuRlu1keONSau5OHJk9hsK3pW1tzMvkabGfkPIoeuthb95uoU6f7l6NKGh4HsN-GId1iL6ibCawn_Vmn4j6Trmvb75-c4jh9xXcdFBJu0_UB1-Qn7LvlcVn1aPeqPqIRp8b_Dm2f9SIsIB3zvwXs3vaPuIvjEt-OPE7IA32ekuyewTbD7-bULIRBYdc0OT3YOeyaDNY_hsA-xmySWnUsAkqKp7bqhs2GgNzkVl6hHESDYkkmHLUo6Im6-kv4DNk37Z5ZLOFRXHT5iS7IL49z8nxnfCmHOKuqatKg7VNR9-K94sf4dcR9w5Y80Cn9eU3w9_jon3ObbKk4HrFgFy0UxPerOCxv-PP11dzYcsQDTtsWInz3B17juq-5ngn_G_Heaqq7QYvKzqpTB3vmazzHLEbRl7A7Y3aSo65_R34iLhPrPRX_CT34fb2t0oHh33Dc2N2hncc1_bTX7lW6UO920hsMl9HgXnl7E8c1gS55I8P9sOXaNlmnsg3cXSJbaMhxJM1ssOrsl8bP68eOPMbmnS-8jRKEtSbFrdsOhNc0Q9BpuObDeIjYKaebBUo_H6sfvD9zkUg.aIuYyA.saThIuYn7GryC0KJDWqPu0MQkXc'}
2025-07-31 19:24:41 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:24:41 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:24:41 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021617909130>
2025-07-31 19:24:41 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:41 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:41 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:24:41 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:41 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:24:41 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:24:41 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 19:24:41 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:41 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:24:41 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:24:41 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:24:41 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:24:41 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:24:41 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:24:41 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:41 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:24:41 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:41 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:41 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 19:24:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:42 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:42 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 19:24:42 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 19:24:42 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010898113250732422,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:01.195111"
  },
  "success": false
}

2025-07-31 19:24:42 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010898113250732422,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:01.195111"
  },
  "success": false
}

2025-07-31 19:24:42 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010898113250732422,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:01.195111"
  },
  "success": false
}

2025-07-31 19:24:42 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 19:24:42 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:42 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:24:42 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 19:24:43 - managers.commands_server - DEBUG - Request completed in 0.44s with status 500
2025-07-31 19:24:43 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Failed to get ARP table: Channel closed."
  },
  "metadata": {
    "executionTime": 0.18656182289123535,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:02.138707"
  },
  "success": false
}

2025-07-31 19:24:43 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Failed to get ARP table: Channel closed."
  },
  "metadata": {
    "executionTime": 0.18656182289123535,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:02.138707"
  },
  "success": false
}

2025-07-31 19:24:43 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Failed to get ARP table: Channel closed."
  },
  "metadata": {
    "executionTime": 0.18656182289123535,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:02.138707"
  },
  "success": false
}

2025-07-31 19:24:43 - managers.commands_server - DEBUG - Request completed in 2.07s with status 200
2025-07-31 19:24:43 - managers.commands_server - DEBUG - Received response: {'data': {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, 'error': None, 'metadata': {'executionTime': 1.9167492389678955, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T16:25:02.321615'}, 'success': True}
2025-07-31 19:24:43 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/session/start'
2025-07-31 19:24:43 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, error: None
2025-07-31 19:24:43 - services.commands_server_operations.session_execute - INFO - Session started successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:43 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:44 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:24:44 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:24:44 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:24:44 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVvPqlgS_SsTn4_fB5uLcpJJBuWqAqKAwIvZbJD75ZOb0Dn_vTd2n9OdzCQzD5MQiVWLVVWrKlW_re5N9CxhFVXd6nv37KNvq76Nnqvvv60gQlHb3rs6j6rV99UEAfcBCf5KKaw-ifezv84tgSfzK61PjzH2CdZxbGGvNKOpFBxR2KFbMSdVrx03EqkroAhATEGv9WL5ytpGNcGY1ume27DQdb4CxSHIqduqSK-c87Hg95bDGxYcLxvomLoEPN6DCjg1XUwlfPXKAGAO3plTuJ2sOZWRha_6PBvuCTKoS00a7mPvyF_iK38xr5KpyC7QUg2pyf2kjXR6vI6J9CVSakzGBLlhVt9W0atJn1F7h1gJbKG4LWA37F_2FKtAMdz22yoNf6kSTYckkFFqpIerPauknqqtWnaNv1dZtbzkuqWNmqWOuuxn2s0EnrXL9SzJ9DmePUsjPaAx3iyOXqaSviWVuiymp_2BiFx-4Tw6pJk-zA8cpkGUtpjqULmMaK6HE5AyD3BkUF3mUxkOAQhb_8pkASAWiiSqFgr1pQn2bFjxqGXirAsafXJ5AlY-0IXwqYGw8ygn85cUS4KErkd7ICE0ORzRLSFPpTQiRet9wA0-eBWhqxeo1Accswgqs8fxOzUdU891cjWrU83iSW3OaU3AcWdzNvYkLr0BYWZScNar4Kbjku1JE_xOvxXAkPU6FHYVUqQ6vDIJUnZ_1eI6s-8ecD0M4d8Y4rTEvWJ5K8yRYnkzEUvrzYZgM5plkoaAa8g8GttobcGVTufdinbJKygdAslFG1CXLJA50hd3OBepCfa_9Cre_yUO4JiNXxbF0sJQOZD-danv8oCyNMOlrdXhZZaXRMtNcL0SIKxUEJUXUr81SUC829fjnDP_irFF8xWUpKLl-g25jenPHqMJF9siDsdFt6CUujcuZ4pQ2jU4N2Kx41yzUHGmt69MiBDrYqTbIZDj_6IPl5wISfDnZPCIejadhDKpnWO4vm6Ldme6Im05Dg2tUHVnPEcEdzNuMRGSnIiKojBsaQwLR77Z9mhaJJ4br_OmRcuwCUundwGTBDd7mUPDdy8mvL2GcL_4iwS_Wc1CS_8pw-IZfRpT301GrP9Ln98zOOlZTuFxdrRcmCDpmMy8zeXDCJuodcXYJCjIdvfHVEb1PqnCChyQ8xSieBgGlD9gfYyT0iSFRK5OtuHYz2IzHKLItXcbZaA55TXvVXc8i64qR2cxur1uzJTn_c4zvvqJVYemaDHgxOUoOQfnjngZtUxBjWsp7jjoh2JDOrwqz68jf5vo0-NOT3rcSHHQ7a4aaIbpZdWzBIX79bJ7mcp0jNxnPCLqMIKjhjj2mDSXUOJs7SAZMveVb8j-dUorYHoxteX33XOt3dUzEe0YtwXq-hg8NqoHhawuFBH1gzYSuRlu1keONSau5OHJk9hsK3pW1tzMvkabGfkPIoeuthb95uoU6f7l6NKGh4HsN-GId1iL6ibCawn_Vmn4j6Trmvb75-c4jh9xXcdFBJu0_UB1-Qn7LvlcVn1aPeqPqIRp8b_Dm2f9SIsIB3zvwXs3vaPuIvjEt-OPE7IA32ekuyewTbD7-bULIRBYdc0OT3YOeyaDNY_hsA-xmySWnUsAkqKp7bqhs2GgNzkVl6hHESDYkkmHLUo6Im6-kv4DNk37Z5ZLOFRXHT5iS7IL49z8nxnfCmHOKuqatKg7VNR9-K94sf4dcR9w5Y80Cn9eU3w9_jon3ObbKk4HrFgFy0UxPerOCxv-PP11dzYcsQDTtsWInz3B17juq-5ngn_G_Heaqq7QYvKzqpTB3vmazzHLEbRl7A7Y3aSo65_R34iLhPrPRX_CT34fb2t0oHh33Dc2N2hncc1_bTX7lW6UO920hsMl9HgXnl7E8c1gS55I8P9sOXaNlmnsg3cXSJbaMhxJM1ssOrsl8bP68eOPMbmnS-8jRKEtSbFrdsOhNc0Q9BpuObDeIjYKaebBUo_H6sfvD9zkUg.aIuYyw.3VT5JxMlQjR4FmfhgKG2I8ErnT8'}
2025-07-31 19:24:44 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:24:44 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:24:44 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021617813B60>
2025-07-31 19:24:44 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:44 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:44 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:24:44 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:44 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:24:44 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:24:44 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 19:24:44 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:44 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:24:44 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:24:44 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:24:44 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:24:44 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:24:44 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:24:44 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:44 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:24:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:52 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:24:52 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 19:24:52 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:24:52 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:24:52 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:24:52 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVvPqlgS_SsTn4_fB5uLcpJJBuWqAqKAwIvZbJD75ZOb0Dn_vTd2n9OdzCQzD5MQiVWLVVWrKlW_re5N9CxhFVXd6nv37KNvq76Nnqvvv60gQlHb3rs6j6rV99UEAfcBCf5KKaw-ifezv84tgSfzK61PjzH2CdZxbGGvNKOpFBxR2KFbMSdVrx03EqkroAhATEGv9WL5ytpGNcGY1ume27DQdb4CxSHIqduqSK-c87Hg95bDGxYcLxvomLoEPN6DCjg1XUwlfPXKAGAO3plTuJ2sOZWRha_6PBvuCTKoS00a7mPvyF_iK38xr5KpyC7QUg2pyf2kjXR6vI6J9CVSakzGBLlhVt9W0atJn1F7h1gJbKG4LWA37F_2FKtAMdz22yoNf6kSTYckkFFqpIerPauknqqtWnaNv1dZtbzkuqWNmqWOuuxn2s0EnrXL9SzJ9DmePUsjPaAx3iyOXqaSviWVuiymp_2BiFx-4Tw6pJk-zA8cpkGUtpjqULmMaK6HE5AyD3BkUF3mUxkOAQhb_8pkASAWiiSqFgr1pQn2bFjxqGXirAsafXJ5AlY-0IXwqYGw8ygn85cUS4KErkd7ICE0ORzRLSFPpTQiRet9wA0-eBWhqxeo1Accswgqs8fxOzUdU891cjWrU83iSW3OaU3AcWdzNvYkLr0BYWZScNar4Kbjku1JE_xOvxXAkPU6FHYVUqQ6vDIJUnZ_1eI6s-8ecD0M4d8Y4rTEvWJ5K8yRYnkzEUvrzYZgM5plkoaAa8g8GttobcGVTufdinbJKygdAslFG1CXLJA50hd3OBepCfa_9Cre_yUO4JiNXxbF0sJQOZD-danv8oCyNMOlrdXhZZaXRMtNcL0SIKxUEJUXUr81SUC829fjnDP_irFF8xWUpKLl-g25jenPHqMJF9siDsdFt6CUujcuZ4pQ2jU4N2Kx41yzUHGmt69MiBDrYqTbIZDj_6IPl5wISfDnZPCIejadhDKpnWO4vm6Ldme6Im05Dg2tUHVnPEcEdzNuMRGSnIiKojBsaQwLR77Z9mhaJJ4br_OmRcuwCUundwGTBDd7mUPDdy8mvL2GcL_4iwS_Wc1CS_8pw-IZfRpT301GrP9Ln98zOOlZTuFxdrRcmCDpmMy8zeXDCJuodcXYJCjIdvfHVEb1PqnCChyQ8xSieBgGlD9gfYyT0iSFRK5OtuHYz2IzHKLItXcbZaA55TXvVXc8i64qR2cxur1uzJTn_c4zvvqJVYemaDHgxOUoOQfnjngZtUxBjWsp7jjoh2JDOrwqz68jf5vo0-NOT3rcSHHQ7a4aaIbpZdWzBIX79bJ7mcp0jNxnPCLqMIKjhjj2mDSXUOJs7SAZMveVb8j-dUorYHoxteX33XOt3dUzEe0YtwXq-hg8NqoHhawuFBH1gzYSuRlu1keONSau5OHJk9hsK3pW1tzMvkabGfkPIoeuthb95uoU6f7l6NKGh4HsN-GId1iL6ibCawn_Vmn4j6Trmvb75-c4jh9xXcdFBJu0_UB1-Qn7LvlcVn1aPeqPqIRp8b_Dm2f9SIsIB3zvwXs3vaPuIvjEt-OPE7IA32ekuyewTbD7-bULIRBYdc0OT3YOeyaDNY_hsA-xmySWnUsAkqKp7bqhs2GgNzkVl6hHESDYkkmHLUo6Im6-kv4DNk37Z5ZLOFRXHT5iS7IL49z8nxnfCmHOKuqatKg7VNR9-K94sf4dcR9w5Y80Cn9eU3w9_jon3ObbKk4HrFgFy0UxPerOCxv-PP11dzYcsQDTtsWInz3B17juq-5ngn_G_Heaqq7QYvKzqpTB3vmazzHLEbRl7A7Y3aSo65_R34iLhPrPRX_CT34fb2t0oHh33Dc2N2hncc1_bTX7lW6UO920hsMl9HgXnl7E8c1gS55I8P9sOXaNlmnsg3cXSJbaMhxJM1ssOrsl8bP68eOPMbmnS-8jRKEtSbFrdsOhNc0Q9BpuObDeIjYKaebBUo_H6sfvD9zkUg.aIuY1A.XfjAZmCn-G2wYMMhf2tYf2Q6Ouo'}
2025-07-31 19:24:52 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:24:52 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:24:52 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021617909310>
2025-07-31 19:24:52 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:52 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:52 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:24:52 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:52 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:24:52 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:24:52 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 19:24:52 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:52 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:24:52 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:24:52 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:24:52 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:24:52 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:24:52 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:24:52 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:52 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:24:52 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:24:52 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:24:52 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:24:52 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVvPqlgS_SsTn4_fB5uLcpJJBuWqAqKAwIvZbJD75ZOb0Dn_vTd2n9OdzCQzD5MQiVWLVVWrKlW_re5N9CxhFVXd6nv37KNvq76Nnqvvv60gQlHb3rs6j6rV99UEAfcBCf5KKaw-ifezv84tgSfzK61PjzH2CdZxbGGvNKOpFBxR2KFbMSdVrx03EqkroAhATEGv9WL5ytpGNcGY1ume27DQdb4CxSHIqduqSK-c87Hg95bDGxYcLxvomLoEPN6DCjg1XUwlfPXKAGAO3plTuJ2sOZWRha_6PBvuCTKoS00a7mPvyF_iK38xr5KpyC7QUg2pyf2kjXR6vI6J9CVSakzGBLlhVt9W0atJn1F7h1gJbKG4LWA37F_2FKtAMdz22yoNf6kSTYckkFFqpIerPauknqqtWnaNv1dZtbzkuqWNmqWOuuxn2s0EnrXL9SzJ9DmePUsjPaAx3iyOXqaSviWVuiymp_2BiFx-4Tw6pJk-zA8cpkGUtpjqULmMaK6HE5AyD3BkUF3mUxkOAQhb_8pkASAWiiSqFgr1pQn2bFjxqGXirAsafXJ5AlY-0IXwqYGw8ygn85cUS4KErkd7ICE0ORzRLSFPpTQiRet9wA0-eBWhqxeo1Accswgqs8fxOzUdU891cjWrU83iSW3OaU3AcWdzNvYkLr0BYWZScNar4Kbjku1JE_xOvxXAkPU6FHYVUqQ6vDIJUnZ_1eI6s-8ecD0M4d8Y4rTEvWJ5K8yRYnkzEUvrzYZgM5plkoaAa8g8GttobcGVTufdinbJKygdAslFG1CXLJA50hd3OBepCfa_9Cre_yUO4JiNXxbF0sJQOZD-danv8oCyNMOlrdXhZZaXRMtNcL0SIKxUEJUXUr81SUC829fjnDP_irFF8xWUpKLl-g25jenPHqMJF9siDsdFt6CUujcuZ4pQ2jU4N2Kx41yzUHGmt69MiBDrYqTbIZDj_6IPl5wISfDnZPCIejadhDKpnWO4vm6Ldme6Im05Dg2tUHVnPEcEdzNuMRGSnIiKojBsaQwLR77Z9mhaJJ4br_OmRcuwCUundwGTBDd7mUPDdy8mvL2GcL_4iwS_Wc1CS_8pw-IZfRpT301GrP9Ln98zOOlZTuFxdrRcmCDpmMy8zeXDCJuodcXYJCjIdvfHVEb1PqnCChyQ8xSieBgGlD9gfYyT0iSFRK5OtuHYz2IzHKLItXcbZaA55TXvVXc8i64qR2cxur1uzJTn_c4zvvqJVYemaDHgxOUoOQfnjngZtUxBjWsp7jjoh2JDOrwqz68jf5vo0-NOT3rcSHHQ7a4aaIbpZdWzBIX79bJ7mcp0jNxnPCLqMIKjhjj2mDSXUOJs7SAZMveVb8j-dUorYHoxteX33XOt3dUzEe0YtwXq-hg8NqoHhawuFBH1gzYSuRlu1keONSau5OHJk9hsK3pW1tzMvkabGfkPIoeuthb95uoU6f7l6NKGh4HsN-GId1iL6ibCawn_Vmn4j6Trmvb75-c4jh9xXcdFBJu0_UB1-Qn7LvlcVn1aPeqPqIRp8b_Dm2f9SIsIB3zvwXs3vaPuIvjEt-OPE7IA32ekuyewTbD7-bULIRBYdc0OT3YOeyaDNY_hsA-xmySWnUsAkqKp7bqhs2GgNzkVl6hHESDYkkmHLUo6Im6-kv4DNk37Z5ZLOFRXHT5iS7IL49z8nxnfCmHOKuqatKg7VNR9-K94sf4dcR9w5Y80Cn9eU3w9_jon3ObbKk4HrFgFy0UxPerOCxv-PP11dzYcsQDTtsWInz3B17juq-5ngn_G_Heaqq7QYvKzqpTB3vmazzHLEbRl7A7Y3aSo65_R34iLhPrPRX_CT34fb2t0oHh33Dc2N2hncc1_bTX7lW6UO920hsMl9HgXnl7E8c1gS55I8P9sOXaNlmnsg3cXSJbaMhxJM1ssOrsl8bP68eOPMbmnS-8jRKEtSbFrdsOhNc0Q9BpuObDeIjYKaebBUo_H6sfvD9zkUg.aIuY1A.XfjAZmCn-G2wYMMhf2tYf2Q6Ouo'}
2025-07-31 19:24:52 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:24:52 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:24:52 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000216179097C0>
2025-07-31 19:24:52 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:52 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:52 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:24:52 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:52 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:24:52 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:24:52 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 19:24:53 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:53 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:24:53 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:24:53 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:24:53 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:24:53 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:24:53 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:24:53 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:24:53 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:24:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:24:53 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:53 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 19:24:53 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-07-31 19:24:53 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001058340072631836,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:12.223549"
  },
  "success": false
}

2025-07-31 19:24:53 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001058340072631836,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:12.223549"
  },
  "success": false
}

2025-07-31 19:24:53 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001058340072631836,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T16:25:12.223549"
  },
  "success": false
}

2025-07-31 19:24:53 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 19:24:53 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:24:54 - managers.commands_server - DEBUG - Request completed in 2.54s with status 200
2025-07-31 19:24:54 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.410883665084839, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T16:25:13.664331'}, 'success': True}
2025-07-31 19:24:54 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 19:24:54 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 19:24:54 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 19:24:55 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 19:24:55 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 19:24:55 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 19:24:55 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 19:24:55 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:25:26 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:26 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:25:26 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:25:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:25:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:25:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:25:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:25:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:25:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:27 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:25:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:28 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:25:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:28 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:25:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:28 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:25:28 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:25:28 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:25:43 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:43 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:25:43 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:43 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:25:43 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:43 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:43 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:43 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:25:43 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:43 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:25:43 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:25:43 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:25:43 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:25:44 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:25:44 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:25:44 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:44 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:44 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:25:44 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:25:44 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:19 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:26:19 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:26:19 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:26:19 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn8v3JpuBkkYabAzGBu5lX16sJMHsiw0Gm1b9-yTu6qoaqaWeh3mNjDhx4mRknj9W5y651bBJmmH1bbjdk6-re5_cVt_-WEGEkr4_D22ZNKtvqyck-TcBCBZ12OiPo2QarbHVGuXzfnJJUZFTmKcyFzz0gORsoQ93Dx8Cm90G14qED0P1hFqWZhkNHpuoNcPQRdveHum9fIqwv6pR9Zk2h_H6GXc8Gz1vO2ZvCgTK9iB6qCZJGIjJRcN9kDAgcsW-r11Xi4J8HihiCm-nq51rLA-8tZlIjMUpdZhS0dq_ahNZhuzjY3tISE-SIO9JORV10gXu0uAkGHtLMAVLMg6yT2p53u12aS_1aXLhTgDqh4OCQgGQgF19XSWPLr8l_RlipQiWoXiOZNnNr3iOVaIYnvu6yuOfqiXPYxbJKP_Ij5YzK4SeK71SD124UzZKbZa6rU2arUy6HBaaZ5CBvS31Iiv0OZ0DWyMCUmOCeT8FhUKEtlTr8j5Xd0eQ-MKCeXIJI78Yb7hNhyhtCbXxwZzQ3I4qKRUByRNRY85qHY8RGfehxRQRCRaILGkWCOWhic78YaeTVuxnXdRo1RcAbEJSF-ObRsZDQLlFuFCsAQH9gA7IDGhyPCEvI9RamtBBu4ckP4bko4p9vUK1PuKeVdQYd9x_UPIpD3y3VIo212yB0OaS1kTcdzbmjx2BR-_IuDAoOOtN5Ol4ZOepieGgexX5IettLG4bdJDa2GIydNj-msV359A_4nkYEHoMUJe-Fpa3wRg5lrfYTx9iCbTZYXQxnfRCmbVZAFpRPvTncg3uEHhVv_AKZemuUeYYiSVjyPEr_hPvR55PhXi2qobeMksHUONWi46xxLeBr7cLjnk4QkfOGAMMhA6IgwVC_G5MMhS3XfzqyYxRrVdLrkVIplaWNK45uWW3CQ-ma9lm64BguZ974BGvPBNzUyTMTXbLwGPGRU8kV0V8cJ-htaxRBmKsy0fO4Zz0H_ThMxVIYjhnY4A5GpW082yBQW4HwzouHdIl9X3JuNVxD2tCdUrXcKnj6FNd5sjHreqGBZKqDjoGj-aSVD1t4dpAP6yiiv9vzphnWEsD9B6MTzJZ5DnLfjoR3pNF7-ilR5XF-CloNlr2gvqw94z-xHV-NmGchz6_dvOp4zO85qk61LzX17vsIBwurAwceyRK89LvjyJya_2cKq0gPIfDOb3Efo-I1L12n0UBT5enRG1CB4QEND1X-DRLMQW0tLNEpw8_xvRCugK9ucXrQ6dvg0y9lI45F5rmiNfjNmNM0jjd5ivwPaIeewm4LJLPgtgerfNzkyLA9uerfZ9gPwmSl2qXOVGrvbdxBXjdxpyaVVk9Gn4z1a1tTWc17Xy1Z8atNWvdZAgh0A8t4wDnWK2Rlcya3RmGD1zIZrLwdLznY-ttwBaIk9JLw3Ci0BZJZ51lXfcIybUO1OEIg_OZsDSJT4vOvpWIjq_rS40SmyEkkDfRzimvHB1eC5dV8zmxFS5WqZO9990U_209arsEf1fZMHT9t_f3aZre0rZNqwR2ef-G2vod3ofsffGGvLm0b0kN8-oLLmry-Mv_XNXd2kteJbjh6388D89X120Cb9hz_rSeJfFlP8M5g32Gj8Vb-Jk9d6c7q8kn6VbGYwzyCafDe4yPCbD8xYAkKJri1h1djCPNllRaoztKSLCpmXzkUDaAtLtm9zfYdf0Plks71DYDNr-F7II4d_9nxJdQGDOGDTW0Fc__O10iv5-eRzz1JU_ivxwYO8ovi-HZr6sLrPPqeW5gvchlt1WC4Vpcn-YjlvFHXIQNDuU__YnliaU47_vfbha7entvhr8I_-DxC-HLb-hN26AlfDIMUuHE29E9zvHgKHRmSfi4y9Fwv_2-NlVG_b0Q7_Bd2KVci073rbENAH8Nw0saW8lIK7xrikV9Mvef3q09z_AzEtYu6oI8F__V85s1WvbzHr3uheNpbLE0BzYkRQEauxu7-v79z8U558s2JDQFoyih1pDhuDWNIFhzVEysIZeQGxb7OnehV9__A_SD_3M.aIuZKw.OeJnmFXa0pVgzd1IKHscnbJmHtQ'}
2025-07-31 19:26:19 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:26:19 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:26:19 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x000002161790B6B0>
2025-07-31 19:26:19 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:19 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:19 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:26:19 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:19 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:26:19 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:26:19 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 19:26:19 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:26:19 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:26:19 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:26:19 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:26:19 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:26:19 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:26:19 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:26:19 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:26:19 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:26:19 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:19 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:26:19 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 19:26:19 - managers.commands_server - INFO - Checking commands server health
2025-07-31 19:26:19 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 19:26:20 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 19:26:20 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.86102294921875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T16:26:38.960973'}, 'success': True}
2025-07-31 19:26:20 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 19:26:20 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 19:26:20 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-07-31 19:26:20 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007526874542236328,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:26:39.122594"
  },
  "success": false
}

2025-07-31 19:26:20 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007526874542236328,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:26:39.122594"
  },
  "success": false
}

2025-07-31 19:26:20 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007526874542236328,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:26:39.122594"
  },
  "success": false
}

2025-07-31 19:26:20 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 19:26:20 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:26:21 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:21 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:26:21 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 19:26:22 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:26:22 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:26:22 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:26:22 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn8v3JpuBkkYabAzGBu5lX16sJMHsiw0Gm1b9-yTu6qoaqaWeh3mNjDhx4mRknj9W5y651bBJmmH1bbjdk6-re5_cVt_-WEGEkr4_D22ZNKtvqyck-TcBCBZ12OiPo2QarbHVGuXzfnJJUZFTmKcyFzz0gORsoQ93Dx8Cm90G14qED0P1hFqWZhkNHpuoNcPQRdveHum9fIqwv6pR9Zk2h_H6GXc8Gz1vO2ZvCgTK9iB6qCZJGIjJRcN9kDAgcsW-r11Xi4J8HihiCm-nq51rLA-8tZlIjMUpdZhS0dq_ahNZhuzjY3tISE-SIO9JORV10gXu0uAkGHtLMAVLMg6yT2p53u12aS_1aXLhTgDqh4OCQgGQgF19XSWPLr8l_RlipQiWoXiOZNnNr3iOVaIYnvu6yuOfqiXPYxbJKP_Ij5YzK4SeK71SD124UzZKbZa6rU2arUy6HBaaZ5CBvS31Iiv0OZ0DWyMCUmOCeT8FhUKEtlTr8j5Xd0eQ-MKCeXIJI78Yb7hNhyhtCbXxwZzQ3I4qKRUByRNRY85qHY8RGfehxRQRCRaILGkWCOWhic78YaeTVuxnXdRo1RcAbEJSF-ObRsZDQLlFuFCsAQH9gA7IDGhyPCEvI9RamtBBu4ckP4bko4p9vUK1PuKeVdQYd9x_UPIpD3y3VIo212yB0OaS1kTcdzbmjx2BR-_IuDAoOOtN5Ol4ZOepieGgexX5IettLG4bdJDa2GIydNj-msV359A_4nkYEHoMUJe-Fpa3wRg5lrfYTx9iCbTZYXQxnfRCmbVZAFpRPvTncg3uEHhVv_AKZemuUeYYiSVjyPEr_hPvR55PhXi2qobeMksHUONWi46xxLeBr7cLjnk4QkfOGAMMhA6IgwVC_G5MMhS3XfzqyYxRrVdLrkVIplaWNK45uWW3CQ-ma9lm64BguZ974BGvPBNzUyTMTXbLwGPGRU8kV0V8cJ-htaxRBmKsy0fO4Zz0H_ThMxVIYjhnY4A5GpW082yBQW4HwzouHdIl9X3JuNVxD2tCdUrXcKnj6FNd5sjHreqGBZKqDjoGj-aSVD1t4dpAP6yiiv9vzphnWEsD9B6MTzJZ5DnLfjoR3pNF7-ilR5XF-CloNlr2gvqw94z-xHV-NmGchz6_dvOp4zO85qk61LzX17vsIBwurAwceyRK89LvjyJya_2cKq0gPIfDOb3Efo-I1L12n0UBT5enRG1CB4QEND1X-DRLMQW0tLNEpw8_xvRCugK9ucXrQ6dvg0y9lI45F5rmiNfjNmNM0jjd5ivwPaIeewm4LJLPgtgerfNzkyLA9uerfZ9gPwmSl2qXOVGrvbdxBXjdxpyaVVk9Gn4z1a1tTWc17Xy1Z8atNWvdZAgh0A8t4wDnWK2Rlcya3RmGD1zIZrLwdLznY-ttwBaIk9JLw3Ci0BZJZ51lXfcIybUO1OEIg_OZsDSJT4vOvpWIjq_rS40SmyEkkDfRzimvHB1eC5dV8zmxFS5WqZO9990U_209arsEf1fZMHT9t_f3aZre0rZNqwR2ef-G2vod3ofsffGGvLm0b0kN8-oLLmry-Mv_XNXd2kteJbjh6388D89X120Cb9hz_rSeJfFlP8M5g32Gj8Vb-Jk9d6c7q8kn6VbGYwzyCafDe4yPCbD8xYAkKJri1h1djCPNllRaoztKSLCpmXzkUDaAtLtm9zfYdf0Plks71DYDNr-F7II4d_9nxJdQGDOGDTW0Fc__O10iv5-eRzz1JU_ivxwYO8ovi-HZr6sLrPPqeW5gvchlt1WC4Vpcn-YjlvFHXIQNDuU__YnliaU47_vfbha7entvhr8I_-DxC-HLb-hN26AlfDIMUuHE29E9zvHgKHRmSfi4y9Fwv_2-NlVG_b0Q7_Bd2KVci073rbENAH8Nw0saW8lIK7xrikV9Mvef3q09z_AzEtYu6oI8F__V85s1WvbzHr3uheNpbLE0BzYkRQEauxu7-v79z8U558s2JDQFoyih1pDhuDWNIFhzVEysIZeQGxb7OnehV9__A_SD_3M.aIuZLA.89RRVH_VcNVKzB-3_S9AlvDY4fc'}
2025-07-31 19:26:22 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:26:22 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:26:22 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x000002161790BA70>
2025-07-31 19:26:22 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:22 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:22 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:26:22 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:22 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:26:22 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:26:22 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 19:26:22 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:26:22 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:26:22 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:26:22 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:26:22 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:26:22 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:26:22 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:26:22 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:26:22 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:26:23 - managers.commands_server - DEBUG - Request completed in 2.63s with status 200
2025-07-31 19:26:23 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.484036922454834, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T16:26:42.764170'}, 'success': True}
2025-07-31 19:26:23 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 19:26:23 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 19:26:23 - services.db_operations.network_db - INFO - Saving network scan result for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 19:26:24 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 19:26:24 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 19:26:24 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 19:26:24 - services.db_operations.network_db - INFO - Network scan save completed for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 19:26:24 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:26:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:26 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:26:26 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:26:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:26 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:26:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:26 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:26:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:26 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:26:27 - services.db_operations.blacklist_db - INFO - Created blacklist mode setting for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 19:26:27 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 19:26:27 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:26:27 - services.db_operations.blacklist_db - INFO - Created blacklist limit rate setting for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:27 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:26:27 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:26:27 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:27 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:26:27 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:26:27 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:26:27 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:50 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:50 - endpoints.whitelist - INFO -   - Authenticated user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:50 - endpoints.whitelist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:26:50 - endpoints.whitelist - INFO -   - Session ID: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:50 - endpoints.whitelist - INFO -   - Request body: {'ip': '192.168.1.171', 'name': 'Tom-s-phone', 'description': 'Tom-s-phone - 22:46:ea:81:04:7c'}
2025-07-31 19:26:50 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-07-31 19:26:51 - services.db_operations.whitelist_db - INFO - Added device 192.168.1.171 to whitelist for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:26:51 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 19:26:51 - managers.commands_server - INFO - Checking commands server health
2025-07-31 19:26:51 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 19:26:51 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-07-31 19:26:51 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 4.00543212890625e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T16:27:10.003524'}, 'success': True}
2025-07-31 19:26:51 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 19:26:51 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/add
2025-07-31 19:26:53 - managers.commands_server - DEBUG - Request completed in 1.98s with status 200
2025-07-31 19:26:53 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.171 added to whitelist.', 'error': None, 'metadata': {'executionTime': 1.8102445602416992, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T16:27:11.980699'}, 'success': True}
2025-07-31 19:26:53 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/add'
2025-07-31 19:26:53 - services.commands_server_operations.whitelist_execute - INFO - Added device 192.168.1.171 to whitelist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:26:53 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-07-31 19:26:53 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:53 - endpoints.whitelist - INFO -   - Authenticated user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:53 - endpoints.whitelist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:26:53 - endpoints.whitelist - INFO -   - Session ID: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:53 - endpoints.whitelist - INFO -   - Request body: {'ip': '192.168.1.171', 'name': 'Tom-s-phone', 'description': 'Tom-s-phone - 22:46:ea:81:04:7c'}
2025-07-31 19:26:53 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-07-31 19:26:53 - services.base - ERROR - Service operation failed: add_device_to_whitelist - Device 192.168.1.171 is already whitelisted.
2025-07-31 19:26:55 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:55 - endpoints.whitelist - INFO -   - Authenticated user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:55 - endpoints.whitelist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:26:55 - endpoints.whitelist - INFO -   - Session ID: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:55 - endpoints.whitelist - INFO -   - Request body: {'ip': '192.168.1.171', 'name': 'Tom-s-phone', 'description': 'Tom-s-phone - 22:46:ea:81:04:7c'}
2025-07-31 19:26:55 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-07-31 19:26:55 - services.base - ERROR - Service operation failed: add_device_to_whitelist - Device 192.168.1.171 is already whitelisted.
2025-07-31 19:26:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:26:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:26:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:26:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:26:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:26:58 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:26:58 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:58 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:26:58 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:58 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:58 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:58 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:26:58 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:26:58 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:26:58 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:26:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:27:01 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:27:01 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 19:27:01 - services.db_operations.whitelist_db - INFO - Set whitelist limit rate for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 50 Mbps
2025-07-31 19:27:01 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/limit-rate
2025-07-31 19:27:02 - managers.commands_server - DEBUG - Request completed in 0.55s with status 200
2025-07-31 19:27:02 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': 50}, 'error': None, 'metadata': {'executionTime': 0.4051394462585449, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T16:27:21.253886'}, 'success': True}
2025-07-31 19:27:02 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/limit-rate'
2025-07-31 19:27:02 - services.commands_server_operations.whitelist_execute - INFO - Set whitelist rate limit to 50 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:27:02 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 19:27:02 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:27:02 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 19:27:02 - services.db_operations.whitelist_db - INFO - Activated whitelist mode for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:27:02 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 19:27:14 - managers.commands_server - DEBUG - Request completed in 12.06s with status 200
2025-07-31 19:27:14 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode activated.', 'error': None, 'metadata': {'executionTime': 11.894177436828613, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T16:27:33.662640'}, 'success': True}
2025-07-31 19:27:14 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 19:27:14 - services.commands_server_operations.whitelist_execute - INFO - Activated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:27:14 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 19:27:15 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:27:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:27:57 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 19:27:58 - services.db_operations.whitelist_db - INFO - Deactivated whitelist mode for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:27:58 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 19:27:58 - managers.commands_server - INFO - Checking commands server health
2025-07-31 19:27:58 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 19:27:58 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 19:27:58 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.6226043701171875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T16:28:17.191586'}, 'success': True}
2025-07-31 19:27:58 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 19:27:58 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 19:28:02 - managers.commands_server - DEBUG - Request completed in 3.84s with status 200
2025-07-31 19:28:02 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode deactivated.', 'error': None, 'metadata': {'executionTime': 3.6851389408111572, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T16:28:21.031001'}, 'success': True}
2025-07-31 19:28:02 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 19:28:02 - services.commands_server_operations.whitelist_execute - INFO - Deactivated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:28:02 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:36 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:29:37 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:29:37 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:29:37 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 19:29:37 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 19:29:37 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 19:29:37 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 19:30:19 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:30:19 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:30:19 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:30:19 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gW_JWSn8v3JpsNJY00YIM3FoPN-oKSBLMvNptNq_59End1VY3UUs_DvB5OxokTGWT8sfCb6FHCKqq6xbfu0UdfF30bPRbf_lhAhKK29bs6j6rFt8ULktwHD_gLtV-p43YjPLxOXLGhu_JKwrw64qpwByldCptpF9aes2LHPrib13vU2aTvHZ2le_RD8yQE5MSDsBRfyL2A2hsMcCepo36XT34tPcREW5L3_d7ZrYiobkjOzAMtQwkXgc1J5nPY99OUaulppV7lMLJ4PXarngP2yIwn3yWEWCsu6xdy8lvysE4nN3MPU9sBg9HoHJattazVft0IcBO7Jx7RF97gL5K-3zmkku5kR9YNtN-jnYOmNCH2rxsRAxKsF18X0bNJH1HrQ6wUsWYojqUAwfyqp1gliuHYr4s0_Kla9DomwQ5hwseLOR0INT20h7JrvM1hdSiNXL0qo3I9jOrOyxRbJ92rkKtZkqlTPLlXhXBJhXEncXSzA-FdpVLdiam8OYLI4WfMk0Xo6U3_wGMaRClzqQ73xoimepBJKXNJjggqY5LLcAjIsPUuTBaQYIZIomqGODyVrTlp13hUMnFStwotOzyAlUeq2_ChkGHnUlbmzRRLQEDHpV0yAcouHJGdEHIpjWiv9B7JDR75LEJHLVCpDnhmEVR6j-d3h3RMXcfKD1mdKleeUKacVrZ47qRP2obAqzdkmOkUnNQqsFW8svlStl6n2gWp7dQ63AoV2kt1eGEStBd-7eJYk-cc8T4M8GwGyPPcC5a3whgpljcTR22bA2UyGXUbj2p2mBRsPSXLn-prvgarc-2inXl5O6lXKGMItjmj78J3_Sfejz6H8vBuRQnteZcGoMoqZh1DiatdR63fONfj0bK9Sa_clzUJjVqIT9syn5o5juYbixmCUi3mXisLJdWJR69orFC0EnvvAW-rXgJ8pRi3d23i3WdgbgcJc9tZuWszw6wn2hVZuLde3mW2UQJCrIuWsrgn_gd9uEQG0tabksEFHaEX0sa-8gyyGuiVYW6SFqmKOWMVRxGWhGzmlm5Rx8GhmsTcHQXZ8jIkFQ00dQ5NOSnbysy1go5XBAX335wxT6-UOmg_GYdkksA2Z3-aAfbJrHfwvoMiCfGvoFzR7AtKu-qTOp9zkhHjPNXp7c1J2Soktnn94EDeaYp99g_P1wPy1IuRzP1m342K6GlCf9aUMm5yb0yShthB_360zhOQNaEQHYE_-f4Lrb17V_irY3mmoMjdXcU4tfu4d-CkVYfoso3gEMv81Xc6-GCJovXONE95XiFcp5YkIRNmVSGvLpI0ERXwiMuLiYIrTd1O3ZAao9ivwe7cmPFNPVjLJG6XCeJpg92sorO1oaGw0mPtbrE5xz_Ain0eA7Cc1qK9PVORpsRRspSQi1rN4PLoNtFF1RTRzXaNsjTh8x5EQKYvSaAGtPVsSu5UdrelHV5eRn9nm9h9GndFGLNnKJh3Ui0G-5hLwHfrelmY7D6dDr1IbFqjFO_3h67X2WVjP5sYv20tqpsIP1dJ1zXtt8_PcRw_4rqOiwg2afuB6vIT9l3yOWdDWt3qj6iEafEFH6rS8Mv_fKp51Le0iPDA9_vod6_3VCGCD5w5f0bP3PiOn85PYJvMbyh5MG-tMJA2SFc64ZoEJwMdt8M-xJ8JML_FgCQommKXDZ0NA73OqbhEPYpIsCqZdGBR0oG4uSf9B2ya9gfLeRyqqw6H30x2Rpya_zPiWyiMGcKK6uqC4_4dz5Xfv_oD3vqWRuFfCYwT5VfEUKuvixss0-LlV7Cc5brWRYThanw-Tgcs44_6Fla4lP7MpzVHz4fTtv3tZnGq133V_UX4B49fCF9-Q6_qCs1lay0yT3DzzE6EztCFlFFf8ecmRV3_-N02RUL9vRCf8JPfxGyNTr2gCy7g7p53i8NLNNAHzjK2WXkyxLP9qP0JngN-aaHGTdPtv1putUSzP_vgfS8sXonhaBasSIoCNE639eL79z-N46ezGyKagkEQUUvIsOySRhAsWSoklpCNyNU6urHsjV58_w9MyAOb.aIuaGg.8R83c0cvDNe-mFGn_GlzsDBwt2k'}
2025-07-31 19:30:19 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:30:19 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:30:19 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x000002161790B3E0>
2025-07-31 19:30:19 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:30:19 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:30:19 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:30:19 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:30:19 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:30:19 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:30:19 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 19:30:19 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:30:19 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:30:19 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:30:19 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:30:19 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:30:19 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:30:19 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:30:19 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:30:19 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:30:19 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:30:19 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:30:19 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 19:30:19 - managers.commands_server - INFO - Checking commands server health
2025-07-31 19:30:19 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 19:30:19 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 19:30:19 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.4809112548828125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T16:30:38.244176'}, 'success': True}
2025-07-31 19:30:19 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 19:30:19 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 19:30:19 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 19:30:19 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010263919830322266,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:30:38.387149"
  },
  "success": false
}

2025-07-31 19:30:19 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010263919830322266,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:30:38.387149"
  },
  "success": false
}

2025-07-31 19:30:19 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010263919830322266,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T16:30:38.387149"
  },
  "success": false
}

2025-07-31 19:30:19 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 19:30:19 - services.base - INFO - Service operation completed: start_session
2025-07-31 19:30:20 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:30:20 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:30:20 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 19:30:22 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 19:30:22 - endpoints.settings - INFO - Request method: GET
2025-07-31 19:30:22 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 19:30:22 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gW_JWSn8v3JpsNJY00YIM3FoPN-oKSBLMvNptNq_59End1VY3UUs_DvB5OxokTGWT8sfCb6FHCKqq6xbfu0UdfF30bPRbf_lhAhKK29bs6j6rFt8ULktwHD_gLtV-p43YjPLxOXLGhu_JKwrw64qpwByldCptpF9aes2LHPrib13vU2aTvHZ2le_RD8yQE5MSDsBRfyL2A2hsMcCepo36XT34tPcREW5L3_d7ZrYiobkjOzAMtQwkXgc1J5nPY99OUaulppV7lMLJ4PXarngP2yIwn3yWEWCsu6xdy8lvysE4nN3MPU9sBg9HoHJattazVft0IcBO7Jx7RF97gL5K-3zmkku5kR9YNtN-jnYOmNCH2rxsRAxKsF18X0bNJH1HrQ6wUsWYojqUAwfyqp1gliuHYr4s0_Kla9DomwQ5hwseLOR0INT20h7JrvM1hdSiNXL0qo3I9jOrOyxRbJ92rkKtZkqlTPLlXhXBJhXEncXSzA-FdpVLdiam8OYLI4WfMk0Xo6U3_wGMaRClzqQ73xoimepBJKXNJjggqY5LLcAjIsPUuTBaQYIZIomqGODyVrTlp13hUMnFStwotOzyAlUeq2_ChkGHnUlbmzRRLQEDHpV0yAcouHJGdEHIpjWiv9B7JDR75LEJHLVCpDnhmEVR6j-d3h3RMXcfKD1mdKleeUKacVrZ47qRP2obAqzdkmOkUnNQqsFW8svlStl6n2gWp7dQ63AoV2kt1eGEStBd-7eJYk-cc8T4M8GwGyPPcC5a3whgpljcTR22bA2UyGXUbj2p2mBRsPSXLn-prvgarc-2inXl5O6lXKGMItjmj78J3_Sfejz6H8vBuRQnteZcGoMoqZh1DiatdR63fONfj0bK9Sa_clzUJjVqIT9syn5o5juYbixmCUi3mXisLJdWJR69orFC0EnvvAW-rXgJ8pRi3d23i3WdgbgcJc9tZuWszw6wn2hVZuLde3mW2UQJCrIuWsrgn_gd9uEQG0tabksEFHaEX0sa-8gyyGuiVYW6SFqmKOWMVRxGWhGzmlm5Rx8GhmsTcHQXZ8jIkFQ00dQ5NOSnbysy1go5XBAX335wxT6-UOmg_GYdkksA2Z3-aAfbJrHfwvoMiCfGvoFzR7AtKu-qTOp9zkhHjPNXp7c1J2Soktnn94EDeaYp99g_P1wPy1IuRzP1m342K6GlCf9aUMm5yb0yShthB_360zhOQNaEQHYE_-f4Lrb17V_irY3mmoMjdXcU4tfu4d-CkVYfoso3gEMv81Xc6-GCJovXONE95XiFcp5YkIRNmVSGvLpI0ERXwiMuLiYIrTd1O3ZAao9ivwe7cmPFNPVjLJG6XCeJpg92sorO1oaGw0mPtbrE5xz_Ain0eA7Cc1qK9PVORpsRRspSQi1rN4PLoNtFF1RTRzXaNsjTh8x5EQKYvSaAGtPVsSu5UdrelHV5eRn9nm9h9GndFGLNnKJh3Ui0G-5hLwHfrelmY7D6dDr1IbFqjFO_3h67X2WVjP5sYv20tqpsIP1dJ1zXtt8_PcRw_4rqOiwg2afuB6vIT9l3yOWdDWt3qj6iEafEFH6rS8Mv_fKp51Le0iPDA9_vod6_3VCGCD5w5f0bP3PiOn85PYJvMbyh5MG-tMJA2SFc64ZoEJwMdt8M-xJ8JML_FgCQommKXDZ0NA73OqbhEPYpIsCqZdGBR0oG4uSf9B2ya9gfLeRyqqw6H30x2Rpya_zPiWyiMGcKK6uqC4_4dz5Xfv_oD3vqWRuFfCYwT5VfEUKuvixss0-LlV7Cc5brWRYThanw-Tgcs44_6Fla4lP7MpzVHz4fTtv3tZnGq133V_UX4B49fCF9-Q6_qCs1lay0yT3DzzE6EztCFlFFf8ecmRV3_-N02RUL9vRCf8JPfxGyNTr2gCy7g7p53i8NLNNAHzjK2WXkyxLP9qP0JngN-aaHGTdPtv1putUSzP_vgfS8sXonhaBasSIoCNE639eL79z-N46ezGyKagkEQUUvIsOySRhAsWSoklpCNyNU6urHsjV58_w9MyAOb.aIuaGw.Sie0FwgMe_TBt48muneQMbceS4M'}
2025-07-31 19:30:22 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 19:30:22 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 19:30:22 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x000002161790B020>
2025-07-31 19:30:22 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:30:22 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:30:22 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 19:30:22 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 19:30:22 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 19:30:22 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 19:30:22 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 19:30:22 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:30:22 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 19:30:22 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 19:30:22 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 19:30:22 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 19:30:22 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 19:30:22 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 19:30:22 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 19:30:22 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 19:30:23 - managers.commands_server - DEBUG - Request completed in 2.85s with status 200
2025-07-31 19:30:23 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.582008123397827, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T16:30:41.994032'}, 'success': True}
2025-07-31 19:30:23 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 19:30:23 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 19:30:23 - services.db_operations.network_db - INFO - Saving network scan result for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 19:30:23 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 19:30:23 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 19:30:23 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 19:30:23 - services.db_operations.network_db - INFO - Network scan save completed for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 19:30:23 - services.base - INFO - Service operation completed: scan_network
2025-07-31 19:40:14 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 20:31:50 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 20:31:53 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 20:31:59 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:31:59 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:31:59 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 20:31:59 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:31:59 - endpoints.settings - INFO - Calling get_wifi_name_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:31:59 - endpoints.settings - ERROR - Exception occurred in endpoint: router_id
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\endpoints\settings.py", line 137, in get_wifi_name
    result, error = get_wifi_name(user_id, g.router_id, g.session_id)
                                           ^^^^^^^^^^^
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\venv\Lib\site-packages\flask\ctx.py", line 54, in __getattr__
    raise AttributeError(name) from None
AttributeError: router_id. Did you mean: 'user_id'?
2025-07-31 20:31:59 - endpoints.settings - ERROR - === get_wifi_name endpoint failed ===
2025-07-31 20:31:59 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:31:59 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:31:59 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 20:31:59 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:31:59 - endpoints.settings - INFO - Calling get_wifi_name_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:31:59 - endpoints.settings - ERROR - Exception occurred in endpoint: router_id
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\endpoints\settings.py", line 137, in get_wifi_name
    result, error = get_wifi_name(user_id, g.router_id, g.session_id)
                                           ^^^^^^^^^^^
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\venv\Lib\site-packages\flask\ctx.py", line 54, in __getattr__
    raise AttributeError(name) from None
AttributeError: router_id. Did you mean: 'user_id'?
2025-07-31 20:31:59 - endpoints.settings - ERROR - === get_wifi_name endpoint failed ===
2025-07-31 20:32:10 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:10 - services.base - INFO - Service operation completed: scan_network
2025-07-31 20:32:10 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 20:32:10 - managers.commands_server - INFO - Checking commands server health
2025-07-31 20:32:10 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 20:32:10 - managers.commands_server - DEBUG - Request completed in 0.20s with status 200
2025-07-31 20:32:10 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0004425048828125, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T17:32:29.508256'}, 'success': True}
2025-07-31 20:32:10 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 20:32:10 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 20:32:10 - managers.commands_server - DEBUG - Request completed in 0.26s with status 401
2025-07-31 20:32:10 - managers.commands_server - ERROR - Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 0.00032901763916015625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:29.702853"
  },
  "success": false
}

2025-07-31 20:32:10 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 0.00032901763916015625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:29.702853"
  },
  "success": false
}

2025-07-31 20:32:10 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 0.00032901763916015625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:29.702853"
  },
  "success": false
}

2025-07-31 20:32:24 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:32:24 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:32:24 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:32:24 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gW_JWSn8v3JpsNJY00YIM3FoPN-oKSBLMvNptNq_59End1VY3UUs_DvB5OxokTGWT8sfCb6FHCKqq6xbfu0UdfF30bPRbf_lhAhKK29bs6j6rFt8ULktwHD_gLtV-p43YjPLxOXLGhu_JKwrw64qpwByldCptpF9aes2LHPrib13vU2aTvHZ2le_RD8yQE5MSDsBRfyL2A2hsMcCepo36XT34tPcREW5L3_d7ZrYiobkjOzAMtQwkXgc1J5nPY99OUaulppV7lMLJ4PXarngP2yIwn3yWEWCsu6xdy8lvysE4nN3MPU9sBg9HoHJattazVft0IcBO7Jx7RF97gL5K-3zmkku5kR9YNtN-jnYOmNCH2rxsRAxKsF18X0bNJH1HrQ6wUsWYojqUAwfyqp1gliuHYr4s0_Kla9DomwQ5hwseLOR0INT20h7JrvM1hdSiNXL0qo3I9jOrOyxRbJ92rkKtZkqlTPLlXhXBJhXEncXSzA-FdpVLdiam8OYLI4WfMk0Xo6U3_wGMaRClzqQ73xoimepBJKXNJjggqY5LLcAjIsPUuTBaQYIZIomqGODyVrTlp13hUMnFStwotOzyAlUeq2_ChkGHnUlbmzRRLQEDHpV0yAcouHJGdEHIpjWiv9B7JDR75LEJHLVCpDnhmEVR6j-d3h3RMXcfKD1mdKleeUKacVrZ47qRP2obAqzdkmOkUnNQqsFW8svlStl6n2gWp7dQ63AoV2kt1eGEStBd-7eJYk-cc8T4M8GwGyPPcC5a3whgpljcTR22bA2UyGXUbj2p2mBRsPSXLn-prvgarc-2inXl5O6lXKGMItjmj78J3_Sfejz6H8vBuRQnteZcGoMoqZh1DiatdR63fONfj0bK9Sa_clzUJjVqIT9syn5o5juYbixmCUi3mXisLJdWJR69orFC0EnvvAW-rXgJ8pRi3d23i3WdgbgcJc9tZuWszw6wn2hVZuLde3mW2UQJCrIuWsrgn_gd9uEQG0tabksEFHaEX0sa-8gyyGuiVYW6SFqmKOWMVRxGWhGzmlm5Rx8GhmsTcHQXZ8jIkFQ00dQ5NOSnbysy1go5XBAX335wxT6-UOmg_GYdkksA2Z3-aAfbJrHfwvoMiCfGvoFzR7AtKu-qTOp9zkhHjPNXp7c1J2Soktnn94EDeaYp99g_P1wPy1IuRzP1m342K6GlCf9aUMm5yb0yShthB_360zhOQNaEQHYE_-f4Lrb17V_irY3mmoMjdXcU4tfu4d-CkVYfoso3gEMv81Xc6-GCJovXONE95XiFcp5YkIRNmVSGvLpI0ERXwiMuLiYIrTd1O3ZAao9ivwe7cmPFNPVjLJG6XCeJpg92sorO1oaGw0mPtbrE5xz_Ain0eA7Cc1qK9PVORpsRRspSQi1rN4PLoNtFF1RTRzXaNsjTh8x5EQKYvSaAGtPVsSu5UdrelHV5eRn9nm9h9GndFGLNnKJh3Ui0G-5hLwHfrelmY7D6dDr1IbFqjFO_3h67X2WVjP5sYv20tqpsIP1dJ1zXtt8_PcRw_4rqOiwg2afuB6vIT9l3yOWdDWt3qj6iEafEFH6rS8Mv_fKp51Le0iPDA9_vod6_3VCGCD5w5f0bP3PiOn85PYJvMbyh5MG-tMJA2SFc64ZoEJwMdt8M-xJ8JML_FgCQommKXDZ0NA73OqbhEPYpIsCqZdGBR0oG4uSf9B2ya9gfLeRyqqw6H30x2Rpya_zPiWyiMGcKK6uqC4_4dz5Xfv_oD3vqWRuFfCYwT5VfEUKuvixss0-LlV7Cc5brWRYThanw-Tgcs44_6Fla4lP7MpzVHz4fTtv3tZnGq133V_UX4B49fCF9-Q6_qCs1lay0yT3DzzE6EztCFlFFf8ecmRV3_-N02RUL9vRCf8JPfxGyNTr2gCy7g7p53i8NLNNAHzjK2WXkyxLP9qP0JngN-aaHGTdPtv1putUSzP_vgfS8sXonhaBasSIoCNE639eL79z-N46ezGyKagkEQUUvIsOySRhAsWSoklpCNyNU6urHsjV58_w9MyAOb.aIuopw.EavjDJFZhOHh2l1shOXS_56TMvI'}
2025-07-31 20:32:24 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:32:24 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:32:24 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021B51A18290>
2025-07-31 20:32:24 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:24 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:24 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:32:24 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:24 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:32:24 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:32:24 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:32:24 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:32:24 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:32:24 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:32:24 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:32:24 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:32:24 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:32:24 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:32:24 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:32:24 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:32:24 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:32:24 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:32:24 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:32:24 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gW_JWSn8v3JpsNJY00YIM3FoPN-oKSBLMvNptNq_59End1VY3UUs_DvB5OxokTGWT8sfCb6FHCKqq6xbfu0UdfF30bPRbf_lhAhKK29bs6j6rFt8ULktwHD_gLtV-p43YjPLxOXLGhu_JKwrw64qpwByldCptpF9aes2LHPrib13vU2aTvHZ2le_RD8yQE5MSDsBRfyL2A2hsMcCepo36XT34tPcREW5L3_d7ZrYiobkjOzAMtQwkXgc1J5nPY99OUaulppV7lMLJ4PXarngP2yIwn3yWEWCsu6xdy8lvysE4nN3MPU9sBg9HoHJattazVft0IcBO7Jx7RF97gL5K-3zmkku5kR9YNtN-jnYOmNCH2rxsRAxKsF18X0bNJH1HrQ6wUsWYojqUAwfyqp1gliuHYr4s0_Kla9DomwQ5hwseLOR0INT20h7JrvM1hdSiNXL0qo3I9jOrOyxRbJ92rkKtZkqlTPLlXhXBJhXEncXSzA-FdpVLdiam8OYLI4WfMk0Xo6U3_wGMaRClzqQ73xoimepBJKXNJjggqY5LLcAjIsPUuTBaQYIZIomqGODyVrTlp13hUMnFStwotOzyAlUeq2_ChkGHnUlbmzRRLQEDHpV0yAcouHJGdEHIpjWiv9B7JDR75LEJHLVCpDnhmEVR6j-d3h3RMXcfKD1mdKleeUKacVrZ47qRP2obAqzdkmOkUnNQqsFW8svlStl6n2gWp7dQ63AoV2kt1eGEStBd-7eJYk-cc8T4M8GwGyPPcC5a3whgpljcTR22bA2UyGXUbj2p2mBRsPSXLn-prvgarc-2inXl5O6lXKGMItjmj78J3_Sfejz6H8vBuRQnteZcGoMoqZh1DiatdR63fONfj0bK9Sa_clzUJjVqIT9syn5o5juYbixmCUi3mXisLJdWJR69orFC0EnvvAW-rXgJ8pRi3d23i3WdgbgcJc9tZuWszw6wn2hVZuLde3mW2UQJCrIuWsrgn_gd9uEQG0tabksEFHaEX0sa-8gyyGuiVYW6SFqmKOWMVRxGWhGzmlm5Rx8GhmsTcHQXZ8jIkFQ00dQ5NOSnbysy1go5XBAX335wxT6-UOmg_GYdkksA2Z3-aAfbJrHfwvoMiCfGvoFzR7AtKu-qTOp9zkhHjPNXp7c1J2Soktnn94EDeaYp99g_P1wPy1IuRzP1m342K6GlCf9aUMm5yb0yShthB_360zhOQNaEQHYE_-f4Lrb17V_irY3mmoMjdXcU4tfu4d-CkVYfoso3gEMv81Xc6-GCJovXONE95XiFcp5YkIRNmVSGvLpI0ERXwiMuLiYIrTd1O3ZAao9ivwe7cmPFNPVjLJG6XCeJpg92sorO1oaGw0mPtbrE5xz_Ain0eA7Cc1qK9PVORpsRRspSQi1rN4PLoNtFF1RTRzXaNsjTh8x5EQKYvSaAGtPVsSu5UdrelHV5eRn9nm9h9GndFGLNnKJh3Ui0G-5hLwHfrelmY7D6dDr1IbFqjFO_3h67X2WVjP5sYv20tqpsIP1dJ1zXtt8_PcRw_4rqOiwg2afuB6vIT9l3yOWdDWt3qj6iEafEFH6rS8Mv_fKp51Le0iPDA9_vod6_3VCGCD5w5f0bP3PiOn85PYJvMbyh5MG-tMJA2SFc64ZoEJwMdt8M-xJ8JML_FgCQommKXDZ0NA73OqbhEPYpIsCqZdGBR0oG4uSf9B2ya9gfLeRyqqw6H30x2Rpya_zPiWyiMGcKK6uqC4_4dz5Xfv_oD3vqWRuFfCYwT5VfEUKuvixss0-LlV7Cc5brWRYThanw-Tgcs44_6Fla4lP7MpzVHz4fTtv3tZnGq133V_UX4B49fCF9-Q6_qCs1lay0yT3DzzE6EztCFlFFf8ecmRV3_-N02RUL9vRCf8JPfxGyNTr2gCy7g7p53i8NLNNAHzjK2WXkyxLP9qP0JngN-aaHGTdPtv1putUSzP_vgfS8sXonhaBasSIoCNE639eL79z-N46ezGyKagkEQUUvIsOySRhAsWSoklpCNyNU6urHsjV58_w9MyAOb.aIuoqA.FCaV4K0SOX1d4NC_1ULBrU9DVk4'}
2025-07-31 20:32:24 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:32:24 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:32:24 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021B519C9260>
2025-07-31 20:32:24 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:24 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:24 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:32:24 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:24 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:32:24 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:32:24 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:32:24 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:32:24 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:32:24 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:32:24 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:32:24 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:32:24 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:32:24 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:32:24 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:32:24 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:32:25 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:25 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:32:25 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 20:32:27 - managers.commands_server - DEBUG - Request completed in 2.15s with status 200
2025-07-31 20:32:27 - managers.commands_server - DEBUG - Received response: {'data': {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}, 'error': None, 'metadata': {'executionTime': 2.016974925994873, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T17:32:46.089649'}, 'success': True}
2025-07-31 20:32:27 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/session/start'
2025-07-31 20:32:27 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}, error: None
2025-07-31 20:32:27 - services.commands_server_operations.session_execute - INFO - Session started successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:27 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:32:32 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:32:32 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:32:32 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:32:32 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn4t7WW240kiDzWJsA7Yx6wtiSUOyGzAYWvXvk9yq7lsjtdTzMK-RESdOnIzM88fKb0BbBhWo-tVH3z7B99WzA-3q449VEEWg6_y-zkG1-lhNAcm98ThvUPu1Ng3DC3qYKLSjtz9vWQL04ankt2c-hgf9YXteuJZ1TSL67Pli2xnCclcfs6od2v5stTPZic_27MOHTJYPY8DWKdEC49y2jSNltQlIq9oRxcisi2OaqdmYandtXp8gPfcPWmYefskcBz2rgWUGuXnRM7-LBqKN7oaPk8_DuuNTpxa0WigUeoJTrLsdxXBURsrsMU9ncrgHu8Q98hfF4K-8IV32skOq0NyBfNtXWedr980mZs3eTPIRJ_HN6vsKvBrYgs4PkFLEhqE4dr1h8K84RCqhJtz3FYz_Ug1MhzSUI6jDg2HOCqFBpVPKvvF2ylopr7l2U0f1poya7GWqfSHd2zbXsjTT5mR2byrhkirjzuLoZgrh3aRSk0V42h1w4PAL5tEiLvB-eUNtmohSl1Ad769jNNfDiZQyl-SIsLrOpzIeQjLuPIPJQhJfIFJQLRDKSxXMWb8lo5qJsyao9Mnh8aDySE2IW5WMe5eyMm-hWOJE4Li0S6a4KsdjZKfEqZTGaK8-PZIbPPJVxI5WRKU2oJ5FWF2eqH-vwBG6jpUrWQ3VG0-oc06rAuo7X2Z9R6DRGzLOLlQwa1Voa2hkc1IFr9fsgtRlrY6FbRXtpTo2mDTab79mcazZcw5oHgb3bAY_LX0NJG-FMCCSNxNHXchxdTYZTUhGLVNmdeZxNctf2rRcg9W7dtEtvDxZeqrUdQiFnLnI8Wf8L7xfeQ7lodmKMrCXWRo8qqxi0TGWuNp1tHrBcYsGvzo8bTtX6eKkkunUFJAZxtsfsssnFjOEpVYsuXHep9cbj3ulJevioQV28wJ5ql4Jdbmfp2sTn3lXxE2REDfZyl2bGRY9I7nI4r01ecayRikeI110yKKc5B_04dITLgnenA4u3hOXQtrZN56JrCbwyjg3SYvUxJyxioMYlMTJzK2LRR0Gh2pSUz5sT5aXRVLRBOaFi-acPNmfXKvA8Yqw4P6bM-LplVIf2C_GIZk0tM1lP80Q7cmid_h5B0Uao6eg3qKfezGLpG6gOicdEc5Lmz93k9Rml0FrDp9nnbztz678uNtYkUnS_iYwGmAmytpFO6M8l852wph1pw_g8YB1Oe5Nb6cNmRFGhsgdTV0bMEM3thUx7mxjayEkp77xmHdWQe85cybvo2FLdLWlV3fTmh5u5k_rU48LGM1DysdcQpJzmfLlaHs3hdPaeLUnN9-0yREXjo-060ZLQP-g_yDP4t4mMU0wmkmJ7HO5YcUhpftdUqUJ7-RQkQRjvZ_z43QyRzAV_U59EGaqGYOX92WivDKCYTdbfcsZ9YHTJLy0MPpeKZvKsPfFOb1JooXXfN_MU2-DYq4fNU7JZ8zUkxEXNbEiixeuSqR60uTg-Bix69E_zv61uR7UvaOMZ32dKJ7HXtDf1kV1A9B3lfZ90328v4_j-JbUdVKAoIHdW1SX78GzT98Xb4DVvX5r2voOC_ANlVUw_vY_14EygAVq-Pk_-v302XULghZ5zk_rWdI-7af306BL0XHo9WLDur3Iv8TLvHlVU9xGPEoPnjE6JvDlL8ZJgqIpFmvobBjoTU4lZfSMAImvSwYObJT2eNI80udb0DTdL45Lu6iuemR-C9UFcW7-z4g_B_5YxUFF9XXBcf9Olsjvp_6Apr5DEP_pwMhRvixmjQzlHpSwmPwqKBe5bnUBEFyN6hM4IBl_xYWgQiH45U8UsRTDrvvtZpGr18-q_5PwLx5fCN9-Q6_qKlrCwzEQcfoOJHabT9lj3p9kAx03MOqf7e9rU6TU3wvxHrzzu4Sto-Nze9m6OPfwvHsSG2CgFc66Cll5vIpnu639OTiHPGZFjQuh8K-OW2PRsp_P8PNeWI5GFkuz-JqkKJxG7rZZ_fjxc3F8uGwDoKkgDAGFBQzLYnQU4BhLxQQWsIBcb8CdZe_06sd_AFkIBCM.aIuosA.840X6bijU38MVHHYzUbOA9lpYSk'}
2025-07-31 20:32:32 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:32:32 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:32:32 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021B51B1CF50>
2025-07-31 20:32:32 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:32 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:32 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:32:32 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:32 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:32:32 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:32:32 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:32:33 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:32:33 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:32:33 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:32:33 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:32:33 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:32:33 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:32:33 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:32:33 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:32:33 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:32:33 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:33 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:32:33 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 20:32:33 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 20:32:33 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010113716125488281,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:52.752204"
  },
  "success": false
}

2025-07-31 20:32:33 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010113716125488281,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:52.752204"
  },
  "success": false
}

2025-07-31 20:32:33 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010113716125488281,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:52.752204"
  },
  "success": false
}

2025-07-31 20:32:33 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 20:32:33 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:32:33 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:33 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:32:33 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 20:32:34 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 20:32:34 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008928775787353516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:52.938975"
  },
  "success": false
}

2025-07-31 20:32:34 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008928775787353516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:52.938975"
  },
  "success": false
}

2025-07-31 20:32:34 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008928775787353516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:32:52.938975"
  },
  "success": false
}

2025-07-31 20:32:34 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 20:32:34 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:32:34 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:34 - services.base - INFO - Service operation completed: scan_network
2025-07-31 20:32:34 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 20:32:35 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:32:35 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:32:35 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:32:35 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn4t7WW240kiDzWJsA7Yx6wtiSUOyGzAYWvXvk9yq7lsjtdTzMK-RESdOnIzM88fKb0BbBhWo-tVH3z7B99WzA-3q449VEEWg6_y-zkG1-lhNAcm98ThvUPu1Ng3DC3qYKLSjtz9vWQL04ankt2c-hgf9YXteuJZ1TSL67Pli2xnCclcfs6od2v5stTPZic_27MOHTJYPY8DWKdEC49y2jSNltQlIq9oRxcisi2OaqdmYandtXp8gPfcPWmYefskcBz2rgWUGuXnRM7-LBqKN7oaPk8_DuuNTpxa0WigUeoJTrLsdxXBURsrsMU9ncrgHu8Q98hfF4K-8IV32skOq0NyBfNtXWedr980mZs3eTPIRJ_HN6vsKvBrYgs4PkFLEhqE4dr1h8K84RCqhJtz3FYz_Ug1MhzSUI6jDg2HOCqFBpVPKvvF2ylopr7l2U0f1poya7GWqfSHd2zbXsjTT5mR2byrhkirjzuLoZgrh3aRSk0V42h1w4PAL5tEiLvB-eUNtmohSl1Ad769jNNfDiZQyl-SIsLrOpzIeQjLuPIPJQhJfIFJQLRDKSxXMWb8lo5qJsyao9Mnh8aDySE2IW5WMe5eyMm-hWOJE4Li0S6a4KsdjZKfEqZTGaK8-PZIbPPJVxI5WRKU2oJ5FWF2eqH-vwBG6jpUrWQ3VG0-oc06rAuo7X2Z9R6DRGzLOLlQwa1Voa2hkc1IFr9fsgtRlrY6FbRXtpTo2mDTab79mcazZcw5oHgb3bAY_LX0NJG-FMCCSNxNHXchxdTYZTUhGLVNmdeZxNctf2rRcg9W7dtEtvDxZeqrUdQiFnLnI8Wf8L7xfeQ7lodmKMrCXWRo8qqxi0TGWuNp1tHrBcYsGvzo8bTtX6eKkkunUFJAZxtsfsssnFjOEpVYsuXHep9cbj3ulJevioQV28wJ5ql4Jdbmfp2sTn3lXxE2REDfZyl2bGRY9I7nI4r01ecayRikeI110yKKc5B_04dITLgnenA4u3hOXQtrZN56JrCbwyjg3SYvUxJyxioMYlMTJzK2LRR0Gh2pSUz5sT5aXRVLRBOaFi-acPNmfXKvA8Yqw4P6bM-LplVIf2C_GIZk0tM1lP80Q7cmid_h5B0Uao6eg3qKfezGLpG6gOicdEc5Lmz93k9Rml0FrDp9nnbztz678uNtYkUnS_iYwGmAmytpFO6M8l852wph1pw_g8YB1Oe5Nb6cNmRFGhsgdTV0bMEM3thUx7mxjayEkp77xmHdWQe85cybvo2FLdLWlV3fTmh5u5k_rU48LGM1DysdcQpJzmfLlaHs3hdPaeLUnN9-0yREXjo-060ZLQP-g_yDP4t4mMU0wmkmJ7HO5YcUhpftdUqUJ7-RQkQRjvZ_z43QyRzAV_U59EGaqGYOX92WivDKCYTdbfcsZ9YHTJLy0MPpeKZvKsPfFOb1JooXXfN_MU2-DYq4fNU7JZ8zUkxEXNbEiixeuSqR60uTg-Bix69E_zv61uR7UvaOMZ32dKJ7HXtDf1kV1A9B3lfZ90328v4_j-JbUdVKAoIHdW1SX78GzT98Xb4DVvX5r2voOC_ANlVUw_vY_14EygAVq-Pk_-v302XULghZ5zk_rWdI-7af306BL0XHo9WLDur3Iv8TLvHlVU9xGPEoPnjE6JvDlL8ZJgqIpFmvobBjoTU4lZfSMAImvSwYObJT2eNI80udb0DTdL45Lu6iuemR-C9UFcW7-z4g_B_5YxUFF9XXBcf9Olsjvp_6Apr5DEP_pwMhRvixmjQzlHpSwmPwqKBe5bnUBEFyN6hM4IBl_xYWgQiH45U8UsRTDrvvtZpGr18-q_5PwLx5fCN9-Q6_qKlrCwzEQcfoOJHabT9lj3p9kAx03MOqf7e9rU6TU3wvxHrzzu4Sto-Nze9m6OPfwvHsSG2CgFc66Cll5vIpnu639OTiHPGZFjQuh8K-OW2PRsp_P8PNeWI5GFkuz-JqkKJxG7rZZ_fjxc3F8uGwDoKkgDAGFBQzLYnQU4BhLxQQWsIBcb8CdZe_06sd_AFkIBCM.aIuosg.X59VXtE1tU3SJGugzG7W_2z8Fvw'}
2025-07-31 20:32:35 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:32:35 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:32:35 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021B51B1CB90>
2025-07-31 20:32:35 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:35 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:35 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:32:35 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:35 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:32:35 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:32:35 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:32:35 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:32:35 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:32:35 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:32:35 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:32:35 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:32:35 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:32:35 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:32:35 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:32:35 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:32:37 - managers.commands_server - DEBUG - Request completed in 2.67s with status 200
2025-07-31 20:32:37 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.51955246925354, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T17:32:55.959428'}, 'success': True}
2025-07-31 20:32:37 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 20:32:37 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 20:32:37 - services.db_operations.network_db - INFO - Saving network scan result for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 20:32:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 20:32:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 20:32:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 20:32:37 - services.db_operations.network_db - INFO - Network scan save completed for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 20:32:37 - services.base - INFO - Service operation completed: scan_network
2025-07-31 20:32:40 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:32:40 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:32:40 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 20:32:40 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:40 - endpoints.settings - INFO - Calling get_wifi_name_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:40 - endpoints.settings - ERROR - Exception occurred in endpoint: router_id
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\endpoints\settings.py", line 137, in get_wifi_name
    result, error = get_wifi_name(user_id, g.router_id, g.session_id)
                                           ^^^^^^^^^^^
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\venv\Lib\site-packages\flask\ctx.py", line 54, in __getattr__
    raise AttributeError(name) from None
AttributeError: router_id. Did you mean: 'user_id'?
2025-07-31 20:32:40 - endpoints.settings - ERROR - === get_wifi_name endpoint failed ===
2025-07-31 20:32:40 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:32:40 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:32:40 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 20:32:40 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:40 - endpoints.settings - INFO - Calling get_wifi_name_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:40 - endpoints.settings - ERROR - Exception occurred in endpoint: router_id
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\endpoints\settings.py", line 137, in get_wifi_name
    result, error = get_wifi_name(user_id, g.router_id, g.session_id)
                                           ^^^^^^^^^^^
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\venv\Lib\site-packages\flask\ctx.py", line 54, in __getattr__
    raise AttributeError(name) from None
AttributeError: router_id. Did you mean: 'user_id'?
2025-07-31 20:32:40 - endpoints.settings - ERROR - === get_wifi_name endpoint failed ===
2025-07-31 20:32:50 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:32:50 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:32:50 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 20:32:50 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:50 - endpoints.settings - INFO - Calling get_wifi_name_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:50 - endpoints.settings - ERROR - Exception occurred in endpoint: router_id
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\endpoints\settings.py", line 137, in get_wifi_name
    result, error = get_wifi_name(user_id, g.router_id, g.session_id)
                                           ^^^^^^^^^^^
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\venv\Lib\site-packages\flask\ctx.py", line 54, in __getattr__
    raise AttributeError(name) from None
AttributeError: router_id. Did you mean: 'user_id'?
2025-07-31 20:32:50 - endpoints.settings - ERROR - === get_wifi_name endpoint failed ===
2025-07-31 20:32:52 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:32:52 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:32:52 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 20:32:52 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:52 - endpoints.settings - INFO - Calling get_wifi_name_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:32:52 - endpoints.settings - ERROR - Exception occurred in endpoint: router_id
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\endpoints\settings.py", line 137, in get_wifi_name
    result, error = get_wifi_name(user_id, g.router_id, g.session_id)
                                           ^^^^^^^^^^^
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\venv\Lib\site-packages\flask\ctx.py", line 54, in __getattr__
    raise AttributeError(name) from None
AttributeError: router_id. Did you mean: 'user_id'?
2025-07-31 20:32:52 - endpoints.settings - ERROR - === get_wifi_name endpoint failed ===
2025-07-31 20:35:40 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 20:35:58 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 20:36:01 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:36:01 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:36:01 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 20:36:01 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:36:01 - endpoints.settings - ERROR - Error getting router ID: name 'db_session' is not defined
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\endpoints\settings.py", line 136, in get_wifi_name
    router_result, router_error = get_router_id_setting(db_session, user_id)
                                                        ^^^^^^^^^^
NameError: name 'db_session' is not defined. Did you mean: 'session'?
2025-07-31 20:36:33 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:36:33 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:36:33 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 20:36:33 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:36:33 - endpoints.settings - ERROR - Error getting router ID: name 'db_session' is not defined
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\endpoints\settings.py", line 136, in get_wifi_name
    router_result, router_error = get_router_id_setting(db_session, user_id)
                                                        ^^^^^^^^^^
NameError: name 'db_session' is not defined. Did you mean: 'session'?
2025-07-31 20:38:08 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 20:38:51 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:38:51 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:38:51 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=undefined
2025-07-31 20:38:51 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - endpoints.settings - INFO - Using router ID: undefined
2025-07-31 20:38:51 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=undefined, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 20:38:51 - managers.commands_server - INFO - Checking commands server health
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 20:38:51 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:38:51 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:38:51 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:38:51 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn4t7WW240kiDzWJsA7Yx6wtiSUOyGzAYWvXvk9yq7lsjtdTzMK-RESdOnIzM88fKb0BbBhWo-tVH3z7B99WzA-3q449VEEWg6_y-zkG1-lhNAcm98ThvUPu1Ng3DC3qYKLSjtz9vWQL04ankt2c-hgf9YXteuJZ1TSL67Pli2xnCclcfs6od2v5stTPZic_27MOHTJYPY8DWKdEC49y2jSNltQlIq9oRxcisi2OaqdmYandtXp8gPfcPWmYefskcBz2rgWUGuXnRM7-LBqKN7oaPk8_DuuNTpxa0WigUeoJTrLsdxXBURsrsMU9ncrgHu8Q98hfF4K-8IV32skOq0NyBfNtXWedr980mZs3eTPIRJ_HN6vsKvBrYgs4PkFLEhqE4dr1h8K84RCqhJtz3FYz_Ug1MhzSUI6jDg2HOCqFBpVPKvvF2ylopr7l2U0f1poya7GWqfSHd2zbXsjTT5mR2byrhkirjzuLoZgrh3aRSk0V42h1w4PAL5tEiLvB-eUNtmohSl1Ad769jNNfDiZQyl-SIsLrOpzIeQjLuPIPJQhJfIFJQLRDKSxXMWb8lo5qJsyao9Mnh8aDySE2IW5WMe5eyMm-hWOJE4Li0S6a4KsdjZKfEqZTGaK8-PZIbPPJVxI5WRKU2oJ5FWF2eqH-vwBG6jpUrWQ3VG0-oc06rAuo7X2Z9R6DRGzLOLlQwa1Voa2hkc1IFr9fsgtRlrY6FbRXtpTo2mDTab79mcazZcw5oHgb3bAY_LX0NJG-FMCCSNxNHXchxdTYZTUhGLVNmdeZxNctf2rRcg9W7dtEtvDxZeqrUdQiFnLnI8Wf8L7xfeQ7lodmKMrCXWRo8qqxi0TGWuNp1tHrBcYsGvzo8bTtX6eKkkunUFJAZxtsfsssnFjOEpVYsuXHep9cbj3ulJevioQV28wJ5ql4Jdbmfp2sTn3lXxE2REDfZyl2bGRY9I7nI4r01ecayRikeI110yKKc5B_04dITLgnenA4u3hOXQtrZN56JrCbwyjg3SYvUxJyxioMYlMTJzK2LRR0Gh2pSUz5sT5aXRVLRBOaFi-acPNmfXKvA8Yqw4P6bM-LplVIf2C_GIZk0tM1lP80Q7cmid_h5B0Uao6eg3qKfezGLpG6gOicdEc5Lmz93k9Rml0FrDp9nnbztz678uNtYkUnS_iYwGmAmytpFO6M8l852wph1pw_g8YB1Oe5Nb6cNmRFGhsgdTV0bMEM3thUx7mxjayEkp77xmHdWQe85cybvo2FLdLWlV3fTmh5u5k_rU48LGM1DysdcQpJzmfLlaHs3hdPaeLUnN9-0yREXjo-060ZLQP-g_yDP4t4mMU0wmkmJ7HO5YcUhpftdUqUJ7-RQkQRjvZ_z43QyRzAV_U59EGaqGYOX92WivDKCYTdbfcsZ9YHTJLy0MPpeKZvKsPfFOb1JooXXfN_MU2-DYq4fNU7JZ8zUkxEXNbEiixeuSqR60uTg-Bix69E_zv61uR7UvaOMZ32dKJ7HXtDf1kV1A9B3lfZ90328v4_j-JbUdVKAoIHdW1SX78GzT98Xb4DVvX5r2voOC_ANlVUw_vY_14EygAVq-Pk_-v302XULghZ5zk_rWdI-7af306BL0XHo9WLDur3Iv8TLvHlVU9xGPEoPnjE6JvDlL8ZJgqIpFmvobBjoTU4lZfSMAImvSwYObJT2eNI80udb0DTdL45Lu6iuemR-C9UFcW7-z4g_B_5YxUFF9XXBcf9Olsjvp_6Apr5DEP_pwMhRvixmjQzlHpSwmPwqKBe5bnUBEFyN6hM4IBl_xYWgQiH45U8UsRTDrvvtZpGr18-q_5PwLx5fCN9-Q6_qKlrCwzEQcfoOJHabT9lj3p9kAx03MOqf7e9rU6TU3wvxHrzzu4Sto-Nze9m6OPfwvHsSG2CgFc66Cll5vIpnu639OTiHPGZFjQuh8K-OW2PRsp_P8PNeWI5GFkuz-JqkKJxG7rZZ_fjxc3F8uGwDoKkgDAGFBQzLYnQU4BhLxQQWsIBcb8CdZe_06sd_AFkIBCM.aIuqKg.rO7VvtjuBFaYzPgaqIrpOz_hK_o'}
2025-07-31 20:38:51 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:38:51 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:38:51 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000174E41ED5B0>
2025-07-31 20:38:51 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:38:51 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:38:51 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:38:51 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Request completed in 0.17s with status 200
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.00036454200744628906, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T17:39:10.013126'}, 'success': True}
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:38:51 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:38:51 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:38:51 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:38:51 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:38:51 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:38:51 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:38:51 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:38:51 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:38:51 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:38:51 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:38:51 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:38:51 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:38:51 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn4t7WW240kiDzWJsA7Yx6wtiSUOyGzAYWvXvk9yq7lsjtdTzMK-RESdOnIzM88fKb0BbBhWo-tVH3z7B99WzA-3q449VEEWg6_y-zkG1-lhNAcm98ThvUPu1Ng3DC3qYKLSjtz9vWQL04ankt2c-hgf9YXteuJZ1TSL67Pli2xnCclcfs6od2v5stTPZic_27MOHTJYPY8DWKdEC49y2jSNltQlIq9oRxcisi2OaqdmYandtXp8gPfcPWmYefskcBz2rgWUGuXnRM7-LBqKN7oaPk8_DuuNTpxa0WigUeoJTrLsdxXBURsrsMU9ncrgHu8Q98hfF4K-8IV32skOq0NyBfNtXWedr980mZs3eTPIRJ_HN6vsKvBrYgs4PkFLEhqE4dr1h8K84RCqhJtz3FYz_Ug1MhzSUI6jDg2HOCqFBpVPKvvF2ylopr7l2U0f1poya7GWqfSHd2zbXsjTT5mR2byrhkirjzuLoZgrh3aRSk0V42h1w4PAL5tEiLvB-eUNtmohSl1Ad769jNNfDiZQyl-SIsLrOpzIeQjLuPIPJQhJfIFJQLRDKSxXMWb8lo5qJsyao9Mnh8aDySE2IW5WMe5eyMm-hWOJE4Li0S6a4KsdjZKfEqZTGaK8-PZIbPPJVxI5WRKU2oJ5FWF2eqH-vwBG6jpUrWQ3VG0-oc06rAuo7X2Z9R6DRGzLOLlQwa1Voa2hkc1IFr9fsgtRlrY6FbRXtpTo2mDTab79mcazZcw5oHgb3bAY_LX0NJG-FMCCSNxNHXchxdTYZTUhGLVNmdeZxNctf2rRcg9W7dtEtvDxZeqrUdQiFnLnI8Wf8L7xfeQ7lodmKMrCXWRo8qqxi0TGWuNp1tHrBcYsGvzo8bTtX6eKkkunUFJAZxtsfsssnFjOEpVYsuXHep9cbj3ulJevioQV28wJ5ql4Jdbmfp2sTn3lXxE2REDfZyl2bGRY9I7nI4r01ecayRikeI110yKKc5B_04dITLgnenA4u3hOXQtrZN56JrCbwyjg3SYvUxJyxioMYlMTJzK2LRR0Gh2pSUz5sT5aXRVLRBOaFi-acPNmfXKvA8Yqw4P6bM-LplVIf2C_GIZk0tM1lP80Q7cmid_h5B0Uao6eg3qKfezGLpG6gOicdEc5Lmz93k9Rml0FrDp9nnbztz678uNtYkUnS_iYwGmAmytpFO6M8l852wph1pw_g8YB1Oe5Nb6cNmRFGhsgdTV0bMEM3thUx7mxjayEkp77xmHdWQe85cybvo2FLdLWlV3fTmh5u5k_rU48LGM1DysdcQpJzmfLlaHs3hdPaeLUnN9-0yREXjo-060ZLQP-g_yDP4t4mMU0wmkmJ7HO5YcUhpftdUqUJ7-RQkQRjvZ_z43QyRzAV_U59EGaqGYOX92WivDKCYTdbfcsZ9YHTJLy0MPpeKZvKsPfFOb1JooXXfN_MU2-DYq4fNU7JZ8zUkxEXNbEiixeuSqR60uTg-Bix69E_zv61uR7UvaOMZ32dKJ7HXtDf1kV1A9B3lfZ90328v4_j-JbUdVKAoIHdW1SX78GzT98Xb4DVvX5r2voOC_ANlVUw_vY_14EygAVq-Pk_-v302XULghZ5zk_rWdI-7af306BL0XHo9WLDur3Iv8TLvHlVU9xGPEoPnjE6JvDlL8ZJgqIpFmvobBjoTU4lZfSMAImvSwYObJT2eNI80udb0DTdL45Lu6iuemR-C9UFcW7-z4g_B_5YxUFF9XXBcf9Olsjvp_6Apr5DEP_pwMhRvixmjQzlHpSwmPwqKBe5bnUBEFyN6hM4IBl_xYWgQiH45U8UsRTDrvvtZpGr18-q_5PwLx5fCN9-Q6_qKlrCwzEQcfoOJHabT9lj3p9kAx03MOqf7e9rU6TU3wvxHrzzu4Sto-Nze9m6OPfwvHsSG2CgFc66Cll5vIpnu639OTiHPGZFjQuh8K-OW2PRsp_P8PNeWI5GFkuz-JqkKJxG7rZZ_fjxc3F8uGwDoKkgDAGFBQzLYnQU4BhLxQQWsIBcb8CdZe_06sd_AFkIBCM.aIuqKw.MgXS8ML8bMNnW_cbm4GlNTusfUs'}
2025-07-31 20:38:51 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:38:51 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:38:51 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000174E41EEB10>
2025-07-31 20:38:51 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:38:51 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:38:51 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:38:51 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Request completed in 0.23s with status 500
2025-07-31 20:38:51 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.0645756721496582,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.245823"
  },
  "success": false
}

2025-07-31 20:38:51 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.0645756721496582,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.245823"
  },
  "success": false
}

2025-07-31 20:38:51 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.0645756721496582,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.245823"
  },
  "success": false
}

2025-07-31 20:38:51 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.0645756721496582,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.245823"
  },
  "success": false
}

2025-07-31 20:38:51 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.0645756721496582,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.245823"
  },
  "success": false
}

2025-07-31 20:38:51 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:38:51 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:38:51 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:38:51 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:38:51 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:38:51 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:38:51 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:38:51 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:38:51 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:38:51 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 20:38:51 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:38:51 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:38:51 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=undefined
2025-07-31 20:38:51 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - endpoints.settings - INFO - Using router ID: undefined
2025-07-31 20:38:51 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=undefined, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:51 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-07-31 20:38:51 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00634002685546875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.737482"
  },
  "success": false
}

2025-07-31 20:38:51 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00634002685546875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.737482"
  },
  "success": false
}

2025-07-31 20:38:51 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00634002685546875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.737482"
  },
  "success": false
}

2025-07-31 20:38:51 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 20:38:51 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:38:51 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-07-31 20:38:51 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007596731185913086,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.757001"
  },
  "success": false
}

2025-07-31 20:38:51 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007596731185913086,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.757001"
  },
  "success": false
}

2025-07-31 20:38:51 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007596731185913086,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.757001"
  },
  "success": false
}

2025-07-31 20:38:51 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007596731185913086,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.757001"
  },
  "success": false
}

2025-07-31 20:38:51 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007596731185913086,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:10.757001"
  },
  "success": false
}

2025-07-31 20:38:56 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:38:56 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:38:56 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=undefined
2025-07-31 20:38:56 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - endpoints.settings - INFO - Using router ID: undefined
2025-07-31 20:38:56 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=undefined, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:38:56 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:38:56 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:38:56 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:38:56 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:38:56 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn4t7WW240kiDzWJsA7Yx6wtiSUOyGzAYWvXvk9yq7lsjtdTzMK-RESdOnIzM88fKb0BbBhWo-tVH3z7B99WzA-3q449VEEWg6_y-zkG1-lhNAcm98ThvUPu1Ng3DC3qYKLSjtz9vWQL04ankt2c-hgf9YXteuJZ1TSL67Pli2xnCclcfs6od2v5stTPZic_27MOHTJYPY8DWKdEC49y2jSNltQlIq9oRxcisi2OaqdmYandtXp8gPfcPWmYefskcBz2rgWUGuXnRM7-LBqKN7oaPk8_DuuNTpxa0WigUeoJTrLsdxXBURsrsMU9ncrgHu8Q98hfF4K-8IV32skOq0NyBfNtXWedr980mZs3eTPIRJ_HN6vsKvBrYgs4PkFLEhqE4dr1h8K84RCqhJtz3FYz_Ug1MhzSUI6jDg2HOCqFBpVPKvvF2ylopr7l2U0f1poya7GWqfSHd2zbXsjTT5mR2byrhkirjzuLoZgrh3aRSk0V42h1w4PAL5tEiLvB-eUNtmohSl1Ad769jNNfDiZQyl-SIsLrOpzIeQjLuPIPJQhJfIFJQLRDKSxXMWb8lo5qJsyao9Mnh8aDySE2IW5WMe5eyMm-hWOJE4Li0S6a4KsdjZKfEqZTGaK8-PZIbPPJVxI5WRKU2oJ5FWF2eqH-vwBG6jpUrWQ3VG0-oc06rAuo7X2Z9R6DRGzLOLlQwa1Voa2hkc1IFr9fsgtRlrY6FbRXtpTo2mDTab79mcazZcw5oHgb3bAY_LX0NJG-FMCCSNxNHXchxdTYZTUhGLVNmdeZxNctf2rRcg9W7dtEtvDxZeqrUdQiFnLnI8Wf8L7xfeQ7lodmKMrCXWRo8qqxi0TGWuNp1tHrBcYsGvzo8bTtX6eKkkunUFJAZxtsfsssnFjOEpVYsuXHep9cbj3ulJevioQV28wJ5ql4Jdbmfp2sTn3lXxE2REDfZyl2bGRY9I7nI4r01ecayRikeI110yKKc5B_04dITLgnenA4u3hOXQtrZN56JrCbwyjg3SYvUxJyxioMYlMTJzK2LRR0Gh2pSUz5sT5aXRVLRBOaFi-acPNmfXKvA8Yqw4P6bM-LplVIf2C_GIZk0tM1lP80Q7cmid_h5B0Uao6eg3qKfezGLpG6gOicdEc5Lmz93k9Rml0FrDp9nnbztz678uNtYkUnS_iYwGmAmytpFO6M8l852wph1pw_g8YB1Oe5Nb6cNmRFGhsgdTV0bMEM3thUx7mxjayEkp77xmHdWQe85cybvo2FLdLWlV3fTmh5u5k_rU48LGM1DysdcQpJzmfLlaHs3hdPaeLUnN9-0yREXjo-060ZLQP-g_yDP4t4mMU0wmkmJ7HO5YcUhpftdUqUJ7-RQkQRjvZ_z43QyRzAV_U59EGaqGYOX92WivDKCYTdbfcsZ9YHTJLy0MPpeKZvKsPfFOb1JooXXfN_MU2-DYq4fNU7JZ8zUkxEXNbEiixeuSqR60uTg-Bix69E_zv61uR7UvaOMZ32dKJ7HXtDf1kV1A9B3lfZ90328v4_j-JbUdVKAoIHdW1SX78GzT98Xb4DVvX5r2voOC_ANlVUw_vY_14EygAVq-Pk_-v302XULghZ5zk_rWdI-7af306BL0XHo9WLDur3Iv8TLvHlVU9xGPEoPnjE6JvDlL8ZJgqIpFmvobBjoTU4lZfSMAImvSwYObJT2eNI80udb0DTdL45Lu6iuemR-C9UFcW7-z4g_B_5YxUFF9XXBcf9Olsjvp_6Apr5DEP_pwMhRvixmjQzlHpSwmPwqKBe5bnUBEFyN6hM4IBl_xYWgQiH45U8UsRTDrvvtZpGr18-q_5PwLx5fCN9-Q6_qKlrCwzEQcfoOJHabT9lj3p9kAx03MOqf7e9rU6TU3wvxHrzzu4Sto-Nze9m6OPfwvHsSG2CgFc66Cll5vIpnu639OTiHPGZFjQuh8K-OW2PRsp_P8PNeWI5GFkuz-JqkKJxG7rZZ_fjxc3F8uGwDoKkgDAGFBQzLYnQU4BhLxQQWsIBcb8CdZe_06sd_AFkIBCM.aIuqMA.0PDIDd2RdnlM_thLicUNm5gUEHc'}
2025-07-31 20:38:56 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:38:56 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:38:56 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000174E41B05F0>
2025-07-31 20:38:56 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:38:56 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:38:56 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:38:56 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:38:56 - managers.commands_server - DEBUG - Request completed in 0.14s with status 500
2025-07-31 20:38:56 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.008502721786499023,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.621622"
  },
  "success": false
}

2025-07-31 20:38:56 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.008502721786499023,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.621622"
  },
  "success": false
}

2025-07-31 20:38:56 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.008502721786499023,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.621622"
  },
  "success": false
}

2025-07-31 20:38:56 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.008502721786499023,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.621622"
  },
  "success": false
}

2025-07-31 20:38:56 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.008502721786499023,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.621622"
  },
  "success": false
}

2025-07-31 20:38:56 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:38:56 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:38:56 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=undefined
2025-07-31 20:38:56 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - endpoints.settings - INFO - Using router ID: undefined
2025-07-31 20:38:56 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=undefined, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:56 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:38:56 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:38:56 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:38:56 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:38:56 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:38:56 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:38:56 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:38:56 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:38:56 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:38:56 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:38:56 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:38:57 - managers.commands_server - DEBUG - Request completed in 0.28s with status 500
2025-07-31 20:38:57 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007110118865966797,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.814074"
  },
  "success": false
}

2025-07-31 20:38:57 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007110118865966797,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.814074"
  },
  "success": false
}

2025-07-31 20:38:57 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007110118865966797,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.814074"
  },
  "success": false
}

2025-07-31 20:38:57 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007110118865966797,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.814074"
  },
  "success": false
}

2025-07-31 20:38:57 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Router undefined not found in Port-Manager"
  },
  "metadata": {
    "executionTime": 0.007110118865966797,
    "routerId": "undefined",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:15.814074"
  },
  "success": false
}

2025-07-31 20:38:57 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:38:57 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:38:57 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:38:57 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn4t7WW240kiDzWJsA7Yx6wtiSUOyGzAYWvXvk9yq7lsjtdTzMK-RESdOnIzM88fKb0BbBhWo-tVH3z7B99WzA-3q449VEEWg6_y-zkG1-lhNAcm98ThvUPu1Ng3DC3qYKLSjtz9vWQL04ankt2c-hgf9YXteuJZ1TSL67Pli2xnCclcfs6od2v5stTPZic_27MOHTJYPY8DWKdEC49y2jSNltQlIq9oRxcisi2OaqdmYandtXp8gPfcPWmYefskcBz2rgWUGuXnRM7-LBqKN7oaPk8_DuuNTpxa0WigUeoJTrLsdxXBURsrsMU9ncrgHu8Q98hfF4K-8IV32skOq0NyBfNtXWedr980mZs3eTPIRJ_HN6vsKvBrYgs4PkFLEhqE4dr1h8K84RCqhJtz3FYz_Ug1MhzSUI6jDg2HOCqFBpVPKvvF2ylopr7l2U0f1poya7GWqfSHd2zbXsjTT5mR2byrhkirjzuLoZgrh3aRSk0V42h1w4PAL5tEiLvB-eUNtmohSl1Ad769jNNfDiZQyl-SIsLrOpzIeQjLuPIPJQhJfIFJQLRDKSxXMWb8lo5qJsyao9Mnh8aDySE2IW5WMe5eyMm-hWOJE4Li0S6a4KsdjZKfEqZTGaK8-PZIbPPJVxI5WRKU2oJ5FWF2eqH-vwBG6jpUrWQ3VG0-oc06rAuo7X2Z9R6DRGzLOLlQwa1Voa2hkc1IFr9fsgtRlrY6FbRXtpTo2mDTab79mcazZcw5oHgb3bAY_LX0NJG-FMCCSNxNHXchxdTYZTUhGLVNmdeZxNctf2rRcg9W7dtEtvDxZeqrUdQiFnLnI8Wf8L7xfeQ7lodmKMrCXWRo8qqxi0TGWuNp1tHrBcYsGvzo8bTtX6eKkkunUFJAZxtsfsssnFjOEpVYsuXHep9cbj3ulJevioQV28wJ5ql4Jdbmfp2sTn3lXxE2REDfZyl2bGRY9I7nI4r01ecayRikeI110yKKc5B_04dITLgnenA4u3hOXQtrZN56JrCbwyjg3SYvUxJyxioMYlMTJzK2LRR0Gh2pSUz5sT5aXRVLRBOaFi-acPNmfXKvA8Yqw4P6bM-LplVIf2C_GIZk0tM1lP80Q7cmid_h5B0Uao6eg3qKfezGLpG6gOicdEc5Lmz93k9Rml0FrDp9nnbztz678uNtYkUnS_iYwGmAmytpFO6M8l852wph1pw_g8YB1Oe5Nb6cNmRFGhsgdTV0bMEM3thUx7mxjayEkp77xmHdWQe85cybvo2FLdLWlV3fTmh5u5k_rU48LGM1DysdcQpJzmfLlaHs3hdPaeLUnN9-0yREXjo-060ZLQP-g_yDP4t4mMU0wmkmJ7HO5YcUhpftdUqUJ7-RQkQRjvZ_z43QyRzAV_U59EGaqGYOX92WivDKCYTdbfcsZ9YHTJLy0MPpeKZvKsPfFOb1JooXXfN_MU2-DYq4fNU7JZ8zUkxEXNbEiixeuSqR60uTg-Bix69E_zv61uR7UvaOMZ32dKJ7HXtDf1kV1A9B3lfZ90328v4_j-JbUdVKAoIHdW1SX78GzT98Xb4DVvX5r2voOC_ANlVUw_vY_14EygAVq-Pk_-v302XULghZ5zk_rWdI-7af306BL0XHo9WLDur3Iv8TLvHlVU9xGPEoPnjE6JvDlL8ZJgqIpFmvobBjoTU4lZfSMAImvSwYObJT2eNI80udb0DTdL45Lu6iuemR-C9UFcW7-z4g_B_5YxUFF9XXBcf9Olsjvp_6Apr5DEP_pwMhRvixmjQzlHpSwmPwqKBe5bnUBEFyN6hM4IBl_xYWgQiH45U8UsRTDrvvtZpGr18-q_5PwLx5fCN9-Q6_qKlrCwzEQcfoOJHabT9lj3p9kAx03MOqf7e9rU6TU3wvxHrzzu4Sto-Nze9m6OPfwvHsSG2CgFc66Cll5vIpnu639OTiHPGZFjQuh8K-OW2PRsp_P8PNeWI5GFkuz-JqkKJxG7rZZ_fjxc3F8uGwDoKkgDAGFBQzLYnQU4BhLxQQWsIBcb8CdZe_06sd_AFkIBCM.aIuqMA.0PDIDd2RdnlM_thLicUNm5gUEHc'}
2025-07-31 20:38:57 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:38:57 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:38:57 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000174E41B23F0>
2025-07-31 20:38:57 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:57 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:57 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:38:57 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:57 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:38:57 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:38:57 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:38:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:38:57 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:38:57 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 20:38:57 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-07-31 20:38:57 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009365081787109375,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:16.332048"
  },
  "success": false
}

2025-07-31 20:38:57 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009365081787109375,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:16.332048"
  },
  "success": false
}

2025-07-31 20:38:57 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009365081787109375,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:39:16.332048"
  },
  "success": false
}

2025-07-31 20:38:57 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 20:38:57 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:38:57 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:38:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:38:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:38:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:38:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:38:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:38:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:38:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:38:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:39:21 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:39:21 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:39:21 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:39:21 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:39:21 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:39:21 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:39:21 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:39:21 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:39:21 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 20:39:21 - managers.commands_server - INFO - Checking commands server health
2025-07-31 20:39:21 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 20:39:22 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 20:39:22 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.4557113647460938e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T17:39:40.874931'}, 'success': True}
2025-07-31 20:39:22 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 20:39:22 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:39:22 - managers.commands_server - DEBUG - Request completed in 0.83s with status 200
2025-07-31 20:39:22 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.6929032802581787, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T17:39:41.711456'}, 'success': True}
2025-07-31 20:39:22 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 20:39:22 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:39:22 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:39:22 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 20:39:22 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 20:39:22 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 20:43:57 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:43:57 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:43:57 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:43:57 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVmuvosgW_Ssdk-kv057DU-EkJ_eiiIBSCiivL6YokPdDQVAm_d9v4ZzuPjeZzL0fJtFo9mPtvVdtWPXH5FSH1wKWYdlO3trrLfw2OTUtbMMTCNt9klftKTWHzQWsE1lhUcW3zYHYskxT3O3-od6lydsfkwC2cPwtqxKFk7dJ4vMLe1nv1LvqiprIUwBcJ98m1zBIriFqT7drgqPitq3fXl_zCsE8rpr2jSUI4hXe2ri6JkOIE27X_COuwYEQoepWts1LVFVRHr6gqnitXqsxgXrtqGfmv65hU1dlE57aRx2-oyoIv6I8wdOdkuCdJFia5wiKpBmam9ZM2nXMPKOjAt1QSBGzgk06DsUtEdWX-PYC6_pHsVsTXlFVthhorPv18yjvY4O_0cJvlIQ_P8fBlnEgbPo50tcGVbgr_C2T4PewgEn-e32tzkmOXSPp73_P9dcnwe9_Se_3b5PwXk_eyPk445zmyRf8l2QYCnvG9scDwhSGTXNqqywsMbMPSPEvAiGYtDwD90cOmYLaKd0uV0FpJyeCsBb-Xva8bb9nhkgPpgTw8rArS6NhPfPS0EUZpXz9CCE0dg0zLM7TebQ4RsL9sKsvtBDm-7OzD6fytWWGR1c-KKGZORfzLFYLLzhahYgKaV8vH0wWdxxxswx_xxwHEAZg8XA3WRFLrAGdjcfsAkXdoYwxOtma577qhKYnbarqUFlQvGrKMRyuPlxG7kZAuikYginp8tqhtMSkrEoe-lWzC-tKi2Z-f73VAkER88mTMXyMzQm2P4ljaOaXPcEs0SzPf5skwU_Wwoca-2uU7BLVPA4KCRKlUYq29pbKTCmMDBy0XjsoPVh7qWbrlHtYZCCNUzBEg3vQSJfSWHdY9W6qkN5BKsB6lWyXKhE6woi5sUg9OesvuEyNaG00VYFs9Gioui0lpS7Fk35pDNsi6HwqaDyTTX2KGCHisBwhlLsmHofdIeq1dDUAUWO2jkDA0qOAGFw1Kmhd2kq9scWCIKHjMi4VE9o66JEdk9tC6pGs3TyK7zzqngcOyFEBOlwz90v9huu3StInrmNlSlol2kEgtSFjNBHXHfRhtyTx6DUVpDoNB1D6NsAjHx-a6LXAzqndGlSBuCiRLFWBycZIXvyaxbEGz1HxPCzh2SyxHeuamN4SYySY3nTV78SM0IYjC8SoB6kyaINAaGl2B4_xGKzWtfNm7MtbSzeNNjpfzFh9HTztP_E-4hzaw7PlBbTHWWoClVY-8hhIfOU6oBpxDMeoDFtjjg6AzmAtjAKsLDJjDznY6k8stvMLkI-xdlGn4SGggyIazKO3AHKt2OliYxXVeD431yafcQbuTZFwb2src222G_lE6zwNZOvhmeMaxUSAedklHI6J_gc_fLwlJNEb4s4lWlLPpaV9EFhk1dArguxIWRRYZayVqytYkNtjZukWrXYOXcfHtbrYWl6KpLyGR51HQ0ZtbW3stYSOl_s5_9894z69QmqhfWcdio19-zju59HHezLy7T_PII8D_ChoB_TnXgwRCZY4z4l7jHMHw3M3aSAeCbzm6_RumqQ_423Jylq2Vy-yTLaz2S1qzooHZFdg7eISzWrt8pCRGSW1NJQXmo4VX4Zb_pI6KpcOHrI2KN_oa-7Yw4wTV-vT-kzr93hnOCDRUjqQj_v40t-aeElp-3zziO-Byc825j5sz-lhmiRiHzRgvmzVy52yTGtKqcVFUbYt01xE0jO3BHcmpm65Ec6iYLUPN7_mqWywttMC6573btDo9tTkeHPapi3l8XUoChuynhZ6zWe7LFJrt5bUswuBw-T3Ui_Qorr4RL7wplt40S-LOZeWPno0J7Lbxp02Y3WCztXSnW8KJnWQTtvAlJdBJHpVy-5W2yozer82DLhaEeblMZyn09Cksn3cmgJ-tz215pN89n3_IWawTpqneo7C9DpqQ1Keq5enHn35U5y-_N9ZH_qFCz7fj0_dxVUXIbyGo-j_CHzKT3uKYRNj96qNV4jTG-_EChISbZcH5mbsGt4C7P7HhHpEHOp_GPFJFMYMYEm3Vc7z_45Gy2fvqcNTn5Mw-HGp-qzNDIsl5gyLJH-cSliMdB2qPMRwFc6Pkg7T-GEXYYlNyS99orkxOWmav78Y4aRfCF8-of-4ouFn_jHvu5hWJIEZZI9QrRS76wS1t-vntclj-q-JeIWvwjLiKrS5LfSFS_AXzztHgRl2jMJbhpgWG2O1t6_VaYB7X5haqHbxU_be8LMpGvfz5j_PheMZLLEMR8womiYYrG7zyfePOwu-tI2Cy9DQ90N6ClmOmzIIElOODsgp5EJqNg_PHHdmJt__A5YSpEc.aIurXQ.WD5nja2dr27T-7obFupqvdGhQII'}
2025-07-31 20:43:57 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:43:57 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:43:57 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000174E42EA300>
2025-07-31 20:43:57 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:43:57 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:43:57 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:43:57 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:43:57 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:43:57 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:43:57 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:43:57 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:43:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:43:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:43:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:43:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:43:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:43:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:43:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:43:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:43:57 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:43:57 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:43:57 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 20:43:57 - managers.commands_server - INFO - Checking commands server health
2025-07-31 20:43:57 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 20:43:58 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 20:43:58 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.765655517578125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T17:44:16.820063'}, 'success': True}
2025-07-31 20:43:58 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 20:43:58 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 20:43:58 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-07-31 20:43:58 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001104593276977539,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:44:16.956227"
  },
  "success": false
}

2025-07-31 20:43:58 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001104593276977539,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:44:16.956227"
  },
  "success": false
}

2025-07-31 20:43:58 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001104593276977539,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:44:16.956227"
  },
  "success": false
}

2025-07-31 20:43:58 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 20:43:58 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:43:59 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:43:59 - services.base - INFO - Service operation completed: scan_network
2025-07-31 20:43:59 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 20:44:00 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:44:00 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:44:00 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:44:00 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVmuvosgW_Ssdk-kv057DU-EkJ_eiiIBSCiivL6YokPdDQVAm_d9v4ZzuPjeZzL0fJtFo9mPtvVdtWPXH5FSH1wKWYdlO3trrLfw2OTUtbMMTCNt9klftKTWHzQWsE1lhUcW3zYHYskxT3O3-od6lydsfkwC2cPwtqxKFk7dJ4vMLe1nv1LvqiprIUwBcJ98m1zBIriFqT7drgqPitq3fXl_zCsE8rpr2jSUI4hXe2ri6JkOIE27X_COuwYEQoepWts1LVFVRHr6gqnitXqsxgXrtqGfmv65hU1dlE57aRx2-oyoIv6I8wdOdkuCdJFia5wiKpBmam9ZM2nXMPKOjAt1QSBGzgk06DsUtEdWX-PYC6_pHsVsTXlFVthhorPv18yjvY4O_0cJvlIQ_P8fBlnEgbPo50tcGVbgr_C2T4PewgEn-e32tzkmOXSPp73_P9dcnwe9_Se_3b5PwXk_eyPk445zmyRf8l2QYCnvG9scDwhSGTXNqqywsMbMPSPEvAiGYtDwD90cOmYLaKd0uV0FpJyeCsBb-Xva8bb9nhkgPpgTw8rArS6NhPfPS0EUZpXz9CCE0dg0zLM7TebQ4RsL9sKsvtBDm-7OzD6fytWWGR1c-KKGZORfzLFYLLzhahYgKaV8vH0wWdxxxswx_xxwHEAZg8XA3WRFLrAGdjcfsAkXdoYwxOtma577qhKYnbarqUFlQvGrKMRyuPlxG7kZAuikYginp8tqhtMSkrEoe-lWzC-tKi2Z-f73VAkER88mTMXyMzQm2P4ljaOaXPcEs0SzPf5skwU_Wwoca-2uU7BLVPA4KCRKlUYq29pbKTCmMDBy0XjsoPVh7qWbrlHtYZCCNUzBEg3vQSJfSWHdY9W6qkN5BKsB6lWyXKhE6woi5sUg9OesvuEyNaG00VYFs9Gioui0lpS7Fk35pDNsi6HwqaDyTTX2KGCHisBwhlLsmHofdIeq1dDUAUWO2jkDA0qOAGFw1Kmhd2kq9scWCIKHjMi4VE9o66JEdk9tC6pGs3TyK7zzqngcOyFEBOlwz90v9huu3StInrmNlSlol2kEgtSFjNBHXHfRhtyTx6DUVpDoNB1D6NsAjHx-a6LXAzqndGlSBuCiRLFWBycZIXvyaxbEGz1HxPCzh2SyxHeuamN4SYySY3nTV78SM0IYjC8SoB6kyaINAaGl2B4_xGKzWtfNm7MtbSzeNNjpfzFh9HTztP_E-4hzaw7PlBbTHWWoClVY-8hhIfOU6oBpxDMeoDFtjjg6AzmAtjAKsLDJjDznY6k8stvMLkI-xdlGn4SGggyIazKO3AHKt2OliYxXVeD431yafcQbuTZFwb2src222G_lE6zwNZOvhmeMaxUSAedklHI6J_gc_fLwlJNEb4s4lWlLPpaV9EFhk1dArguxIWRRYZayVqytYkNtjZukWrXYOXcfHtbrYWl6KpLyGR51HQ0ZtbW3stYSOl_s5_9894z69QmqhfWcdio19-zju59HHezLy7T_PII8D_ChoB_TnXgwRCZY4z4l7jHMHw3M3aSAeCbzm6_RumqQ_423Jylq2Vy-yTLaz2S1qzooHZFdg7eISzWrt8pCRGSW1NJQXmo4VX4Zb_pI6KpcOHrI2KN_oa-7Yw4wTV-vT-kzr93hnOCDRUjqQj_v40t-aeElp-3zziO-Byc825j5sz-lhmiRiHzRgvmzVy52yTGtKqcVFUbYt01xE0jO3BHcmpm65Ec6iYLUPN7_mqWywttMC6573btDo9tTkeHPapi3l8XUoChuynhZ6zWe7LFJrt5bUswuBw-T3Ui_Qorr4RL7wplt40S-LOZeWPno0J7Lbxp02Y3WCztXSnW8KJnWQTtvAlJdBJHpVy-5W2yozer82DLhaEeblMZyn09Cksn3cmgJ-tz215pN89n3_IWawTpqneo7C9DpqQ1Keq5enHn35U5y-_N9ZH_qFCz7fj0_dxVUXIbyGo-j_CHzKT3uKYRNj96qNV4jTG-_EChISbZcH5mbsGt4C7P7HhHpEHOp_GPFJFMYMYEm3Vc7z_45Gy2fvqcNTn5Mw-HGp-qzNDIsl5gyLJH-cSliMdB2qPMRwFc6Pkg7T-GEXYYlNyS99orkxOWmav78Y4aRfCF8-of-4ouFn_jHvu5hWJIEZZI9QrRS76wS1t-vntclj-q-JeIWvwjLiKrS5LfSFS_AXzztHgRl2jMJbhpgWG2O1t6_VaYB7X5haqHbxU_be8LMpGvfz5j_PheMZLLEMR8womiYYrG7zyfePOwu-tI2Cy9DQ90N6ClmOmzIIElOODsgp5EJqNg_PHHdmJt__A5YSpEc.aIurXg.Ua8UV5SUZrBoUbiyHGoPAhfYhzw'}
2025-07-31 20:44:00 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:44:00 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:44:00 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000174E42E94F0>
2025-07-31 20:44:00 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:00 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:00 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:44:00 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:00 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:44:00 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:44:00 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:44:00 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:44:00 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:44:00 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:44:00 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:44:00 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:44:00 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:44:00 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:44:00 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:44:00 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:44:01 - managers.commands_server - DEBUG - Request completed in 2.63s with status 200
2025-07-31 20:44:01 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.465588331222534, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T17:44:20.759617'}, 'success': True}
2025-07-31 20:44:01 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 20:44:01 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 20:44:01 - services.db_operations.network_db - INFO - Saving network scan result for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 20:44:02 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 20:44:02 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 20:44:02 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 20:44:02 - services.db_operations.network_db - INFO - Network scan save completed for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 20:44:02 - services.base - INFO - Service operation completed: scan_network
2025-07-31 20:44:05 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:44:05 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:44:05 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:44:05 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:05 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:44:05 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:05 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:05 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:44:05 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:44:05 - managers.commands_server - DEBUG - Request completed in 0.32s with status 200
2025-07-31 20:44:05 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.1498403549194336, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T17:44:24.330662'}, 'success': True}
2025-07-31 20:44:05 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 20:44:05 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:44:05 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:44:05 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 20:44:05 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 20:44:05 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 20:44:05 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:44:05 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:44:05 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:44:05 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:05 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:44:05 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:05 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:44:05 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:44:05 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:44:05 - managers.commands_server - DEBUG - Request completed in 0.30s with status 200
2025-07-31 20:44:05 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.14812040328979492, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T17:44:24.655583'}, 'success': True}
2025-07-31 20:44:05 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 20:44:05 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:44:05 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:44:05 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 20:44:05 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 20:44:05 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 20:48:17 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:48:17 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:48:17 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:48:17 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:17 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:48:17 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:17 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:17 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:48:17 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 20:48:17 - managers.commands_server - INFO - Checking commands server health
2025-07-31 20:48:17 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 20:48:18 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:48:18 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:48:18 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:48:18 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVmuvosgW_Ssdk-kv057DU-EkJ_eiiIBSCiivL6YokPdDQVAm_d9v4ZzuPjeZzL0fJtFo9mPtvVdtWPXH5FSH1wKWYdlO3trrLfw2OTUtbMMTCNt9klftKTWHzQWsE1lhUcW3zYHYskxT3O3-od6lydsfkwC2cPwtqxKFk7dJ4vMLe1nv1LvqiprIUwBcJ98m1zBIriFqT7drgqPitq3fXl_zCsE8rpr2jSUI4hXe2ri6JkOIE27X_COuwYEQoepWts1LVFVRHr6gqnitXqsxgXrtqGfmv65hU1dlE57aRx2-oyoIv6I8wdOdkuCdJFia5wiKpBmam9ZM2nXMPKOjAt1QSBGzgk06DsUtEdWX-PYC6_pHsVsTXlFVthhorPv18yjvY4O_0cJvlIQ_P8fBlnEgbPo50tcGVbgr_C2T4PewgEn-e32tzkmOXSPp73_P9dcnwe9_Se_3b5PwXk_eyPk445zmyRf8l2QYCnvG9scDwhSGTXNqqywsMbMPSPEvAiGYtDwD90cOmYLaKd0uV0FpJyeCsBb-Xva8bb9nhkgPpgTw8rArS6NhPfPS0EUZpXz9CCE0dg0zLM7TebQ4RsL9sKsvtBDm-7OzD6fytWWGR1c-KKGZORfzLFYLLzhahYgKaV8vH0wWdxxxswx_xxwHEAZg8XA3WRFLrAGdjcfsAkXdoYwxOtma577qhKYnbarqUFlQvGrKMRyuPlxG7kZAuikYginp8tqhtMSkrEoe-lWzC-tKi2Z-f73VAkER88mTMXyMzQm2P4ljaOaXPcEs0SzPf5skwU_Wwoca-2uU7BLVPA4KCRKlUYq29pbKTCmMDBy0XjsoPVh7qWbrlHtYZCCNUzBEg3vQSJfSWHdY9W6qkN5BKsB6lWyXKhE6woi5sUg9OesvuEyNaG00VYFs9Gioui0lpS7Fk35pDNsi6HwqaDyTTX2KGCHisBwhlLsmHofdIeq1dDUAUWO2jkDA0qOAGFw1Kmhd2kq9scWCIKHjMi4VE9o66JEdk9tC6pGs3TyK7zzqngcOyFEBOlwz90v9huu3StInrmNlSlol2kEgtSFjNBHXHfRhtyTx6DUVpDoNB1D6NsAjHx-a6LXAzqndGlSBuCiRLFWBycZIXvyaxbEGz1HxPCzh2SyxHeuamN4SYySY3nTV78SM0IYjC8SoB6kyaINAaGl2B4_xGKzWtfNm7MtbSzeNNjpfzFh9HTztP_E-4hzaw7PlBbTHWWoClVY-8hhIfOU6oBpxDMeoDFtjjg6AzmAtjAKsLDJjDznY6k8stvMLkI-xdlGn4SGggyIazKO3AHKt2OliYxXVeD431yafcQbuTZFwb2src222G_lE6zwNZOvhmeMaxUSAedklHI6J_gc_fLwlJNEb4s4lWlLPpaV9EFhk1dArguxIWRRYZayVqytYkNtjZukWrXYOXcfHtbrYWl6KpLyGR51HQ0ZtbW3stYSOl_s5_9894z69QmqhfWcdio19-zju59HHezLy7T_PII8D_ChoB_TnXgwRCZY4z4l7jHMHw3M3aSAeCbzm6_RumqQ_423Jylq2Vy-yTLaz2S1qzooHZFdg7eISzWrt8pCRGSW1NJQXmo4VX4Zb_pI6KpcOHrI2KN_oa-7Yw4wTV-vT-kzr93hnOCDRUjqQj_v40t-aeElp-3zziO-Byc825j5sz-lhmiRiHzRgvmzVy52yTGtKqcVFUbYt01xE0jO3BHcmpm65Ec6iYLUPN7_mqWywttMC6573btDo9tTkeHPapi3l8XUoChuynhZ6zWe7LFJrt5bUswuBw-T3Ui_Qorr4RL7wplt40S-LOZeWPno0J7Lbxp02Y3WCztXSnW8KJnWQTtvAlJdBJHpVy-5W2yozer82DLhaEeblMZyn09Cksn3cmgJ-tz215pN89n3_IWawTpqneo7C9DpqQ1Keq5enHn35U5y-_N9ZH_qFCz7fj0_dxVUXIbyGo-j_CHzKT3uKYRNj96qNV4jTG-_EChISbZcH5mbsGt4C7P7HhHpEHOp_GPFJFMYMYEm3Vc7z_45Gy2fvqcNTn5Mw-HGp-qzNDIsl5gyLJH-cSliMdB2qPMRwFc6Pkg7T-GEXYYlNyS99orkxOWmav78Y4aRfCF8-of-4ouFn_jHvu5hWJIEZZI9QrRS76wS1t-vntclj-q-JeIWvwjLiKrS5LfSFS_AXzztHgRl2jMJbhpgWG2O1t6_VaYB7X5haqHbxU_be8LMpGvfz5j_PheMZLLEMR8womiYYrG7zyfePOwu-tI2Cy9DQ90N6ClmOmzIIElOODsgp5EJqNg_PHHdmJt__A5YSpEc.aIusYQ.Bi5wxlosnU7gIhg8VVys_AmwoIg'}
2025-07-31 20:48:18 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:48:18 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:48:18 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000174E42E97C0>
2025-07-31 20:48:18 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:48:18 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:48:18 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:48:18 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0003921985626220703, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T17:48:36.904435'}, 'success': True}
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:48:18 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:48:18 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:48:18 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:48:18 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:48:18 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:48:18 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:48:18 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:48:18 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:48:18 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:48:18 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 20:48:18 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:48:18 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 20:48:18 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVmuvosgW_Ssdk-kv057DU-EkJ_eiiIBSCiivL6YokPdDQVAm_d9v4ZzuPjeZzL0fJtFo9mPtvVdtWPXH5FSH1wKWYdlO3trrLfw2OTUtbMMTCNt9klftKTWHzQWsE1lhUcW3zYHYskxT3O3-od6lydsfkwC2cPwtqxKFk7dJ4vMLe1nv1LvqiprIUwBcJ98m1zBIriFqT7drgqPitq3fXl_zCsE8rpr2jSUI4hXe2ri6JkOIE27X_COuwYEQoepWts1LVFVRHr6gqnitXqsxgXrtqGfmv65hU1dlE57aRx2-oyoIv6I8wdOdkuCdJFia5wiKpBmam9ZM2nXMPKOjAt1QSBGzgk06DsUtEdWX-PYC6_pHsVsTXlFVthhorPv18yjvY4O_0cJvlIQ_P8fBlnEgbPo50tcGVbgr_C2T4PewgEn-e32tzkmOXSPp73_P9dcnwe9_Se_3b5PwXk_eyPk445zmyRf8l2QYCnvG9scDwhSGTXNqqywsMbMPSPEvAiGYtDwD90cOmYLaKd0uV0FpJyeCsBb-Xva8bb9nhkgPpgTw8rArS6NhPfPS0EUZpXz9CCE0dg0zLM7TebQ4RsL9sKsvtBDm-7OzD6fytWWGR1c-KKGZORfzLFYLLzhahYgKaV8vH0wWdxxxswx_xxwHEAZg8XA3WRFLrAGdjcfsAkXdoYwxOtma577qhKYnbarqUFlQvGrKMRyuPlxG7kZAuikYginp8tqhtMSkrEoe-lWzC-tKi2Z-f73VAkER88mTMXyMzQm2P4ljaOaXPcEs0SzPf5skwU_Wwoca-2uU7BLVPA4KCRKlUYq29pbKTCmMDBy0XjsoPVh7qWbrlHtYZCCNUzBEg3vQSJfSWHdY9W6qkN5BKsB6lWyXKhE6woi5sUg9OesvuEyNaG00VYFs9Gioui0lpS7Fk35pDNsi6HwqaDyTTX2KGCHisBwhlLsmHofdIeq1dDUAUWO2jkDA0qOAGFw1Kmhd2kq9scWCIKHjMi4VE9o66JEdk9tC6pGs3TyK7zzqngcOyFEBOlwz90v9huu3StInrmNlSlol2kEgtSFjNBHXHfRhtyTx6DUVpDoNB1D6NsAjHx-a6LXAzqndGlSBuCiRLFWBycZIXvyaxbEGz1HxPCzh2SyxHeuamN4SYySY3nTV78SM0IYjC8SoB6kyaINAaGl2B4_xGKzWtfNm7MtbSzeNNjpfzFh9HTztP_E-4hzaw7PlBbTHWWoClVY-8hhIfOU6oBpxDMeoDFtjjg6AzmAtjAKsLDJjDznY6k8stvMLkI-xdlGn4SGggyIazKO3AHKt2OliYxXVeD431yafcQbuTZFwb2src222G_lE6zwNZOvhmeMaxUSAedklHI6J_gc_fLwlJNEb4s4lWlLPpaV9EFhk1dArguxIWRRYZayVqytYkNtjZukWrXYOXcfHtbrYWl6KpLyGR51HQ0ZtbW3stYSOl_s5_9894z69QmqhfWcdio19-zju59HHezLy7T_PII8D_ChoB_TnXgwRCZY4z4l7jHMHw3M3aSAeCbzm6_RumqQ_423Jylq2Vy-yTLaz2S1qzooHZFdg7eISzWrt8pCRGSW1NJQXmo4VX4Zb_pI6KpcOHrI2KN_oa-7Yw4wTV-vT-kzr93hnOCDRUjqQj_v40t-aeElp-3zziO-Byc825j5sz-lhmiRiHzRgvmzVy52yTGtKqcVFUbYt01xE0jO3BHcmpm65Ec6iYLUPN7_mqWywttMC6573btDo9tTkeHPapi3l8XUoChuynhZ6zWe7LFJrt5bUswuBw-T3Ui_Qorr4RL7wplt40S-LOZeWPno0J7Lbxp02Y3WCztXSnW8KJnWQTtvAlJdBJHpVy-5W2yozer82DLhaEeblMZyn09Cksn3cmgJ-tz215pN89n3_IWawTpqneo7C9DpqQ1Keq5enHn35U5y-_N9ZH_qFCz7fj0_dxVUXIbyGo-j_CHzKT3uKYRNj96qNV4jTG-_EChISbZcH5mbsGt4C7P7HhHpEHOp_GPFJFMYMYEm3Vc7z_45Gy2fvqcNTn5Mw-HGp-qzNDIsl5gyLJH-cSliMdB2qPMRwFc6Pkg7T-GEXYYlNyS99orkxOWmav78Y4aRfCF8-of-4ouFn_jHvu5hWJIEZZI9QrRS76wS1t-vntclj-q-JeIWvwjLiKrS5LfSFS_AXzztHgRl2jMJbhpgWG2O1t6_VaYB7X5haqHbxU_be8LMpGvfz5j_PheMZLLEMR8womiYYrG7zyfePOwu-tI2Cy9DQ90N6ClmOmzIIElOODsgp5EJqNg_PHHdmJt__A5YSpEc.aIusYQ.Bi5wxlosnU7gIhg8VVys_AmwoIg'}
2025-07-31 20:48:18 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 20:48:18 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 20:48:18 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000174E42E8B90>
2025-07-31 20:48:18 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 20:48:18 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 20:48:18 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 20:48:18 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Request completed in 0.42s with status 200
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.16618990898132324, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T17:48:37.232885'}, 'success': True}
2025-07-31 20:48:18 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 20:48:18 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:48:18 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:48:18 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 20:48:18 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 20:48:18 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 20:48:18 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:48:18 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 20:48:18 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:48:18 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 20:48:18 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 20:48:18 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 20:48:18 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 20:48:18 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 20:48:18 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 20:48:18 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Request completed in 0.17s with status 400
2025-07-31 20:48:18 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.003849029541015625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:48:37.644536"
  },
  "success": false
}

2025-07-31 20:48:18 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.003849029541015625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:48:37.644536"
  },
  "success": false
}

2025-07-31 20:48:18 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.003849029541015625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T17:48:37.644536"
  },
  "success": false
}

2025-07-31 20:48:18 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 20:48:18 - services.base - INFO - Service operation completed: start_session
2025-07-31 20:48:18 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 20:48:18 - endpoints.settings - INFO - Request method: GET
2025-07-31 20:48:18 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:48:18 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:48:18 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 20:48:18 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:48:18 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 20:48:19 - managers.commands_server - DEBUG - Request completed in 0.28s with status 200
2025-07-31 20:48:19 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.1479511260986328, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T17:48:37.944597'}, 'success': True}
2025-07-31 20:48:19 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 20:48:19 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 20:48:19 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 20:48:19 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 20:48:19 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 20:48:19 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 20:56:15 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 20:56:50 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:00:07 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:00:10 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:00:18 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:00:18 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:00:18 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:18 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:18 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:00:18 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:00:18 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:00:18 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:00:18 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 21:00:18 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:00:18 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 21:00:18 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVmuvosgW_Ssdk-kv057DU-EkJ_eiiIBSCiivL6YokPdDQVAm_d9v4ZzuPjeZzL0fJtFo9mPtvVdtWPXH5FSH1wKWYdlO3trrLfw2OTUtbMMTCNt9klftKTWHzQWsE1lhUcW3zYHYskxT3O3-od6lydsfkwC2cPwtqxKFk7dJ4vMLe1nv1LvqiprIUwBcJ98m1zBIriFqT7drgqPitq3fXl_zCsE8rpr2jSUI4hXe2ri6JkOIE27X_COuwYEQoepWts1LVFVRHr6gqnitXqsxgXrtqGfmv65hU1dlE57aRx2-oyoIv6I8wdOdkuCdJFia5wiKpBmam9ZM2nXMPKOjAt1QSBGzgk06DsUtEdWX-PYC6_pHsVsTXlFVthhorPv18yjvY4O_0cJvlIQ_P8fBlnEgbPo50tcGVbgr_C2T4PewgEn-e32tzkmOXSPp73_P9dcnwe9_Se_3b5PwXk_eyPk445zmyRf8l2QYCnvG9scDwhSGTXNqqywsMbMPSPEvAiGYtDwD90cOmYLaKd0uV0FpJyeCsBb-Xva8bb9nhkgPpgTw8rArS6NhPfPS0EUZpXz9CCE0dg0zLM7TebQ4RsL9sKsvtBDm-7OzD6fytWWGR1c-KKGZORfzLFYLLzhahYgKaV8vH0wWdxxxswx_xxwHEAZg8XA3WRFLrAGdjcfsAkXdoYwxOtma577qhKYnbarqUFlQvGrKMRyuPlxG7kZAuikYginp8tqhtMSkrEoe-lWzC-tKi2Z-f73VAkER88mTMXyMzQm2P4ljaOaXPcEs0SzPf5skwU_Wwoca-2uU7BLVPA4KCRKlUYq29pbKTCmMDBy0XjsoPVh7qWbrlHtYZCCNUzBEg3vQSJfSWHdY9W6qkN5BKsB6lWyXKhE6woi5sUg9OesvuEyNaG00VYFs9Gioui0lpS7Fk35pDNsi6HwqaDyTTX2KGCHisBwhlLsmHofdIeq1dDUAUWO2jkDA0qOAGFw1Kmhd2kq9scWCIKHjMi4VE9o66JEdk9tC6pGs3TyK7zzqngcOyFEBOlwz90v9huu3StInrmNlSlol2kEgtSFjNBHXHfRhtyTx6DUVpDoNB1D6NsAjHx-a6LXAzqndGlSBuCiRLFWBycZIXvyaxbEGz1HxPCzh2SyxHeuamN4SYySY3nTV78SM0IYjC8SoB6kyaINAaGl2B4_xGKzWtfNm7MtbSzeNNjpfzFh9HTztP_E-4hzaw7PlBbTHWWoClVY-8hhIfOU6oBpxDMeoDFtjjg6AzmAtjAKsLDJjDznY6k8stvMLkI-xdlGn4SGggyIazKO3AHKt2OliYxXVeD431yafcQbuTZFwb2src222G_lE6zwNZOvhmeMaxUSAedklHI6J_gc_fLwlJNEb4s4lWlLPpaV9EFhk1dArguxIWRRYZayVqytYkNtjZukWrXYOXcfHtbrYWl6KpLyGR51HQ0ZtbW3stYSOl_s5_9894z69QmqhfWcdio19-zju59HHezLy7T_PII8D_ChoB_TnXgwRCZY4z4l7jHMHw3M3aSAeCbzm6_RumqQ_423Jylq2Vy-yTLaz2S1qzooHZFdg7eISzWrt8pCRGSW1NJQXmo4VX4Zb_pI6KpcOHrI2KN_oa-7Yw4wTV-vT-kzr93hnOCDRUjqQj_v40t-aeElp-3zziO-Byc825j5sz-lhmiRiHzRgvmzVy52yTGtKqcVFUbYt01xE0jO3BHcmpm65Ec6iYLUPN7_mqWywttMC6573btDo9tTkeHPapi3l8XUoChuynhZ6zWe7LFJrt5bUswuBw-T3Ui_Qorr4RL7wplt40S-LOZeWPno0J7Lbxp02Y3WCztXSnW8KJnWQTtvAlJdBJHpVy-5W2yozer82DLhaEeblMZyn09Cksn3cmgJ-tz215pN89n3_IWawTpqneo7C9DpqQ1Keq5enHn35U5y-_N9ZH_qFCz7fj0_dxVUXIbyGo-j_CHzKT3uKYRNj96qNV4jTG-_EChISbZcH5mbsGt4C7P7HhHpEHOp_GPFJFMYMYEm3Vc7z_45Gy2fvqcNTn5Mw-HGp-qzNDIsl5gyLJH-cSliMdB2qPMRwFc6Pkg7T-GEXYYlNyS99orkxOWmav78Y4aRfCF8-of-4ouFn_jHvu5hWJIEZZI9QrRS76wS1t-vntclj-q-JeIWvwjLiKrS5LfSFS_AXzztHgRl2jMJbhpgWG2O1t6_VaYB7X5haqHbxU_be8LMpGvfz5j_PheMZLLEMR8womiYYrG7zyfePOwu-tI2Cy9DQ90N6ClmOmzIIElOODsgp5EJqNg_PHHdmJt__A5YSpEc.aIuvMg.nMywwJd7dtmODZCB02hvXaR9Q2U'}
2025-07-31 21:00:18 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 21:00:18 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 21:00:18 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x000001B22BD69950>
2025-07-31 21:00:18 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 21:00:18 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 21:00:18 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 21:00:18 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 21:00:18 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 21:00:18 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0003159046173095703, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:00:37.260463'}, 'success': True}
2025-07-31 21:00:18 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:00:18 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:00:18 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 21:00:18 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 21:00:18 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:18 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 21:00:18 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 21:00:18 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 21:00:18 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 21:00:18 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 21:00:18 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 21:00:18 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 21:00:18 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:00:18 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 21:00:18 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVmuvosgW_Ssdk-kv057DU-EkJ_eiiIBSCiivL6YokPdDQVAm_d9v4ZzuPjeZzL0fJtFo9mPtvVdtWPXH5FSH1wKWYdlO3trrLfw2OTUtbMMTCNt9klftKTWHzQWsE1lhUcW3zYHYskxT3O3-od6lydsfkwC2cPwtqxKFk7dJ4vMLe1nv1LvqiprIUwBcJ98m1zBIriFqT7drgqPitq3fXl_zCsE8rpr2jSUI4hXe2ri6JkOIE27X_COuwYEQoepWts1LVFVRHr6gqnitXqsxgXrtqGfmv65hU1dlE57aRx2-oyoIv6I8wdOdkuCdJFia5wiKpBmam9ZM2nXMPKOjAt1QSBGzgk06DsUtEdWX-PYC6_pHsVsTXlFVthhorPv18yjvY4O_0cJvlIQ_P8fBlnEgbPo50tcGVbgr_C2T4PewgEn-e32tzkmOXSPp73_P9dcnwe9_Se_3b5PwXk_eyPk445zmyRf8l2QYCnvG9scDwhSGTXNqqywsMbMPSPEvAiGYtDwD90cOmYLaKd0uV0FpJyeCsBb-Xva8bb9nhkgPpgTw8rArS6NhPfPS0EUZpXz9CCE0dg0zLM7TebQ4RsL9sKsvtBDm-7OzD6fytWWGR1c-KKGZORfzLFYLLzhahYgKaV8vH0wWdxxxswx_xxwHEAZg8XA3WRFLrAGdjcfsAkXdoYwxOtma577qhKYnbarqUFlQvGrKMRyuPlxG7kZAuikYginp8tqhtMSkrEoe-lWzC-tKi2Z-f73VAkER88mTMXyMzQm2P4ljaOaXPcEs0SzPf5skwU_Wwoca-2uU7BLVPA4KCRKlUYq29pbKTCmMDBy0XjsoPVh7qWbrlHtYZCCNUzBEg3vQSJfSWHdY9W6qkN5BKsB6lWyXKhE6woi5sUg9OesvuEyNaG00VYFs9Gioui0lpS7Fk35pDNsi6HwqaDyTTX2KGCHisBwhlLsmHofdIeq1dDUAUWO2jkDA0qOAGFw1Kmhd2kq9scWCIKHjMi4VE9o66JEdk9tC6pGs3TyK7zzqngcOyFEBOlwz90v9huu3StInrmNlSlol2kEgtSFjNBHXHfRhtyTx6DUVpDoNB1D6NsAjHx-a6LXAzqndGlSBuCiRLFWBycZIXvyaxbEGz1HxPCzh2SyxHeuamN4SYySY3nTV78SM0IYjC8SoB6kyaINAaGl2B4_xGKzWtfNm7MtbSzeNNjpfzFh9HTztP_E-4hzaw7PlBbTHWWoClVY-8hhIfOU6oBpxDMeoDFtjjg6AzmAtjAKsLDJjDznY6k8stvMLkI-xdlGn4SGggyIazKO3AHKt2OliYxXVeD431yafcQbuTZFwb2src222G_lE6zwNZOvhmeMaxUSAedklHI6J_gc_fLwlJNEb4s4lWlLPpaV9EFhk1dArguxIWRRYZayVqytYkNtjZukWrXYOXcfHtbrYWl6KpLyGR51HQ0ZtbW3stYSOl_s5_9894z69QmqhfWcdio19-zju59HHezLy7T_PII8D_ChoB_TnXgwRCZY4z4l7jHMHw3M3aSAeCbzm6_RumqQ_423Jylq2Vy-yTLaz2S1qzooHZFdg7eISzWrt8pCRGSW1NJQXmo4VX4Zb_pI6KpcOHrI2KN_oa-7Yw4wTV-vT-kzr93hnOCDRUjqQj_v40t-aeElp-3zziO-Byc825j5sz-lhmiRiHzRgvmzVy52yTGtKqcVFUbYt01xE0jO3BHcmpm65Ec6iYLUPN7_mqWywttMC6573btDo9tTkeHPapi3l8XUoChuynhZ6zWe7LFJrt5bUswuBw-T3Ui_Qorr4RL7wplt40S-LOZeWPno0J7Lbxp02Y3WCztXSnW8KJnWQTtvAlJdBJHpVy-5W2yozer82DLhaEeblMZyn09Cksn3cmgJ-tz215pN89n3_IWawTpqneo7C9DpqQ1Keq5enHn35U5y-_N9ZH_qFCz7fj0_dxVUXIbyGo-j_CHzKT3uKYRNj96qNV4jTG-_EChISbZcH5mbsGt4C7P7HhHpEHOp_GPFJFMYMYEm3Vc7z_45Gy2fvqcNTn5Mw-HGp-qzNDIsl5gyLJH-cSliMdB2qPMRwFc6Pkg7T-GEXYYlNyS99orkxOWmav78Y4aRfCF8-of-4ouFn_jHvu5hWJIEZZI9QrRS76wS1t-vntclj-q-JeIWvwjLiKrS5LfSFS_AXzztHgRl2jMJbhpgWG2O1t6_VaYB7X5haqHbxU_be8LMpGvfz5j_PheMZLLEMR8womiYYrG7zyfePOwu-tI2Cy9DQ90N6ClmOmzIIElOODsgp5EJqNg_PHHdmJt__A5YSpEc.aIuvMg.nMywwJd7dtmODZCB02hvXaR9Q2U'}
2025-07-31 21:00:18 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 21:00:18 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 21:00:18 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x000001B22BD7D480>
2025-07-31 21:00:18 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 21:00:18 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:18 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 21:00:18 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 21:00:18 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-07-31 21:00:18 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 21:00:18 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 21:00:18 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:18 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 21:00:18 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 21:00:18 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 21:00:18 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 21:00:18 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 21:00:18 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 21:00:19 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:19 - services.base - INFO - Service operation completed: start_session
2025-07-31 21:00:19 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 21:00:19 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 21:00:19 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015184879302978516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:00:37.978019"
  },
  "success": false
}

2025-07-31 21:00:19 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015184879302978516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:00:37.978019"
  },
  "success": false
}

2025-07-31 21:00:19 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015184879302978516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:00:37.978019"
  },
  "success": false
}

2025-07-31 21:00:19 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-07-31 21:00:19 - services.base - INFO - Service operation completed: start_session
2025-07-31 21:00:19 - managers.commands_server - DEBUG - Request completed in 0.86s with status 200
2025-07-31 21:00:19 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.7259616851806641, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:00:38.130690'}, 'success': True}
2025-07-31 21:00:19 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:00:19 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:19 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:00:19 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:00:19 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:00:19 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:00:19 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:00:19 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:00:19 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:19 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:19 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:19 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:19 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:19 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:00:19 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:00:19 - managers.commands_server - DEBUG - Request completed in 0.31s with status 200
2025-07-31 21:00:19 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.1521320343017578, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:00:38.764980'}, 'success': True}
2025-07-31 21:00:19 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:00:19 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:19 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:00:19 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:00:19 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:00:19 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:00:28 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-07-31 21:00:28 - endpoints.settings - INFO - Request method: POST
2025-07-31 21:00:28 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 21:00:28 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:28 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 21:00:28 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NetPilot'}
2025-07-31 21:00:28 - endpoints.settings - INFO - WiFi name extracted from request: NetPilot
2025-07-31 21:00:28 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:00:28 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:00:28 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NetPilot
2025-07-31 21:00:28 - services.base - ERROR - update_wifi_name failed: log_service_operation() got an unexpected keyword argument 'extra_info'
Traceback (most recent call last):
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\services\base.py", line 88, in wrapper
    return func(*args, **kwargs)
  File "C:\Users\Dan Toledano\Desktop\ex3 cs\NetPilot\backend2\services\settings_service.py", line 167, in update_wifi_name
    log_service_operation("update_wifi_name", user_id, router_id, session_id, extra_info=f"new_name={wifi_name}")
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: log_service_operation() got an unexpected keyword argument 'extra_info'
2025-07-31 21:00:28 - endpoints.settings - INFO - Service call completed - result: None, error: update_wifi_name failed: log_service_operation() got an unexpected keyword argument 'extra_info'
2025-07-31 21:00:28 - endpoints.settings - WARNING - Service returned error: update_wifi_name failed: log_service_operation() got an unexpected keyword argument 'extra_info'
2025-07-31 21:02:29 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:02:35 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:02:37 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:02:37 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:02:37 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:02:37 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:02:37 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:02:37 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:02:37 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:02:37 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:02:37 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:02:37 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:02:37 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:02:37 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-07-31 21:02:37 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.7894973754882812e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:02:56.513486'}, 'success': True}
2025-07-31 21:02:37 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:02:37 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:02:38 - managers.commands_server - DEBUG - Request completed in 0.30s with status 200
2025-07-31 21:02:38 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.14932847023010254, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:02:56.814436'}, 'success': True}
2025-07-31 21:02:38 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:02:38 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:02:38 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:02:38 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:02:38 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:02:38 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:02:45 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-07-31 21:02:45 - endpoints.settings - INFO - Request method: POST
2025-07-31 21:02:45 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 21:02:45 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:02:45 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 21:02:45 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NetPilot'}
2025-07-31 21:02:45 - endpoints.settings - INFO - WiFi name extracted from request: NetPilot
2025-07-31 21:02:45 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:02:45 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:02:45 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NetPilot
2025-07-31 21:02:45 - services.base - INFO - Service operation completed: update_wifi_name
2025-07-31 21:02:45 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:02:45 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 21:02:45 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0002627372741699219,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:03:04.368389"
  },
  "success": false
}

2025-07-31 21:02:45 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0002627372741699219,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:03:04.368389"
  },
  "success": false
}

2025-07-31 21:02:45 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0002627372741699219,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:03:04.368389"
  },
  "success": false
}

2025-07-31 21:02:45 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0002627372741699219,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:03:04.368389"
  },
  "success": false
}

2025-07-31 21:02:45 - endpoints.settings - WARNING - Service returned error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0002627372741699219,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:03:04.368389"
  },
  "success": false
}

2025-07-31 21:04:25 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:04:36 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:04:36 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:04:36 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:04:36 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:04:36 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:04:36 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:04:36 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:04:36 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:04:36 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:04:36 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:04:36 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:04:36 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 21:04:36 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.600120544433594e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:04:55.304282'}, 'success': True}
2025-07-31 21:04:36 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:04:36 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:04:36 - managers.commands_server - DEBUG - Request completed in 0.31s with status 200
2025-07-31 21:04:36 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.1497666835784912, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:04:55.612606'}, 'success': True}
2025-07-31 21:04:36 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:04:36 - services.commands_server_operations.whitelist_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:04:36 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:04:36 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:04:36 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:04:36 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:04:41 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-07-31 21:04:41 - endpoints.settings - INFO - Request method: POST
2025-07-31 21:04:41 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 21:04:41 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:04:41 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 21:04:41 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NetPilot'}
2025-07-31 21:04:41 - endpoints.settings - INFO - WiFi name extracted from request: NetPilot
2025-07-31 21:04:41 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:04:41 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:04:41 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NetPilot
2025-07-31 21:04:41 - services.base - INFO - Service operation completed: update_wifi_name
2025-07-31 21:04:41 - services.commands_server_operations.whitelist_execute - INFO - Sending request to /api/wifi/ssid with body: {'ssid': 'NetPilot'}
2025-07-31 21:04:41 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:04:42 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 21:04:42 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00017309188842773438,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:05:00.831136"
  },
  "success": false
}

2025-07-31 21:04:42 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00017309188842773438,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:05:00.831136"
  },
  "success": false
}

2025-07-31 21:04:42 - services.commands_server_operations.whitelist_execute - ERROR - Failed to update WiFi name: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00017309188842773438,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:05:00.831136"
  },
  "success": false
}

2025-07-31 21:04:42 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00017309188842773438,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:05:00.831136"
  },
  "success": false
}

2025-07-31 21:04:42 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00017309188842773438,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:05:00.831136"
  },
  "success": false
}

2025-07-31 21:04:42 - endpoints.settings - WARNING - Service returned error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00017309188842773438,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:05:00.831136"
  },
  "success": false
}

2025-07-31 21:04:49 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:06:07 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:06:18 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:06:23 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:06:23 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:06:23 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:06:23 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:06:23 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:06:23 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:06:23 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:06:23 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:06:23 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:06:23 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:06:23 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:06:23 - managers.commands_server - DEBUG - Request completed in 0.19s with status 200
2025-07-31 21:06:23 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0004527568817138672, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:06:42.369570'}, 'success': True}
2025-07-31 21:06:23 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:06:23 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:06:23 - managers.commands_server - DEBUG - Request completed in 0.33s with status 200
2025-07-31 21:06:23 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.16179370880126953, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:06:42.717018'}, 'success': True}
2025-07-31 21:06:23 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:06:23 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:06:23 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:06:23 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:06:23 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:06:23 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:06:26 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-07-31 21:06:26 - endpoints.settings - INFO - Request method: POST
2025-07-31 21:06:26 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 21:06:26 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:06:26 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 21:06:26 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NewWiFiNamek'}
2025-07-31 21:06:26 - endpoints.settings - INFO - WiFi name extracted from request: NewWiFiNamek
2025-07-31 21:06:26 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:06:26 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:06:26 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NewWiFiNamek
2025-07-31 21:06:26 - services.base - INFO - Service operation completed: update_wifi_name
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - === UPDATE WIFI NAME DEBUG ===
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - Endpoint: /api/wifi/ssid
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - WiFi name: 'NewWiFiNamek'
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - Request body type: <class 'dict'>
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - Request body: {'ssid': 'NewWiFiNamek'}
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - Request body keys: ['ssid']
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - SSID value: 'NewWiFiNamek'
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - Session ID: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - JSON serialization test: {"ssid": "NewWiFiNamek"}
2025-07-31 21:06:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:06:26 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 21:06:26 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0008480548858642578,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:06:45.146495"
  },
  "success": false
}

2025-07-31 21:06:26 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0008480548858642578,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:06:45.146495"
  },
  "success": false
}

2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - Commands server response_data: None
2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - INFO - Commands server error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0008480548858642578,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:06:45.146495"
  },
  "success": false
}

2025-07-31 21:06:26 - services.commands_server_operations.settings_execute - ERROR - Failed to update WiFi name: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0008480548858642578,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:06:45.146495"
  },
  "success": false
}

2025-07-31 21:06:26 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0008480548858642578,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:06:45.146495"
  },
  "success": false
}

2025-07-31 21:06:26 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0008480548858642578,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:06:45.146495"
  },
  "success": false
}

2025-07-31 21:06:26 - endpoints.settings - WARNING - Service returned error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0008480548858642578,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:06:45.146495"
  },
  "success": false
}

2025-07-31 21:08:54 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:08:59 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:08:59 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:08:59 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:08:59 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:08:59 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:08:59 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:08:59 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:08:59 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:08:59 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:08:59 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:08:59 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:08:59 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 21:08:59 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.6941299438476562e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:09:18.449030'}, 'success': True}
2025-07-31 21:08:59 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:08:59 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:08:59 - managers.commands_server - DEBUG - Request completed in 0.30s with status 200
2025-07-31 21:08:59 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.14902925491333008, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:09:18.756543'}, 'success': True}
2025-07-31 21:08:59 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:08:59 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:08:59 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:08:59 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:08:59 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:08:59 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:09:00 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-07-31 21:09:00 - endpoints.settings - INFO - Request method: POST
2025-07-31 21:09:00 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 21:09:00 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:09:00 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 21:09:00 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NewWiFiName'}
2025-07-31 21:09:00 - endpoints.settings - INFO - WiFi name extracted from request: NewWiFiName
2025-07-31 21:09:00 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:09:00 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:09:00 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NewWiFiName
2025-07-31 21:09:00 - services.base - INFO - Service operation completed: update_wifi_name
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - === UPDATE WIFI NAME DEBUG ===
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - Endpoint: /api/wifi/ssid
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - WiFi name: 'NewWiFiName'
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - Request body type: <class 'dict'>
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - Request body: {'ssid': 'NewWiFiName'}
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - Request body keys: ['ssid']
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - SSID value: 'NewWiFiName'
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - Session ID: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - JSON serialization test: {"ssid": "NewWiFiName"}
2025-07-31 21:09:00 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:09:00 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-07-31 21:09:00 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018095970153808594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:09:19.801848"
  },
  "success": false
}

2025-07-31 21:09:00 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018095970153808594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:09:19.801848"
  },
  "success": false
}

2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - Commands server response_data: None
2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - INFO - Commands server error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018095970153808594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:09:19.801848"
  },
  "success": false
}

2025-07-31 21:09:00 - services.commands_server_operations.settings_execute - ERROR - Failed to update WiFi name: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018095970153808594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:09:19.801848"
  },
  "success": false
}

2025-07-31 21:09:00 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018095970153808594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:09:19.801848"
  },
  "success": false
}

2025-07-31 21:09:00 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018095970153808594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:09:19.801848"
  },
  "success": false
}

2025-07-31 21:09:00 - endpoints.settings - WARNING - Service returned error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018095970153808594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:09:19.801848"
  },
  "success": false
}

2025-07-31 21:11:16 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:11:22 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:11:22 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:11:22 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:11:22 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:11:22 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:11:22 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:11:22 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:11:22 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:11:22 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:11:22 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:11:22 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:11:22 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 21:11:22 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.9087066650390625e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:11:41.287279'}, 'success': True}
2025-07-31 21:11:22 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:11:22 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:11:22 - managers.commands_server - DEBUG - Request completed in 0.41s with status 200
2025-07-31 21:11:22 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.1518232822418213, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:11:41.598043'}, 'success': True}
2025-07-31 21:11:22 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:11:22 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:11:22 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:11:22 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:11:22 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:11:22 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:11:27 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-07-31 21:11:27 - endpoints.settings - INFO - Request method: POST
2025-07-31 21:11:27 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 21:11:27 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:11:27 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 21:11:27 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NewWiFiName2'}
2025-07-31 21:11:27 - endpoints.settings - INFO - WiFi name extracted from request: NewWiFiName2
2025-07-31 21:11:27 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:11:27 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:11:27 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NewWiFiName2
2025-07-31 21:11:27 - services.base - INFO - Service operation completed: update_wifi_name
2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - === TRYING MULTIPLE WIFI UPDATE APPROACHES ===
2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - WiFi name to set: 'NewWiFiName2'
2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/ssid with body: {'ssid': 'NewWiFiName2'}
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 21:11:27 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00016999244689941406,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.324032"
  },
  "success": false
}

2025-07-31 21:11:27 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00016999244689941406,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.324032"
  },
  "success": false
}

2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/ssid: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00016999244689941406,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.324032"
  },
  "success": false
}

2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/ssid with body: {'wifi_name': 'NewWiFiName2'}
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 21:11:27 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00015115737915039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.478953"
  },
  "success": false
}

2025-07-31 21:11:27 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00015115737915039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.478953"
  },
  "success": false
}

2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/ssid: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00015115737915039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.478953"
  },
  "success": false
}

2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/ssid with body: {'name': 'NewWiFiName2'}
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 21:11:27 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00014781951904296875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.626224"
  },
  "success": false
}

2025-07-31 21:11:27 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00014781951904296875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.626224"
  },
  "success": false
}

2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/ssid: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00014781951904296875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.626224"
  },
  "success": false
}

2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/ssid with body: {'ssid_name': 'NewWiFiName2'}
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-07-31 21:11:27 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018930435180664062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.785406"
  },
  "success": false
}

2025-07-31 21:11:27 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018930435180664062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.785406"
  },
  "success": false
}

2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/ssid: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00018930435180664062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:11:46.785406"
  },
  "success": false
}

2025-07-31 21:11:27 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/name with body: {'ssid': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:27 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/name
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Request completed in 0.19s with status 404
2025-07-31 21:11:28 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/name': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/name: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/name with body: {'wifi_name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/name
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Request completed in 0.16s with status 404
2025-07-31 21:11:28 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/name': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/name: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/name with body: {'name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/name
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Request completed in 0.13s with status 404
2025-07-31 21:11:28 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/name': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/name: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/name with body: {'ssid_name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/name
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Request completed in 0.14s with status 404
2025-07-31 21:11:28 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/name': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/name: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/config with body: {'ssid': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/config
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Request completed in 0.15s with status 404
2025-07-31 21:11:28 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/config': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/config: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/config with body: {'wifi_name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/config
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Request completed in 0.13s with status 404
2025-07-31 21:11:28 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/config': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/config: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:28 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/config with body: {'name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:28 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/config
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Request completed in 0.14s with status 404
2025-07-31 21:11:29 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/config': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/config: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/wifi/config with body: {'ssid_name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/config
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Request completed in 0.14s with status 404
2025-07-31 21:11:29 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/config': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Failed with /api/wifi/config: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/settings/wifi/ssid with body: {'ssid': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/settings/wifi/ssid
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Request completed in 0.14s with status 404
2025-07-31 21:11:29 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/settings/wifi/ssid': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Failed with /api/settings/wifi/ssid: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/settings/wifi/ssid with body: {'wifi_name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/settings/wifi/ssid
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Request completed in 0.15s with status 404
2025-07-31 21:11:29 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/settings/wifi/ssid': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Failed with /api/settings/wifi/ssid: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/settings/wifi/ssid with body: {'name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/settings/wifi/ssid
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Request completed in 0.14s with status 404
2025-07-31 21:11:29 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/settings/wifi/ssid': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Failed with /api/settings/wifi/ssid: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /api/settings/wifi/ssid with body: {'ssid_name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/settings/wifi/ssid
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Request completed in 0.24s with status 404
2025-07-31 21:11:29 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/settings/wifi/ssid': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Failed with /api/settings/wifi/ssid: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:29 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /wifi/ssid with body: {'ssid': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:29 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/wifi/ssid
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Request completed in 0.13s with status 404
2025-07-31 21:11:30 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/wifi/ssid': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - Failed with /wifi/ssid: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /wifi/ssid with body: {'wifi_name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/wifi/ssid
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Request completed in 0.17s with status 404
2025-07-31 21:11:30 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/wifi/ssid': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - Failed with /wifi/ssid: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /wifi/ssid with body: {'name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/wifi/ssid
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Request completed in 0.14s with status 404
2025-07-31 21:11:30 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/wifi/ssid': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - Failed with /wifi/ssid: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - Trying endpoint: /wifi/ssid with body: {'ssid_name': 'NewWiFiName2', 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4'}
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/wifi/ssid
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Request completed in 0.17s with status 404
2025-07-31 21:11:30 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/wifi/ssid': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - Failed with /wifi/ssid: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - === ALL ATTEMPTS FAILED - Trying to discover available endpoints ===
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi
2025-07-31 21:11:30 - managers.commands_server - DEBUG - Request completed in 0.17s with status 404
2025-07-31 21:11:30 - managers.commands_server - ERROR - Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi': Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.commands_server_operations.settings_execute - INFO - Could not get WiFi info: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - services.base - ERROR - Service operation failed: update_wifi_name - Failed to update WiFi name. All endpoint attempts failed. Last error: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - endpoints.settings - INFO - Service call completed - result: None, error: Failed to update WiFi name. All endpoint attempts failed. Last error: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:11:30 - endpoints.settings - WARNING - Service returned error: Failed to update WiFi name. All endpoint attempts failed. Last error: Commands server returned 404: <!doctype html>
<html lang=en>
<title>404 Not Found</title>
<h1>Not Found</h1>
<p>The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.</p>

2025-07-31 21:17:18 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:17:24 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:17:39 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:17:39 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:17:39 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:17:39 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:17:39 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:17:39 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:17:39 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:17:39 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:17:39 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:17:39 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:17:39 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:17:39 - managers.commands_server - DEBUG - Request completed in 0.17s with status 200
2025-07-31 21:17:39 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0002532005310058594, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:17:58.297032'}, 'success': True}
2025-07-31 21:17:39 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:17:39 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:17:40 - managers.commands_server - DEBUG - Request completed in 0.85s with status 200
2025-07-31 21:17:40 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.707038402557373, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:17:59.154451'}, 'success': True}
2025-07-31 21:17:40 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:17:40 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:17:40 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:17:40 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:17:40 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:17:40 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:17:42 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-07-31 21:17:42 - endpoints.settings - INFO - Request method: POST
2025-07-31 21:17:42 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 21:17:42 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:17:42 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 21:17:42 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NewWiFiName2'}
2025-07-31 21:17:42 - endpoints.settings - INFO - WiFi name extracted from request: NewWiFiName2
2025-07-31 21:17:42 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:17:42 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:17:42 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NewWiFiName2
2025-07-31 21:17:42 - services.base - INFO - Service operation completed: update_wifi_name
2025-07-31 21:17:42 - services.commands_server_operations.settings_execute - INFO - Updating WiFi SSID to 'NewWiFiName2' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:17:42 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:17:43 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 21:17:43 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0006563663482666016,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:18:01.819524"
  },
  "success": false
}

2025-07-31 21:17:43 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0006563663482666016,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:18:01.819524"
  },
  "success": false
}

2025-07-31 21:17:43 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0006563663482666016,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:18:01.819524"
  },
  "success": false
}

2025-07-31 21:17:43 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0006563663482666016,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:18:01.819524"
  },
  "success": false
}

2025-07-31 21:17:43 - endpoints.settings - WARNING - Service returned error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0006563663482666016,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:18:01.819524"
  },
  "success": false
}

2025-07-31 21:18:20 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 21:19:14 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:19:14 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:19:14 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:19:14 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:19:14 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:19:14 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:19:14 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:19:14 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:19:14 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:19:14 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:19:14 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:19:14 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 21:19:14 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.5987625122070312e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:19:33.632819'}, 'success': True}
2025-07-31 21:19:14 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:19:14 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:19:15 - managers.commands_server - DEBUG - Request completed in 0.28s with status 200
2025-07-31 21:19:15 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.14643001556396484, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:19:33.917262'}, 'success': True}
2025-07-31 21:19:15 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:19:15 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:19:15 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:19:15 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:19:15 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:19:15 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-07-31 21:19:17 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-07-31 21:19:17 - endpoints.settings - INFO - Request method: POST
2025-07-31 21:19:17 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-07-31 21:19:17 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:19:17 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 21:19:17 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NewWiFiName2'}
2025-07-31 21:19:17 - endpoints.settings - INFO - WiFi name extracted from request: NewWiFiName2
2025-07-31 21:19:17 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:19:17 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:19:17 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NewWiFiName2
2025-07-31 21:19:17 - services.base - INFO - Service operation completed: update_wifi_name
2025-07-31 21:19:17 - services.commands_server_operations.settings_execute - INFO - Updating WiFi SSID to 'NewWiFiName2' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:19:17 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:19:17 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 21:19:17 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00019049644470214844,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:19:36.216481"
  },
  "success": false
}

2025-07-31 21:19:17 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00019049644470214844,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:19:36.216481"
  },
  "success": false
}

2025-07-31 21:19:17 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00019049644470214844,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:19:36.216481"
  },
  "success": false
}

2025-07-31 21:19:17 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00019049644470214844,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:19:36.216481"
  },
  "success": false
}

2025-07-31 21:19:17 - endpoints.settings - WARNING - Service returned error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00019049644470214844,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-07-31T18:19:36.216481"
  },
  "success": false
}

2025-07-31 21:21:12 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-07-31 21:21:12 - endpoints.settings - INFO - Request method: GET
2025-07-31 21:21:12 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:21:12 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:21:12 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:21:12 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:21:12 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-07-31 21:21:12 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:21:12 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 21:21:12 - managers.commands_server - INFO - Checking commands server health
2025-07-31 21:21:12 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 21:21:12 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 21:21:12 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.3855438232421875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T18:21:31.611950'}, 'success': True}
2025-07-31 21:21:12 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 21:21:12 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-07-31 21:21:13 - managers.commands_server - DEBUG - Request completed in 0.30s with status 200
2025-07-31 21:21:13 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.14736390113830566, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-07-31T18:21:31.914590'}, 'success': True}
2025-07-31 21:21:13 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-07-31 21:21:13 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 21:21:13 - services.base - INFO - Service operation completed: get_wifi_name
2025-07-31 21:21:13 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-07-31 21:21:13 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-07-31 21:21:13 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:05:11 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-08-01 09:05:11 - endpoints.settings - INFO - Request method: POST
2025-08-01 09:05:11 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-08-01 09:05:11 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:11 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 09:05:11 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NewWiFiName2'}
2025-08-01 09:05:11 - endpoints.settings - INFO - WiFi name extracted from request: NewWiFiName2
2025-08-01 09:05:11 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:05:11 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:11 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NewWiFiName2
2025-08-01 09:05:11 - services.base - INFO - Service operation completed: update_wifi_name
2025-08-01 09:05:11 - services.commands_server_operations.settings_execute - INFO - Updating WiFi SSID to 'NewWiFiName2' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:05:11 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:05:11 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:05:11 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:05:11 - managers.commands_server - DEBUG - Request completed in 0.21s with status 200
2025-08-01 09:05:11 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0003674030303955078, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:05:30.193173'}, 'success': True}
2025-08-01 09:05:11 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:05:11 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:05:11 - managers.commands_server - DEBUG - Request completed in 0.26s with status 401
2025-08-01 09:05:11 - managers.commands_server - ERROR - Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 0.00027489662170410156,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:30.401038"
  },
  "success": false
}

2025-08-01 09:05:11 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 0.00027489662170410156,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:30.401038"
  },
  "success": false
}

2025-08-01 09:05:11 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 0.00027489662170410156,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:30.401038"
  },
  "success": false
}

2025-08-01 09:05:11 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 0.00027489662170410156,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:30.401038"
  },
  "success": false
}

2025-08-01 09:05:11 - endpoints.settings - WARNING - Service returned error: Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 0.00027489662170410156,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:30.401038"
  },
  "success": false
}

2025-08-01 09:05:14 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:05:14 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:05:14 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:05:14 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:14 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:05:14 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:14 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:14 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:05:14 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:05:14 - managers.commands_server - DEBUG - Request completed in 0.13s with status 401
2025-08-01 09:05:14 - managers.commands_server - ERROR - Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.534027099609375e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:33.065860"
  },
  "success": false
}

2025-08-01 09:05:14 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.534027099609375e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:33.065860"
  },
  "success": false
}

2025-08-01 09:05:14 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.534027099609375e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:33.065860"
  },
  "success": false
}

2025-08-01 09:05:14 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.534027099609375e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:33.065860"
  },
  "success": false
}

2025-08-01 09:05:14 - endpoints.settings - WARNING - Service returned error: Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.534027099609375e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:33.065860"
  },
  "success": false
}

2025-08-01 09:05:15 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:05:15 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:05:15 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:05:15 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:15 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:05:15 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:15 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:15 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:05:15 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:05:16 - managers.commands_server - DEBUG - Request completed in 0.26s with status 401
2025-08-01 09:05:16 - managers.commands_server - ERROR - Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.796287536621094e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:34.829557"
  },
  "success": false
}

2025-08-01 09:05:16 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.796287536621094e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:34.829557"
  },
  "success": false
}

2025-08-01 09:05:16 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.796287536621094e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:34.829557"
  },
  "success": false
}

2025-08-01 09:05:16 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.796287536621094e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:34.829557"
  },
  "success": false
}

2025-08-01 09:05:16 - endpoints.settings - WARNING - Service returned error: Commands server returned 401: {
  "data": null,
  "error": {
    "code": "SESSION_INVALID",
    "details": null,
    "message": "Session is not active or has expired"
  },
  "metadata": {
    "executionTime": 7.796287536621094e-05,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:05:34.829557"
  },
  "success": false
}

2025-08-01 09:05:51 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:05:51 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:05:51 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:05:51 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVvPoloS_Ssdn5vvAzYodDLJoIiigiJ3Xsxmg9wvyk046f8-G0-f7p7kJGce5rV21apVqwrWH4tbHT4LWIZlu_jWPrvw66Jrwufi2x8LiFDYNLe2ysJy8W0xQpr_EEhBB_ulOlFnSpeyq27Ht1YbS03LK6LTxd10Cnq-FaiLYE59G5mcvmJ3QH6t93YJknUbQfAkKb3kKGdj2uvIDNZweSTybml0qvOKqNXkiJXlHqtUPwr8SpJPSWyw8sVdbw3fK4ilMDos8quH2OmEuuJcSRCPq_2N8cbyOO1JaL7YivY7cVTbIae2HHB97pjHDPG4rb3JMa8UEIMzgpvIPQqBqQtXQZe0_c6hleS-CrMA6QOqTUq2QYHYlC01kiZXi6-L8FUnz7C5QawUtWIZElA8s_wVT7BKgOW5r4sk-KlaOB5if4eSc3LQzUmm1ERu5KKtvY28lItrphrKoBjyoO68VLE12jXWmZrGqTpFk2solEsrrDttBzeVKc-QCnW3TU6bAxk6wox5tCgtuWsfuE2NgDKHqmB_HdBU9SdaSl2ap_zyOp2KoPfpoPF0NvVpcoaIw3KGkF-KaE5nIxqUdDuposKcHIGEpUerYvBU6KB1gZV6M8WCpKDjMi4dk8ouGJAdU6dCGtBe6Tya7z36lQeOmqNC7XHP3C-1Dvdv5WRIXMfK5LRKFEOglCljFBH3nbTpvKHw6DUdpBqAk1r6topHNkdF9FrVzunzTq0CcV2ivVQFOhuj_frXLI41ec4Bz8OSns2Sp7mvjuUtMUaC5U23w1nMSGUyWVWMBjWVJ2USSCXNXuo4r8FqXTtvZl7eTuoUcO19MWO1XfCO_8T7kecAD8-WF9CeZ6lJVFr5rGMg8ZXrqNWMc7U4BpkyHeB8aL8eV2B1lrE21UnVzDcW2_uFms-5qJA0w4wv3uQNOqjIs2iVAXXVTFqb99O5NvXOu2JusoS57azMtdl-1hPt8jTYW6Onz2cUkwHW5ZxwOCf6B334-ERKojfFvUu2lJZLG9sQWGTV0CuCzKQtWt1mrJUftrCgTmZmaRY49A6oY3N3WJ8sL0VSXkNT49GU0SdbmbmW0PFyP-f_mzPm6RVSi3VgHZqNfduc79P08Z3MevvvHeRxgD8FxUCUKgrjWVRodcR1TjxgnJc6maQiKq-z4QJ85pfDuFreJjrmudfTY5jr2SNee-9ydZFDt6uOS1Nf3sCLekL-itOVwym-ONwm1JeHMTjE9SNiS8Sxj9c1omm-NJRREAla2g7izRnd4l7xcXUCZFOcrxexpe872Hr90V-aiBMGOyOWidE84lMZ2s-No71iMePI1L3UOXRvvll0-6NMEuF6uhQK1PKxjbbVthi7oiPYOpO05ZTc--JM7cAaTJ4UG2BP5CEjTKN1rl--dOjpSjoKijpIZTdNIlFlrRRTnfBivIukux3V6Pt7H0zVxjpl2Z0fHmSrbe6H8PqQgR0sR2DE1BAfB-vImWIMgr7J2dvBF7ZkPQkadA75uj0UXBuJiSJ3EGn5qtHwv61BVR3i31XctnXz7fNzGIaPqKqiPIR10nygqviEXRt_zt6QlPfqIyxgkn_BRWUSfPmfq-pndU_yEDd8_x9v7fjuug7hE3vOn9YzJ77tp73FsInx8_bGPdbLLsmTPN11pUkaK3CZWcMuwM8UyQKeI2kKMIAjaibte2aVgahAHQppclmwSc-huCWj-hF3H7Cumx8s53aoKltsfjPZGXGq_8-Ib6EwZgBL0FY5z_87miO_v956PPU9CYO_HBg7yi-LWa6-Lu6wSPLxVsJilsuo8hDDVbg-Snos44-4CEscSn76E82BuThpmt82i1296sr2L8I_ePxC-PIbelmVaA4_4UXZn6NlfZwYjo0G46IH-LlOUNs9fz-bPAZ_L8Qn_BQ2EVehY7fW1i7JPzzvHgV62DMyb13FtDhetxf7Wd0mePEFwkK1myTivxp-SaD5Pjv_vReOZ7DFMhy5pAEgGexuq8X3738ezi2ZryFkAPT9EBCQ5TiCQZAkOBBQBORCerkK7xx3Zxbf_wMjIgA6.aIxZPw.wT1JTlwOQ2sBjPW0NYCQiWUqOnE'}
2025-08-01 09:05:51 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:05:51 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:05:51 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021B0BFBC6E0>
2025-08-01 09:05:51 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:51 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:51 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:05:51 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:51 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:05:51 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:05:51 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:05:51 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:05:51 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:05:51 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:05:51 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:05:51 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:05:51 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:05:51 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:05:51 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:05:51 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:05:51 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:51 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:05:51 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:05:51 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:05:51 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:05:51 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-08-01 09:05:51 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.314018249511719e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:06:10.737626'}, 'success': True}
2025-08-01 09:05:51 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:05:51 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:05:52 - managers.commands_server - DEBUG - Request completed in 0.46s with status 500
2025-08-01 09:05:52 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.306865930557251,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:11.202498"
  },
  "success": false
}

2025-08-01 09:05:52 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.306865930557251,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:11.202498"
  },
  "success": false
}

2025-08-01 09:05:52 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.306865930557251,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:11.202498"
  },
  "success": false
}

2025-08-01 09:05:52 - services.commands_server_operations.session_execute - ERROR - Session start failed for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.306865930557251,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:11.202498"
  },
  "success": false
}

2025-08-01 09:05:52 - services.base - ERROR - Service operation failed: start_session - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.306865930557251,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:11.202498"
  },
  "success": false
}

2025-08-01 09:05:52 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:52 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:05:52 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:05:52 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:05:52 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007836818695068359,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:11.508327"
  },
  "success": false
}

2025-08-01 09:05:52 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007836818695068359,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:11.508327"
  },
  "success": false
}

2025-08-01 09:05:52 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007836818695068359,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:11.508327"
  },
  "success": false
}

2025-08-01 09:05:52 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-08-01 09:05:52 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:05:53 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:53 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:05:53 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:05:54 - managers.commands_server - DEBUG - Request completed in 0.17s with status 500
2025-08-01 09:05:54 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.03344440460205078,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:12.854954"
  },
  "success": false
}

2025-08-01 09:05:54 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.03344440460205078,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:12.854954"
  },
  "success": false
}

2025-08-01 09:05:54 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.03344440460205078,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:12.854954"
  },
  "success": false
}

2025-08-01 09:05:54 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:05:54 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:05:54 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:05:54 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVvPoloS_Ssdn5vvAzYodDLJoIiigiJ3Xsxmg9wvyk046f8-G0-f7p7kJGce5rV21apVqwrWH4tbHT4LWIZlu_jWPrvw66Jrwufi2x8LiFDYNLe2ysJy8W0xQpr_EEhBB_ulOlFnSpeyq27Ht1YbS03LK6LTxd10Cnq-FaiLYE59G5mcvmJ3QH6t93YJknUbQfAkKb3kKGdj2uvIDNZweSTybml0qvOKqNXkiJXlHqtUPwr8SpJPSWyw8sVdbw3fK4ilMDos8quH2OmEuuJcSRCPq_2N8cbyOO1JaL7YivY7cVTbIae2HHB97pjHDPG4rb3JMa8UEIMzgpvIPQqBqQtXQZe0_c6hleS-CrMA6QOqTUq2QYHYlC01kiZXi6-L8FUnz7C5QawUtWIZElA8s_wVT7BKgOW5r4sk-KlaOB5if4eSc3LQzUmm1ERu5KKtvY28lItrphrKoBjyoO68VLE12jXWmZrGqTpFk2solEsrrDttBzeVKc-QCnW3TU6bAxk6wox5tCgtuWsfuE2NgDKHqmB_HdBU9SdaSl2ap_zyOp2KoPfpoPF0NvVpcoaIw3KGkF-KaE5nIxqUdDuposKcHIGEpUerYvBU6KB1gZV6M8WCpKDjMi4dk8ouGJAdU6dCGtBe6Tya7z36lQeOmqNC7XHP3C-1Dvdv5WRIXMfK5LRKFEOglCljFBH3nbTpvKHw6DUdpBqAk1r6topHNkdF9FrVzunzTq0CcV2ivVQFOhuj_frXLI41ec4Bz8OSns2Sp7mvjuUtMUaC5U23w1nMSGUyWVWMBjWVJ2USSCXNXuo4r8FqXTtvZl7eTuoUcO19MWO1XfCO_8T7kecAD8-WF9CeZ6lJVFr5rGMg8ZXrqNWMc7U4BpkyHeB8aL8eV2B1lrE21UnVzDcW2_uFms-5qJA0w4wv3uQNOqjIs2iVAXXVTFqb99O5NvXOu2JusoS57azMtdl-1hPt8jTYW6Onz2cUkwHW5ZxwOCf6B334-ERKojfFvUu2lJZLG9sQWGTV0CuCzKQtWt1mrJUftrCgTmZmaRY49A6oY3N3WJ8sL0VSXkNT49GU0SdbmbmW0PFyP-f_mzPm6RVSi3VgHZqNfduc79P08Z3MevvvHeRxgD8FxUCUKgrjWVRodcR1TjxgnJc6maQiKq-z4QJ85pfDuFreJjrmudfTY5jr2SNee-9ydZFDt6uOS1Nf3sCLekL-itOVwym-ONwm1JeHMTjE9SNiS8Sxj9c1omm-NJRREAla2g7izRnd4l7xcXUCZFOcrxexpe872Hr90V-aiBMGOyOWidE84lMZ2s-No71iMePI1L3UOXRvvll0-6NMEuF6uhQK1PKxjbbVthi7oiPYOpO05ZTc--JM7cAaTJ4UG2BP5CEjTKN1rl--dOjpSjoKijpIZTdNIlFlrRRTnfBivIukux3V6Pt7H0zVxjpl2Z0fHmSrbe6H8PqQgR0sR2DE1BAfB-vImWIMgr7J2dvBF7ZkPQkadA75uj0UXBuJiSJ3EGn5qtHwv61BVR3i31XctnXz7fNzGIaPqKqiPIR10nygqviEXRt_zt6QlPfqIyxgkn_BRWUSfPmfq-pndU_yEDd8_x9v7fjuug7hE3vOn9YzJ77tp73FsInx8_bGPdbLLsmTPN11pUkaK3CZWcMuwM8UyQKeI2kKMIAjaibte2aVgahAHQppclmwSc-huCWj-hF3H7Cumx8s53aoKltsfjPZGXGq_8-Ib6EwZgBL0FY5z_87miO_v956PPU9CYO_HBg7yi-LWa6-Lu6wSPLxVsJilsuo8hDDVbg-Snos44-4CEscSn76E82BuThpmt82i1296sr2L8I_ePxC-PIbelmVaA4_4UXZn6NlfZwYjo0G46IH-LlOUNs9fz-bPAZ_L8Qn_BQ2EVehY7fW1i7JPzzvHgV62DMyb13FtDhetxf7Wd0mePEFwkK1myTivxp-SaD5Pjv_vReOZ7DFMhy5pAEgGexuq8X3738ezi2ZryFkAPT9EBCQ5TiCQZAkOBBQBORCerkK7xx3Zxbf_wMjIgA6.aIxZQg.1pOsJ1T_JuiXo3mB8WioAgc0omk'}
2025-08-01 09:05:54 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:05:54 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:05:54 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021B0BFBCE60>
2025-08-01 09:05:54 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:54 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:54 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:05:54 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:05:54 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:05:54 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:05:54 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:05:54 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:05:54 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:05:54 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:05:54 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:05:54 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:05:54 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:05:54 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:05:54 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:05:54 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:06:17 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:17 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:06:17 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:06:17 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-08-01 09:06:17 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007478237152099609,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:36.241111"
  },
  "success": false
}

2025-08-01 09:06:17 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007478237152099609,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:36.241111"
  },
  "success": false
}

2025-08-01 09:06:17 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007478237152099609,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:36.241111"
  },
  "success": false
}

2025-08-01 09:06:17 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:06:17 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:06:17 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:06:17 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVvPoloS_Ssdn5vvAzYodDLJoIiigiJ3Xsxmg9wvyk046f8-G0-f7p7kJGce5rV21apVqwrWH4tbHT4LWIZlu_jWPrvw66Jrwufi2x8LiFDYNLe2ysJy8W0xQpr_EEhBB_ulOlFnSpeyq27Ht1YbS03LK6LTxd10Cnq-FaiLYE59G5mcvmJ3QH6t93YJknUbQfAkKb3kKGdj2uvIDNZweSTybml0qvOKqNXkiJXlHqtUPwr8SpJPSWyw8sVdbw3fK4ilMDos8quH2OmEuuJcSRCPq_2N8cbyOO1JaL7YivY7cVTbIae2HHB97pjHDPG4rb3JMa8UEIMzgpvIPQqBqQtXQZe0_c6hleS-CrMA6QOqTUq2QYHYlC01kiZXi6-L8FUnz7C5QawUtWIZElA8s_wVT7BKgOW5r4sk-KlaOB5if4eSc3LQzUmm1ERu5KKtvY28lItrphrKoBjyoO68VLE12jXWmZrGqTpFk2solEsrrDttBzeVKc-QCnW3TU6bAxk6wox5tCgtuWsfuE2NgDKHqmB_HdBU9SdaSl2ap_zyOp2KoPfpoPF0NvVpcoaIw3KGkF-KaE5nIxqUdDuposKcHIGEpUerYvBU6KB1gZV6M8WCpKDjMi4dk8ouGJAdU6dCGtBe6Tya7z36lQeOmqNC7XHP3C-1Dvdv5WRIXMfK5LRKFEOglCljFBH3nbTpvKHw6DUdpBqAk1r6topHNkdF9FrVzunzTq0CcV2ivVQFOhuj_frXLI41ec4Bz8OSns2Sp7mvjuUtMUaC5U23w1nMSGUyWVWMBjWVJ2USSCXNXuo4r8FqXTtvZl7eTuoUcO19MWO1XfCO_8T7kecAD8-WF9CeZ6lJVFr5rGMg8ZXrqNWMc7U4BpkyHeB8aL8eV2B1lrE21UnVzDcW2_uFms-5qJA0w4wv3uQNOqjIs2iVAXXVTFqb99O5NvXOu2JusoS57azMtdl-1hPt8jTYW6Onz2cUkwHW5ZxwOCf6B334-ERKojfFvUu2lJZLG9sQWGTV0CuCzKQtWt1mrJUftrCgTmZmaRY49A6oY3N3WJ8sL0VSXkNT49GU0SdbmbmW0PFyP-f_mzPm6RVSi3VgHZqNfduc79P08Z3MevvvHeRxgD8FxUCUKgrjWVRodcR1TjxgnJc6maQiKq-z4QJ85pfDuFreJjrmudfTY5jr2SNee-9ydZFDt6uOS1Nf3sCLekL-itOVwym-ONwm1JeHMTjE9SNiS8Sxj9c1omm-NJRREAla2g7izRnd4l7xcXUCZFOcrxexpe872Hr90V-aiBMGOyOWidE84lMZ2s-No71iMePI1L3UOXRvvll0-6NMEuF6uhQK1PKxjbbVthi7oiPYOpO05ZTc--JM7cAaTJ4UG2BP5CEjTKN1rl--dOjpSjoKijpIZTdNIlFlrRRTnfBivIukux3V6Pt7H0zVxjpl2Z0fHmSrbe6H8PqQgR0sR2DE1BAfB-vImWIMgr7J2dvBF7ZkPQkadA75uj0UXBuJiSJ3EGn5qtHwv61BVR3i31XctnXz7fNzGIaPqKqiPIR10nygqviEXRt_zt6QlPfqIyxgkn_BRWUSfPmfq-pndU_yEDd8_x9v7fjuug7hE3vOn9YzJ77tp73FsInx8_bGPdbLLsmTPN11pUkaK3CZWcMuwM8UyQKeI2kKMIAjaibte2aVgahAHQppclmwSc-huCWj-hF3H7Cumx8s53aoKltsfjPZGXGq_8-Ib6EwZgBL0FY5z_87miO_v956PPU9CYO_HBg7yi-LWa6-Lu6wSPLxVsJilsuo8hDDVbg-Snos44-4CEscSn76E82BuThpmt82i1296sr2L8I_ePxC-PIbelmVaA4_4UXZn6NlfZwYjo0G46IH-LlOUNs9fz-bPAZ_L8Qn_BQ2EVehY7fW1i7JPzzvHgV62DMyb13FtDhetxf7Wd0mePEFwkK1myTivxp-SaD5Pjv_vReOZ7DFMhy5pAEgGexuq8X3738ezi2ZryFkAPT9EBCQ5TiCQZAkOBBQBORCerkK7xx3Zxbf_wMjIgA6.aIxZWQ.g13lCcYTKlUxVcOu-CZ1hppqBns'}
2025-08-01 09:06:17 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:06:17 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:06:17 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021B0BFBD130>
2025-08-01 09:06:17 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:17 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:17 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:06:17 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:17 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:06:17 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:06:17 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:06:17 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:06:17 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:06:17 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:06:17 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:06:17 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:06:17 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:06:17 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:06:17 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:06:17 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:06:17 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:06:17 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:06:17 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:06:17 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVvPoloS_Ssdn5vvAzYodDLJoIiigiJ3Xsxmg9wvyk046f8-G0-f7p7kJGce5rV21apVqwrWH4tbHT4LWIZlu_jWPrvw66Jrwufi2x8LiFDYNLe2ysJy8W0xQpr_EEhBB_ulOlFnSpeyq27Ht1YbS03LK6LTxd10Cnq-FaiLYE59G5mcvmJ3QH6t93YJknUbQfAkKb3kKGdj2uvIDNZweSTybml0qvOKqNXkiJXlHqtUPwr8SpJPSWyw8sVdbw3fK4ilMDos8quH2OmEuuJcSRCPq_2N8cbyOO1JaL7YivY7cVTbIae2HHB97pjHDPG4rb3JMa8UEIMzgpvIPQqBqQtXQZe0_c6hleS-CrMA6QOqTUq2QYHYlC01kiZXi6-L8FUnz7C5QawUtWIZElA8s_wVT7BKgOW5r4sk-KlaOB5if4eSc3LQzUmm1ERu5KKtvY28lItrphrKoBjyoO68VLE12jXWmZrGqTpFk2solEsrrDttBzeVKc-QCnW3TU6bAxk6wox5tCgtuWsfuE2NgDKHqmB_HdBU9SdaSl2ap_zyOp2KoPfpoPF0NvVpcoaIw3KGkF-KaE5nIxqUdDuposKcHIGEpUerYvBU6KB1gZV6M8WCpKDjMi4dk8ouGJAdU6dCGtBe6Tya7z36lQeOmqNC7XHP3C-1Dvdv5WRIXMfK5LRKFEOglCljFBH3nbTpvKHw6DUdpBqAk1r6topHNkdF9FrVzunzTq0CcV2ivVQFOhuj_frXLI41ec4Bz8OSns2Sp7mvjuUtMUaC5U23w1nMSGUyWVWMBjWVJ2USSCXNXuo4r8FqXTtvZl7eTuoUcO19MWO1XfCO_8T7kecAD8-WF9CeZ6lJVFr5rGMg8ZXrqNWMc7U4BpkyHeB8aL8eV2B1lrE21UnVzDcW2_uFms-5qJA0w4wv3uQNOqjIs2iVAXXVTFqb99O5NvXOu2JusoS57azMtdl-1hPt8jTYW6Onz2cUkwHW5ZxwOCf6B334-ERKojfFvUu2lJZLG9sQWGTV0CuCzKQtWt1mrJUftrCgTmZmaRY49A6oY3N3WJ8sL0VSXkNT49GU0SdbmbmW0PFyP-f_mzPm6RVSi3VgHZqNfduc79P08Z3MevvvHeRxgD8FxUCUKgrjWVRodcR1TjxgnJc6maQiKq-z4QJ85pfDuFreJjrmudfTY5jr2SNee-9ydZFDt6uOS1Nf3sCLekL-itOVwym-ONwm1JeHMTjE9SNiS8Sxj9c1omm-NJRREAla2g7izRnd4l7xcXUCZFOcrxexpe872Hr90V-aiBMGOyOWidE84lMZ2s-No71iMePI1L3UOXRvvll0-6NMEuF6uhQK1PKxjbbVthi7oiPYOpO05ZTc--JM7cAaTJ4UG2BP5CEjTKN1rl--dOjpSjoKijpIZTdNIlFlrRRTnfBivIukux3V6Pt7H0zVxjpl2Z0fHmSrbe6H8PqQgR0sR2DE1BAfB-vImWIMgr7J2dvBF7ZkPQkadA75uj0UXBuJiSJ3EGn5qtHwv61BVR3i31XctnXz7fNzGIaPqKqiPIR10nygqviEXRt_zt6QlPfqIyxgkn_BRWUSfPmfq-pndU_yEDd8_x9v7fjuug7hE3vOn9YzJ77tp73FsInx8_bGPdbLLsmTPN11pUkaK3CZWcMuwM8UyQKeI2kKMIAjaibte2aVgahAHQppclmwSc-huCWj-hF3H7Cumx8s53aoKltsfjPZGXGq_8-Ib6EwZgBL0FY5z_87miO_v956PPU9CYO_HBg7yi-LWa6-Lu6wSPLxVsJilsuo8hDDVbg-Snos44-4CEscSn76E82BuThpmt82i1296sr2L8I_ePxC-PIbelmVaA4_4UXZn6NlfZwYjo0G46IH-LlOUNs9fz-bPAZ_L8Qn_BQ2EVehY7fW1i7JPzzvHgV62DMyb13FtDhetxf7Wd0mePEFwkK1myTivxp-SaD5Pjv_vReOZ7DFMhy5pAEgGexuq8X3738ezi2ZryFkAPT9EBCQ5TiCQZAkOBBQBORCerkK7xx3Zxbf_wMjIgA6.aIxZWQ.g13lCcYTKlUxVcOu-CZ1hppqBns'}
2025-08-01 09:06:17 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:06:17 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:06:17 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000021B0BFBD220>
2025-08-01 09:06:17 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:17 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:17 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:06:17 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:17 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:06:17 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:06:17 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:06:18 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:06:18 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:06:18 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:06:18 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:06:18 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:06:18 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:06:18 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:06:18 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:06:18 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:06:18 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:18 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:06:18 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:06:18 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:06:18 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00104522705078125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:37.448059"
  },
  "success": false
}

2025-08-01 09:06:18 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00104522705078125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:37.448059"
  },
  "success": false
}

2025-08-01 09:06:18 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00104522705078125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:37.448059"
  },
  "success": false
}

2025-08-01 09:06:18 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-08-01 09:06:18 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:06:18 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:18 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:06:18 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:06:19 - managers.commands_server - DEBUG - Request completed in 0.24s with status 500
2025-08-01 09:06:19 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.0070343017578125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:37.833243"
  },
  "success": false
}

2025-08-01 09:06:19 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.0070343017578125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:37.833243"
  },
  "success": false
}

2025-08-01 09:06:19 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.0070343017578125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:37.833243"
  },
  "success": false
}

2025-08-01 09:06:20 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:06:20 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:06:20 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:06:20 - managers.commands_server - DEBUG - Request completed in 0.17s with status 500
2025-08-01 09:06:20 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007057666778564453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:39.179075"
  },
  "success": false
}

2025-08-01 09:06:20 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007057666778564453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:39.179075"
  },
  "success": false
}

2025-08-01 09:06:20 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007057666778564453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:06:39.179075"
  },
  "success": false
}

2025-08-01 09:07:13 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:13 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:07:13 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:07:13 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:07:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:07:13 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-08-01 09:07:13 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.5987625122070312e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:07:32.474025'}, 'success': True}
2025-08-01 09:07:13 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:07:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:07:13 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-08-01 09:07:13 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007003307342529297,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:07:32.635965"
  },
  "success": false
}

2025-08-01 09:07:13 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007003307342529297,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:07:32.635965"
  },
  "success": false
}

2025-08-01 09:07:13 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007003307342529297,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:07:32.635965"
  },
  "success": false
}

2025-08-01 09:07:22 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:07:25 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:07:39 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:07:39 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:07:39 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:07:39 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gW_JWSn8v3JpuNSxppbGMwmMQXm_0FsZPsZrOhVf8-ye3qqhqppZ6HeT15iIgTecj4Y-U2UVt6VVT1q299O0RfV0MXtatvf6y8IIi6zu3rPKpW31aTR-7e9mB_p84b5cU0NDhROzCAdK4tyPFpufMLMJ128rxxB_8cQ9LKmHEg2-HxqrWt-XAOsTiC-1lLUvG0KeZmG6sbkBYMy43j5WjLWgbkBPJ9a24vujeaJctDXgCPD-WjVa7NKM-RVnjJRUazC4EibdN72HBhK6Z3IG3cTmbjODqUObsxtK6TTjy66cHAOagewYb3dUFo3XYrPz9uUf_wjol92evwvr_t77x6FiwSokK5Kq39EGGapQZMh33mc8QekGC7-rqKXg1qo871sFPElqEBRQKG_lVH2CWK2bFfVyj86Vo0SakvBOiKpLs-i4SCxE4s-8Y5ihuxvOWKBp9QE5-K4GTQVElbO-RKlmbKnMy2BgmbhIw9n552JhKOxpeKcELyUQKRtV8wLwaholh9wzRNQMGlVIfn2zOY61Em-cwmd4Rf3Wa5DEefDDvnzmQ-CRaINKoWCPEFOX2-askTZqdZ4SAtW3vgVQ6pYGshGfY2ZWTOIrEEhGfZtE2mAArhMzBTQi75Z3CGg0PuRod8FaGlFEGpjJiz8Ct1wPy9iJ7ItoxczGoEtT0B55yGHOad1fl6JPDoDRlmKuXNSuWbCh5ZnyDn9IpZkFdBqUPuUAVnvg7vTBqcD79msYzZsSQ8DwMckwHywnvH9lYYA2F7s9PzyuUAzjqjcMlTycQZznsAs_ylTMs1GL1tFt2iyxH4AVK30edyRhXCz_pPvB99FuXg2YrSM5dZGhBURrH4GPK72raUesG5F6l3I6VLACTaEV4H3yRKlXydNJ63w09OZvRLpVh6DaKoDV66app0CoWbpeThzTMcM6js5X4G2yQ--25Ym8hjbYKR2yYzLn4GQpGFZ2Ny7ssapSDEvlwRi3uSf_Bnl8qA55w5HW3QE2rBH01tzwRG4zllmOukQSqnnDEK6eSVhKznhmpQ0mhRTaoL0kE2nCzgi8bT1V0w56RswkVr5VlO4Re7_9aMdTol33vmi7FIJvVNfdlP3cd7svjtf_pRpCH-FaAWEAq3n66cSil3_J2VPjHOS5l1ADmI9yEg8Jpb_JG_0k3gqpYQ29KWvF_QZKObcdyeNwyaTG_jpVvig27aC6P0vsqekA0vqoSojyi_3Tn9MEcXQqaKjaBY4vzYyWUa5olDT8qtNO15ntg2EGbUuLmDQGy3qafqZUNaIW1xl7PaXGBkTnnJESJirNikSPp-dYStgBhHuNniyTlQx6c-k2m9bk76K69jVyy27nkqtmtdB9kxfRySzSbh9EAN2qOR0Xx5e6QO0Rkup3eFiF81YiKSU05O59hTHjJZpc-tCMyGjCTIP66QO9qveC0BfwvvGiF0pYI9EorAHk4S99iAitqyL7HQxd62xsdlIKcBvCYjc9eGus_nl3b6uBdnmE7u9SKQZfjEb1sX1E2En6u075vu2_v78_l8S-o6KSKvQd1bUJfv3tCn70s2oCqu36LSQ8WX_7m9aesYFdEXzFKhEBN-vo9uP32yHiKvxZnzZ_Qs_Z_x07up16X4WLIcwZe6wyss9mUZHwtOVq1FtTeE-JgADLVjAUlQNMWuGzobR3qbU0kZDEFEgk3JoJEN0h4kzSMd3rym6X6IXeiCuupx-C2aF8S5-T8jfhqFMUOvovq62O3-nSyV30_dEU8doyj8K4FxovyKmC3zdRV7JSomt_LKxS6tLiIMV-PvEzRiG3_UOa_CJfQzn0iWXj5GXffbzeJUr4eq_0vwDx2_EL78hl7VVbCUTTvVbgokuT40N4KKDKMd8XGDgn5of1-bIqX-3oh3731_TNg6uAwH9WCD3cNx4iS8RyMt7owbl5WX2-nDbGt39j78_doIGhsh7l_dbrMOlv0c_M97YXc0jliaBRuSogCN0227-v79z8Vx0bINEU15vh9Ra49h2TUdeGDNUiGx9tiI3GyjmGVjevX9P95lAC4.aIxZqw.rc32KjniwfJzZvO4F9cPHXeit-M'}
2025-08-01 09:07:39 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:07:39 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:07:39 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x000002360222CC00>
2025-08-01 09:07:39 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:39 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:39 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:07:39 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:39 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:07:39 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:07:39 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:07:39 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:07:39 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:07:39 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:07:39 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:07:39 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:07:39 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:07:39 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:07:39 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:07:39 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:07:40 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:40 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:07:40 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:07:40 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:07:40 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:07:40 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-08-01 09:07:40 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.2172927856445312e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:07:59.156992'}, 'success': True}
2025-08-01 09:07:40 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:07:40 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:07:40 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-08-01 09:07:40 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007827281951904297,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:07:59.312703"
  },
  "success": false
}

2025-08-01 09:07:40 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007827281951904297,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:07:59.312703"
  },
  "success": false
}

2025-08-01 09:07:40 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007827281951904297,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:07:59.312703"
  },
  "success": false
}

2025-08-01 09:07:40 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-08-01 09:07:40 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:07:41 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:41 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:07:41 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:07:41 - managers.commands_server - DEBUG - Request completed in 0.56s with status 500
2025-08-01 09:07:41 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007002830505371094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:08:00.344551"
  },
  "success": false
}

2025-08-01 09:07:41 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007002830505371094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:08:00.344551"
  },
  "success": false
}

2025-08-01 09:07:41 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007002830505371094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:08:00.344551"
  },
  "success": false
}

2025-08-01 09:07:42 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:07:42 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:07:42 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:07:42 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gW_JWSn8v3JpuNSxppbGMwmMQXm_0FsZPsZrOhVf8-ye3qqhqppZ6HeT15iIgTecj4Y-U2UVt6VVT1q299O0RfV0MXtatvf6y8IIi6zu3rPKpW31aTR-7e9mB_p84b5cU0NDhROzCAdK4tyPFpufMLMJ128rxxB_8cQ9LKmHEg2-HxqrWt-XAOsTiC-1lLUvG0KeZmG6sbkBYMy43j5WjLWgbkBPJ9a24vujeaJctDXgCPD-WjVa7NKM-RVnjJRUazC4EibdN72HBhK6Z3IG3cTmbjODqUObsxtK6TTjy66cHAOagewYb3dUFo3XYrPz9uUf_wjol92evwvr_t77x6FiwSokK5Kq39EGGapQZMh33mc8QekGC7-rqKXg1qo871sFPElqEBRQKG_lVH2CWK2bFfVyj86Vo0SakvBOiKpLs-i4SCxE4s-8Y5ihuxvOWKBp9QE5-K4GTQVElbO-RKlmbKnMy2BgmbhIw9n552JhKOxpeKcELyUQKRtV8wLwaholh9wzRNQMGlVIfn2zOY61Em-cwmd4Rf3Wa5DEefDDvnzmQ-CRaINKoWCPEFOX2-askTZqdZ4SAtW3vgVQ6pYGshGfY2ZWTOIrEEhGfZtE2mAArhMzBTQi75Z3CGg0PuRod8FaGlFEGpjJiz8Ct1wPy9iJ7ItoxczGoEtT0B55yGHOad1fl6JPDoDRlmKuXNSuWbCh5ZnyDn9IpZkFdBqUPuUAVnvg7vTBqcD79msYzZsSQ8DwMckwHywnvH9lYYA2F7s9PzyuUAzjqjcMlTycQZznsAs_ylTMs1GL1tFt2iyxH4AVK30edyRhXCz_pPvB99FuXg2YrSM5dZGhBURrH4GPK72raUesG5F6l3I6VLACTaEV4H3yRKlXydNJ63w09OZvRLpVh6DaKoDV66app0CoWbpeThzTMcM6js5X4G2yQ--25Ym8hjbYKR2yYzLn4GQpGFZ2Ny7ssapSDEvlwRi3uSf_Bnl8qA55w5HW3QE2rBH01tzwRG4zllmOukQSqnnDEK6eSVhKznhmpQ0mhRTaoL0kE2nCzgi8bT1V0w56RswkVr5VlO4Re7_9aMdTol33vmi7FIJvVNfdlP3cd7svjtf_pRpCH-FaAWEAq3n66cSil3_J2VPjHOS5l1ADmI9yEg8Jpb_JG_0k3gqpYQ29KWvF_QZKObcdyeNwyaTG_jpVvig27aC6P0vsqekA0vqoSojyi_3Tn9MEcXQqaKjaBY4vzYyWUa5olDT8qtNO15ntg2EGbUuLmDQGy3qafqZUNaIW1xl7PaXGBkTnnJESJirNikSPp-dYStgBhHuNniyTlQx6c-k2m9bk76K69jVyy27nkqtmtdB9kxfRySzSbh9EAN2qOR0Xx5e6QO0Rkup3eFiF81YiKSU05O59hTHjJZpc-tCMyGjCTIP66QO9qveC0BfwvvGiF0pYI9EorAHk4S99iAitqyL7HQxd62xsdlIKcBvCYjc9eGus_nl3b6uBdnmE7u9SKQZfjEb1sX1E2En6u075vu2_v78_l8S-o6KSKvQd1bUJfv3tCn70s2oCqu36LSQ8WX_7m9aesYFdEXzFKhEBN-vo9uP32yHiKvxZnzZ_Qs_Z_x07up16X4WLIcwZe6wyss9mUZHwtOVq1FtTeE-JgADLVjAUlQNMWuGzobR3qbU0kZDEFEgk3JoJEN0h4kzSMd3rym6X6IXeiCuupx-C2aF8S5-T8jfhqFMUOvovq62O3-nSyV30_dEU8doyj8K4FxovyKmC3zdRV7JSomt_LKxS6tLiIMV-PvEzRiG3_UOa_CJfQzn0iWXj5GXffbzeJUr4eq_0vwDx2_EL78hl7VVbCUTTvVbgokuT40N4KKDKMd8XGDgn5of1-bIqX-3oh3731_TNg6uAwH9WCD3cNx4iS8RyMt7owbl5WX2-nDbGt39j78_doIGhsh7l_dbrMOlv0c_M97YXc0jliaBRuSogCN0227-v79z8Vx0bINEU15vh9Ra49h2TUdeGDNUiGx9tiI3GyjmGVjevX9P95lAC4.aIxZrA.3S-dAWW9XrQtYPm0UFF_47pvtkY'}
2025-08-01 09:07:42 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:07:42 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:07:42 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000236023BD310>
2025-08-01 09:07:42 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:42 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:42 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:07:42 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:42 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:07:42 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:07:42 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:07:42 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:07:42 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:07:42 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:07:42 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:07:42 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:07:42 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:07:42 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:07:42 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:07:42 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:07:58 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:07:58 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:07:58 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:07:58 - managers.commands_server - DEBUG - Request completed in 0.24s with status 500
2025-08-01 09:07:58 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006206512451171875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:08:17.368234"
  },
  "success": false
}

2025-08-01 09:07:58 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006206512451171875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:08:17.368234"
  },
  "success": false
}

2025-08-01 09:07:58 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006206512451171875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:08:17.368234"
  },
  "success": false
}

2025-08-01 09:10:23 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:23 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:10:23 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:10:23 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:10:23 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:10:23 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:10:23 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.361701965332031e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:10:42.682144'}, 'success': True}
2025-08-01 09:10:23 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:10:23 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:10:24 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-08-01 09:10:24 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008598566055297852,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:42.837976"
  },
  "success": false
}

2025-08-01 09:10:24 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008598566055297852,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:42.837976"
  },
  "success": false
}

2025-08-01 09:10:24 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008598566055297852,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:42.837976"
  },
  "success": false
}

2025-08-01 09:10:26 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:26 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:10:26 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:10:26 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-08-01 09:10:26 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006182193756103516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:45.084427"
  },
  "success": false
}

2025-08-01 09:10:26 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006182193756103516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:45.084427"
  },
  "success": false
}

2025-08-01 09:10:26 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006182193756103516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:45.084427"
  },
  "success": false
}

2025-08-01 09:10:37 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:10:37 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:10:37 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:10:37 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuq0gS_ZWS18_3JqPhSS01NmCwARtsxg1KBjMPNpNN6f17J643tVRS9aI3LCIjT5w4EeT5c-W38aOCdVz3q6_9Y4i_rIYufqy-_rmCYRh3nd83RVyvvq5eEGc_OMBdCInWXjpre7YXr_NYPBlH5yTvxUERHHPLnXbaQ5-6iNlyB_DYy-nViBuWcXQ27o7ysx4NqF46o08b1grmPbt-HtjupFBj2Klm7Fn-cfSVnKHxQipKmDfD7ak9TkUqYDmzM-Zq7VmmJJ1Dj0-FNuaZphecUVrfM_XMkaZZPQWsbQvSvA-kFN-gQJ4T_8A0RSkfjdRT2nG0bs79DHeJe-Qu04UzuIuoS3sHVzN8I1Oh1Bpr7nLI-6xvg7hPE4CDzerLKn622SPufIiUwjYUCQgcJ4hf8QypRFAs82WVRT9Vi1-HNNiH2Sk7XMxZxrRM7uSqb72dTMuVUWhXdVKv8qTtvVy1ddy9bgstT3NtTmb3qmIurlLuLExuLmPeVay0vZApuwOIHW7BPFqYnt30D1SmDQl1CTWRZEzh3IwKLuYuzmJBbcxKFY0BHnXehcoDHCwQaVwvEPJT5c35dE0mNRdmjVdJxeEArD1c46OHike9S1i5t1CsAAYdl3TxFKj7aArtFFMqcQoldfBwdvTwZxk5WhlW2ohqlkGtD6h-L2dT5jpWIedNpl45TJ0LUuVR3VmfTzsMtd7iUa4TcNbqwNZQy-ZL5b1es0v8tNeaiN_WoSQ20YVKQ2n7qxfHmj3ngPqhgGdTQFnqXpC8NcLIkLy5MJ34AqizSWl8Mmm5PKszB9S8eGqvZQxW79plt_Dy0PqqhDEGfEHp--gd_4n3Pc8hPNRbWUF76aUFYW2Vi46RyDauozULTlhEdCj00NiBKbZEaMxFfxUP5GkPqOhdkxqDSiuXXEs8XF00IdQfHYBSDMRtc7Us4mK_5zO4NvbOMxA3WUTc9lbh2tS46BnuyzySrJd3WdYoBRHS5ZQxKCf5B33YVAEi783p6IIe00txZ185KrRa6FVRYeIWrgkFZZUHAVaYYhaWbhGH0SHa1Nwftorl5aFYttDU2XAucMVWF641dLwyKNn_5ox4epXYQ_tJOTiVBra57KcZoD1Z9A7eepRphH4F9RpiGs-9TryLaTt0z0knhPPUZhOovPpScxOgNe_2Rd9BGn9JD4y60GdJNOaWYF45HW9PfSXqxlX0qX2jXKsNUCUivqm9b9dHikSsGcYKnsJD8vEH2Wh4tDtPUpWZ8WQEEAM1760ZMFCgzfpBGUegz7xN1SIAHOiMcKfP5WwqegZIU7fDrX9kdxuaq3zPhUlgUKhtQQH4oCuC4rsb_gz8BmIkFUSzz8yUFnfU0dbSZ-7eXeoCt1LQ93N4JBNcvV8Pfp7dn0QzcBY2rNnryJwonxLvkkBvE6dLDCp0Rm7XJPvBMI4tCccnf4FH2jrjGqyLgMKqsmxSp5CO92m7e-aNPJg4lVhm5eHpo5kkJtlEz1fUJSnpre_oN_A3Z9LCqFxUaB29bV3YtDF6rtC3zqI_0r5vu6-fn9M0fSRNk5QxbLPuI2yqTzj06ediEVl9az7iCmbl_57ePppbVsao4Pt99PvXu-o2hg_kOX9Zz5L4tp_eT2GXouPHfm6PHr8GL91DfqEYT6ZiJ5QOhwgdY4AiWAbgGEESzLol83EkNwWRVOEQxjigKyobmTDtQdLe0-EDtm33neVSLmzqHpnfQnZBnNv_M-JbIYQZwZrom5Jl_50skd9P_RF1fcvi6IcDI0f5ZTEU-WV1g1VWvvwaVotc16aMEVyD7ifZiGT8HudhjULZT3_CGXq5nHUdOvwxI-TqzVD3Pwh_5_EL4Y_f0OumDt8FjUtA0z2YG1koz6lqTvJyqc3CfnjEv4GXKfH3QnzCT26XME14HLb61gXs3fNuSXSJR1JmLYPPq6MhnO1H48_wHHBrK2zdLOP_1bH0Olz2cwjec2FYElksyQAaWS8gkbttVt--_bU4frZsQ0wSMAhiYg0phlmTIQRrhoiwNWRinN7EN4a5katv_wHuyf8W.aIxaXQ.MXy1IV6svkw1ERtFoBuse__pXxQ'}
2025-08-01 09:10:37 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:10:37 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:10:37 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000236023BEE40>
2025-08-01 09:10:37 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:37 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:37 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:10:37 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:37 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:10:37 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:10:37 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:10:37 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:10:37 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:10:37 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:10:37 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:10:37 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:10:37 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:10:37 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:10:37 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:10:37 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:10:38 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:38 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:10:38 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:10:38 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:10:38 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001035451889038086,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.078084"
  },
  "success": false
}

2025-08-01 09:10:38 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001035451889038086,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.078084"
  },
  "success": false
}

2025-08-01 09:10:38 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001035451889038086,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.078084"
  },
  "success": false
}

2025-08-01 09:10:38 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-08-01 09:10:38 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:10:38 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:38 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:10:38 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:10:38 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-08-01 09:10:38 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008866786956787109,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.285335"
  },
  "success": false
}

2025-08-01 09:10:38 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008866786956787109,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.285335"
  },
  "success": false
}

2025-08-01 09:10:38 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008866786956787109,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.285335"
  },
  "success": false
}

2025-08-01 09:10:38 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-08-01 09:10:38 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:10:38 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:38 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:10:38 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:10:39 - managers.commands_server - DEBUG - Request completed in 0.15s with status 500
2025-08-01 09:10:39 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.005936384201049805,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.821988"
  },
  "success": false
}

2025-08-01 09:10:39 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.005936384201049805,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.821988"
  },
  "success": false
}

2025-08-01 09:10:39 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.005936384201049805,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:10:57.821988"
  },
  "success": false
}

2025-08-01 09:10:40 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:10:40 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:10:40 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:10:40 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuq0gS_ZWS18_3JqPhSS01NmCwARtsxg1KBjMPNpNN6f17J643tVRS9aI3LCIjT5w4EeT5c-W38aOCdVz3q6_9Y4i_rIYufqy-_rmCYRh3nd83RVyvvq5eEGc_OMBdCInWXjpre7YXr_NYPBlH5yTvxUERHHPLnXbaQ5-6iNlyB_DYy-nViBuWcXQ27o7ysx4NqF46o08b1grmPbt-HtjupFBj2Klm7Fn-cfSVnKHxQipKmDfD7ak9TkUqYDmzM-Zq7VmmJJ1Dj0-FNuaZphecUVrfM_XMkaZZPQWsbQvSvA-kFN-gQJ4T_8A0RSkfjdRT2nG0bs79DHeJe-Qu04UzuIuoS3sHVzN8I1Oh1Bpr7nLI-6xvg7hPE4CDzerLKn622SPufIiUwjYUCQgcJ4hf8QypRFAs82WVRT9Vi1-HNNiH2Sk7XMxZxrRM7uSqb72dTMuVUWhXdVKv8qTtvVy1ddy9bgstT3NtTmb3qmIurlLuLExuLmPeVay0vZApuwOIHW7BPFqYnt30D1SmDQl1CTWRZEzh3IwKLuYuzmJBbcxKFY0BHnXehcoDHCwQaVwvEPJT5c35dE0mNRdmjVdJxeEArD1c46OHike9S1i5t1CsAAYdl3TxFKj7aArtFFMqcQoldfBwdvTwZxk5WhlW2ohqlkGtD6h-L2dT5jpWIedNpl45TJ0LUuVR3VmfTzsMtd7iUa4TcNbqwNZQy-ZL5b1es0v8tNeaiN_WoSQ20YVKQ2n7qxfHmj3ngPqhgGdTQFnqXpC8NcLIkLy5MJ34AqizSWl8Mmm5PKszB9S8eGqvZQxW79plt_Dy0PqqhDEGfEHp--gd_4n3Pc8hPNRbWUF76aUFYW2Vi46RyDauozULTlhEdCj00NiBKbZEaMxFfxUP5GkPqOhdkxqDSiuXXEs8XF00IdQfHYBSDMRtc7Us4mK_5zO4NvbOMxA3WUTc9lbh2tS46BnuyzySrJd3WdYoBRHS5ZQxKCf5B33YVAEi783p6IIe00txZ185KrRa6FVRYeIWrgkFZZUHAVaYYhaWbhGH0SHa1Nwftorl5aFYttDU2XAucMVWF641dLwyKNn_5ox4epXYQ_tJOTiVBra57KcZoD1Z9A7eepRphH4F9RpiGs-9TryLaTt0z0knhPPUZhOovPpScxOgNe_2Rd9BGn9JD4y60GdJNOaWYF45HW9PfSXqxlX0qX2jXKsNUCUivqm9b9dHikSsGcYKnsJD8vEH2Wh4tDtPUpWZ8WQEEAM1760ZMFCgzfpBGUegz7xN1SIAHOiMcKfP5WwqegZIU7fDrX9kdxuaq3zPhUlgUKhtQQH4oCuC4rsb_gz8BmIkFUSzz8yUFnfU0dbSZ-7eXeoCt1LQ93N4JBNcvV8Pfp7dn0QzcBY2rNnryJwonxLvkkBvE6dLDCp0Rm7XJPvBMI4tCccnf4FH2jrjGqyLgMKqsmxSp5CO92m7e-aNPJg4lVhm5eHpo5kkJtlEz1fUJSnpre_oN_A3Z9LCqFxUaB29bV3YtDF6rtC3zqI_0r5vu6-fn9M0fSRNk5QxbLPuI2yqTzj06ediEVl9az7iCmbl_57ePppbVsao4Pt99PvXu-o2hg_kOX9Zz5L4tp_eT2GXouPHfm6PHr8GL91DfqEYT6ZiJ5QOhwgdY4AiWAbgGEESzLol83EkNwWRVOEQxjigKyobmTDtQdLe0-EDtm33neVSLmzqHpnfQnZBnNv_M-JbIYQZwZrom5Jl_50skd9P_RF1fcvi6IcDI0f5ZTEU-WV1g1VWvvwaVotc16aMEVyD7ifZiGT8HudhjULZT3_CGXq5nHUdOvwxI-TqzVD3Pwh_5_EL4Y_f0OumDt8FjUtA0z2YG1koz6lqTvJyqc3CfnjEv4GXKfH3QnzCT26XME14HLb61gXs3fNuSXSJR1JmLYPPq6MhnO1H48_wHHBrK2zdLOP_1bH0Olz2cwjec2FYElksyQAaWS8gkbttVt--_bU4frZsQ0wSMAhiYg0phlmTIQRrhoiwNWRinN7EN4a5katv_wHuyf8W.aIxaXw.GvvIpGJKA9PP2jnIgdnblkcowzc'}
2025-08-01 09:10:40 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:10:40 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:10:40 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000236023BF890>
2025-08-01 09:10:40 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:40 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:40 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:10:40 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:40 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:10:40 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:10:40 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:10:40 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:10:40 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:10:40 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:10:40 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:10:40 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:10:40 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:10:40 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:10:40 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:10:40 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:10:44 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:10:44 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:10:44 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:10:44 - managers.commands_server - DEBUG - Request completed in 0.17s with status 500
2025-08-01 09:10:44 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008945941925048828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:11:03.582850"
  },
  "success": false
}

2025-08-01 09:10:44 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008945941925048828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:11:03.582850"
  },
  "success": false
}

2025-08-01 09:10:44 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008945941925048828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:11:03.582850"
  },
  "success": false
}

2025-08-01 09:12:45 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:45 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:12:45 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:12:45 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:12:45 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:12:45 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-08-01 09:12:45 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.765655517578125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:13:04.364864'}, 'success': True}
2025-08-01 09:12:45 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:12:45 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:12:45 - managers.commands_server - DEBUG - Request completed in 0.14s with status 500
2025-08-01 09:12:45 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008208990097045898,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:04.508484"
  },
  "success": false
}

2025-08-01 09:12:45 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008208990097045898,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:04.508484"
  },
  "success": false
}

2025-08-01 09:12:45 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.008208990097045898,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:04.508484"
  },
  "success": false
}

2025-08-01 09:12:47 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:12:47 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:12:47 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:47 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:47 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:47 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:47 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:47 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:12:47 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:12:47 - managers.commands_server - DEBUG - Request completed in 0.18s with status 500
2025-08-01 09:12:47 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.025416851043701172,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:06.723714"
  },
  "success": false
}

2025-08-01 09:12:47 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.025416851043701172,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:06.723714"
  },
  "success": false
}

2025-08-01 09:12:47 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.025416851043701172,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:06.723714"
  },
  "success": false
}

2025-08-01 09:12:47 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.025416851043701172,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:06.723714"
  },
  "success": false
}

2025-08-01 09:12:47 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.025416851043701172,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:06.723714"
  },
  "success": false
}

2025-08-01 09:12:48 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:12:48 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:12:48 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:48 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:48 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:48 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:48 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:48 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:12:48 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:12:48 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-08-01 09:12:48 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.00690913200378418,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:07.321595"
  },
  "success": false
}

2025-08-01 09:12:48 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.00690913200378418,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:07.321595"
  },
  "success": false
}

2025-08-01 09:12:48 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.00690913200378418,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:07.321595"
  },
  "success": false
}

2025-08-01 09:12:48 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.00690913200378418,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:07.321595"
  },
  "success": false
}

2025-08-01 09:12:48 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.00690913200378418,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:07.321595"
  },
  "success": false
}

2025-08-01 09:12:49 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:12:49 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:12:49 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:49 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:49 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:49 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:49 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:49 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:12:49 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:12:49 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-08-01 09:12:49 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006403446197509766,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:08.578899"
  },
  "success": false
}

2025-08-01 09:12:49 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006403446197509766,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:08.578899"
  },
  "success": false
}

2025-08-01 09:12:49 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006403446197509766,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:08.578899"
  },
  "success": false
}

2025-08-01 09:12:49 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006403446197509766,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:08.578899"
  },
  "success": false
}

2025-08-01 09:12:49 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006403446197509766,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:08.578899"
  },
  "success": false
}

2025-08-01 09:12:50 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:12:50 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:12:50 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:50 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:50 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:50 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:50 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:50 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:12:50 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:12:51 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-08-01 09:12:51 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.005373239517211914,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:09.782853"
  },
  "success": false
}

2025-08-01 09:12:51 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.005373239517211914,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:09.782853"
  },
  "success": false
}

2025-08-01 09:12:51 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.005373239517211914,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:09.782853"
  },
  "success": false
}

2025-08-01 09:12:51 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.005373239517211914,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:09.782853"
  },
  "success": false
}

2025-08-01 09:12:51 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.005373239517211914,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:09.782853"
  },
  "success": false
}

2025-08-01 09:12:53 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:12:53 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:12:53 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:53 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:53 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:53 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:53 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:53 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:12:53 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:12:53 - managers.commands_server - DEBUG - Request completed in 0.16s with status 500
2025-08-01 09:12:53 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006731748580932617,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:12.357895"
  },
  "success": false
}

2025-08-01 09:12:53 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006731748580932617,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:12.357895"
  },
  "success": false
}

2025-08-01 09:12:53 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006731748580932617,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:12.357895"
  },
  "success": false
}

2025-08-01 09:12:53 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006731748580932617,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:12.357895"
  },
  "success": false
}

2025-08-01 09:12:53 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.006731748580932617,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:12.357895"
  },
  "success": false
}

2025-08-01 09:12:55 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:12:55 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:12:55 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:55 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:55 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:12:55 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:55 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:12:55 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:12:55 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:12:56 - managers.commands_server - DEBUG - Request completed in 0.25s with status 500
2025-08-01 09:12:56 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007530927658081055,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:14.729755"
  },
  "success": false
}

2025-08-01 09:12:56 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007530927658081055,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:14.729755"
  },
  "success": false
}

2025-08-01 09:12:56 - services.base - ERROR - Service operation failed: get_wifi_name - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007530927658081055,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:14.729755"
  },
  "success": false
}

2025-08-01 09:12:56 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007530927658081055,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:14.729755"
  },
  "success": false
}

2025-08-01 09:12:56 - endpoints.settings - WARNING - Service returned error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007530927658081055,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:13:14.729755"
  },
  "success": false
}

2025-08-01 09:16:04 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:16:04 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:16:04 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:16:04 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn8v3stpQ0kiDwQtcSF_MzouVJJh9sdkMrfr3SdzVVTVSSz0P8xoZeeLEicg8f6yuTfQoYRVV3epb9-ijr6u-jR6rb3-sIEJR2167Oo-q1bfVBCn-TSAEgz5twBjLyjralrpoqFA5ETDu6PmkWnYuRhdxTT-T7ZEHBfdkMoVZs3whaCIV7K0cGPe-IHju-uT0z1ptar8XycknRKnUW6FgobwR9k_f1xVxnfKeylyHfq_Ql_rU-2KXszbtN0rQkKeSe5BM_2FVYUWc65jnSysdRONTaFrD28zkcGmU9c50j5cMwk1U3eZSGywZJIqh70JFgGLsfQgOYQgXwTjop6NLaWmROsOQUeQnYaBzQsdzyffTSFDEdvV1FT2b9BG1V4iVIrcsQ9AUuyF-xVOsEs3y3NdVGv5ULZqUJDii9JwqhjXLJEjlVi67xhfljVxecmBqo2bKIzj6mebolGfucpAlGZjj2TM10qM01pv3o5fJpG8eSnDcp6qoEJErLJgfNqmnN_0Nl2kQrS2hOjxdRjTXg0odMo_iyaC6zGoZDgEVtr7BZgFFLBBJVC0Q8lOTrPlsxqOW7WcgaYzqCgSsfApI4UOjws6j7cxfKJYECV2P8aiE0I7hiJyEVMvDiE5a71P84FPPInRBgUow4JpFUOk9rt_J6Zh6rp3LWZ1qpkBqc85oEq476_NZJHHrDRVmOg1nUAUOwC1bkyb5HXAK6nwEdSjtKnQ61KHBJui0-9WLa8--q-B-WMJ3WEJd6hpY3gpjpFjebD-epZzQZosFUjyCTJ61WSC0LH-CaRmD3XlO0S68_OOh1-jLEEg5qx_DV_wn3o88l_Zxb0UJnaWXhkCVXSw6hge-9lxQLzjnA1_qdOic96QNzEML9gprmr4bmOAcvmqyQ1CC4pW751jNeWaWCUzLPUw-be8sK3RNW1_m03sO-cq7YG7yAXM72rnnsMOiJzoWWXiyJ99Y1ighQqzLOeVwTvwP-vCJShwkf04Gj-hIvTiIjimwyG6gX4a5RdkU2ONnVih7WJKqldu6TSuDSzeJdVR2qu1n6FA00NJ5NOeU6mgL1wq6fhEU_H9zxjz98tBB58m6FJsEjrXspxXgPVn0Dl56FEmIn4JmIhJIwoTnxWgGvucmI8Z5gtkiNEmbgBk_8ZrfzckqsejXKcurftvrgc9JmwGoT4NEbGurazmhpX1q7cjPfhCstVojnhN3ZUJnKXfPur2hEhePBs8sVNj99pGIuxuxHTKdAmelURHLomKwRdL8gPp0NOBD_MjEFOWa27d5HLCIHLS76ZMWI0gnJrsP_HHcnfyeQ9lN50nnyZW30y5mRG5SUdu0ItIDGSgyHdjm3SceE_o4abaku_VubSUH7jTKxqHcn5_bOD0eznk9UmiTrqtte5xoBDxFgUCb2fMUpw_ywbVNxodc_gnjAciuzF3rEGlPE6lbY7iN13tdiMFRfZa6y26yzRQIn_Zdic9dbKryVfzsVffBymO7bspc1lkDhjeWyEf8t7WobiL8XSVd17Tf3t_HcXyL6zouItik7Ruqy3fYd8n74g1pdavfmkd9S4voy_98ISphWnzBVao0xAVf_-O1m15VdxF8YM_503qW7Jf9dNcEtgk-5q43cbQ5zWLJgtlN2sYpabCwhn2Ij0mCpXmOoEiaobl1w2TDwGxzOi5RjyKK2JRsOnAo6Yi4uSf9G2ya9gfVpRyqqw6b38J4QZyb_zPiq2-MGcKK7uqC5_8dL5HfT68D7vqWRuFfDowd5ZfFcOTX1Q2WaTFdK1gucpl1EWG4Gt-P0wHL-CMuwQqH0p_-RHH8cjlt298mi1297qvuL8I_ePxC-PIbelVXaAlzZ54skE4b-v0R94J-dDQTHzcp6vrH72tTJPTfC_EO3wUx5mr00e_0nUfwd9-_xaERDYzM2xcpKz8u-0_nUV9n-BkIaxs1XppK_2r5zRot-9kHr7lwPIMtluGIDUXTBIPdbbv6_v3PxbmmyzZEDA2DIKLXkOW4NYMgsebokFxDLqI22-jGcTdm9f0_LXH-Kg.aIxbow.X0qcrt3esUIcLCnZQLZLdhSC_7U'}
2025-08-01 09:16:04 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:16:04 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:16:04 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000236023BEF30>
2025-08-01 09:16:04 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:04 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:04 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:16:04 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:04 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:16:04 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:16:04 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:16:04 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:16:04 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:16:04 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:04 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:16:04 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:16:04 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:16:04 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:16:04 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:16:04 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:16:04 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:04 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:16:04 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:16:04 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:16:04 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:16:04 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:16:04 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.647804260253906e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:16:23.286990'}, 'success': True}
2025-08-01 09:16:04 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:16:04 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:16:04 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-08-01 09:16:04 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007646083831787109,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:16:23.423289"
  },
  "success": false
}

2025-08-01 09:16:04 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007646083831787109,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:16:23.423289"
  },
  "success": false
}

2025-08-01 09:16:04 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007646083831787109,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:16:23.423289"
  },
  "success": false
}

2025-08-01 09:16:04 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-08-01 09:16:04 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:16:05 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:05 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:16:05 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:16:07 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:16:07 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:16:07 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:16:07 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn8v3stpQ0kiDwQtcSF_MzouVJJh9sdkMrfr3SdzVVTVSSz0P8xoZeeLEicg8f6yuTfQoYRVV3epb9-ijr6u-jR6rb3-sIEJR2167Oo-q1bfVBCn-TSAEgz5twBjLyjralrpoqFA5ETDu6PmkWnYuRhdxTT-T7ZEHBfdkMoVZs3whaCIV7K0cGPe-IHju-uT0z1ptar8XycknRKnUW6FgobwR9k_f1xVxnfKeylyHfq_Ql_rU-2KXszbtN0rQkKeSe5BM_2FVYUWc65jnSysdRONTaFrD28zkcGmU9c50j5cMwk1U3eZSGywZJIqh70JFgGLsfQgOYQgXwTjop6NLaWmROsOQUeQnYaBzQsdzyffTSFDEdvV1FT2b9BG1V4iVIrcsQ9AUuyF-xVOsEs3y3NdVGv5ULZqUJDii9JwqhjXLJEjlVi67xhfljVxecmBqo2bKIzj6mebolGfucpAlGZjj2TM10qM01pv3o5fJpG8eSnDcp6qoEJErLJgfNqmnN_0Nl2kQrS2hOjxdRjTXg0odMo_iyaC6zGoZDgEVtr7BZgFFLBBJVC0Q8lOTrPlsxqOW7WcgaYzqCgSsfApI4UOjws6j7cxfKJYECV2P8aiE0I7hiJyEVMvDiE5a71P84FPPInRBgUow4JpFUOk9rt_J6Zh6rp3LWZ1qpkBqc85oEq476_NZJHHrDRVmOg1nUAUOwC1bkyb5HXAK6nwEdSjtKnQ61KHBJui0-9WLa8--q-B-WMJ3WEJd6hpY3gpjpFjebD-epZzQZosFUjyCTJ61WSC0LH-CaRmD3XlO0S68_OOh1-jLEEg5qx_DV_wn3o88l_Zxb0UJnaWXhkCVXSw6hge-9lxQLzjnA1_qdOic96QNzEML9gprmr4bmOAcvmqyQ1CC4pW751jNeWaWCUzLPUw-be8sK3RNW1_m03sO-cq7YG7yAXM72rnnsMOiJzoWWXiyJ99Y1ighQqzLOeVwTvwP-vCJShwkf04Gj-hIvTiIjimwyG6gX4a5RdkU2ONnVih7WJKqldu6TSuDSzeJdVR2qu1n6FA00NJ5NOeU6mgL1wq6fhEU_H9zxjz98tBB58m6FJsEjrXspxXgPVn0Dl56FEmIn4JmIhJIwoTnxWgGvucmI8Z5gtkiNEmbgBk_8ZrfzckqsejXKcurftvrgc9JmwGoT4NEbGurazmhpX1q7cjPfhCstVojnhN3ZUJnKXfPur2hEhePBs8sVNj99pGIuxuxHTKdAmelURHLomKwRdL8gPp0NOBD_MjEFOWa27d5HLCIHLS76ZMWI0gnJrsP_HHcnfyeQ9lN50nnyZW30y5mRG5SUdu0ItIDGSgyHdjm3SceE_o4abaku_VubSUH7jTKxqHcn5_bOD0eznk9UmiTrqtte5xoBDxFgUCb2fMUpw_ywbVNxodc_gnjAciuzF3rEGlPE6lbY7iN13tdiMFRfZa6y26yzRQIn_Zdic9dbKryVfzsVffBymO7bspc1lkDhjeWyEf8t7WobiL8XSVd17Tf3t_HcXyL6zouItik7Ruqy3fYd8n74g1pdavfmkd9S4voy_98ISphWnzBVao0xAVf_-O1m15VdxF8YM_503qW7Jf9dNcEtgk-5q43cbQ5zWLJgtlN2sYpabCwhn2Ij0mCpXmOoEiaobl1w2TDwGxzOi5RjyKK2JRsOnAo6Yi4uSf9G2ya9gfVpRyqqw6b38J4QZyb_zPiq2-MGcKK7uqC5_8dL5HfT68D7vqWRuFfDowd5ZfFcOTX1Q2WaTFdK1gucpl1EWG4Gt-P0wHL-CMuwQqH0p_-RHH8cjlt298mi1297qvuL8I_ePxC-PIbelVXaAlzZ54skE4b-v0R94J-dDQTHzcp6vrH72tTJPTfC_EO3wUx5mr00e_0nUfwd9-_xaERDYzM2xcpKz8u-0_nUV9n-BkIaxs1XppK_2r5zRot-9kHr7lwPIMtluGIDUXTBIPdbbv6_v3PxbmmyzZEDA2DIKLXkOW4NYMgsebokFxDLqI22-jGcTdm9f0_LXH-Kg.aIxbpQ.T4QCnlOPF-JXReSS33lbbiTNPqQ'}
2025-08-01 09:16:07 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:16:07 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:16:07 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x00000236023BE030>
2025-08-01 09:16:07 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:07 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:07 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:16:07 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:07 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:16:07 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:16:07 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:16:07 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:16:07 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:16:07 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:07 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:16:07 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:16:07 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:16:07 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:16:07 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:16:07 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:16:08 - managers.commands_server - DEBUG - Request completed in 2.87s with status 200
2025-08-01 09:16:08 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Tom-s-phone', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.4173166751861572, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-08-01T06:16:26.855688'}, 'success': True}
2025-08-01 09:16:08 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:16:08 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 2 devices
2025-08-01 09:16:08 - services.db_operations.network_db - INFO - Saving network scan result for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 2 devices
2025-08-01 09:16:08 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:16:08 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:16:08 - services.db_operations.network_db - INFO - Network scan save completed for user e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 1, updated 1 devices
2025-08-01 09:16:08 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:16:12 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:16:12 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:16:12 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:12 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:12 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:12 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:12 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:12 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:16:12 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:16:13 - managers.commands_server - DEBUG - Request completed in 0.28s with status 200
2025-08-01 09:16:13 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.13984131813049316, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-08-01T06:16:31.853076'}, 'success': True}
2025-08-01 09:16:13 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:16:13 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:13 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:16:13 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-08-01 09:16:13 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-08-01 09:16:13 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:16:13 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:16:13 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:16:13 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:13 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:13 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:13 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:13 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:13 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:16:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:16:13 - managers.commands_server - DEBUG - Request completed in 0.29s with status 200
2025-08-01 09:16:13 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'NewWiFiName'}, 'error': None, 'metadata': {'executionTime': 0.14670372009277344, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-08-01T06:16:32.159185'}, 'success': True}
2025-08-01 09:16:13 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:16:13 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'NewWiFiName' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:13 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:16:13 - endpoints.settings - INFO - Service call completed - result: NewWiFiName, error: None
2025-08-01 09:16:13 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'NewWiFiName', 'ssid': 'NewWiFiName'}
2025-08-01 09:16:13 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:16:26 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-08-01 09:16:26 - endpoints.settings - INFO - Request method: POST
2025-08-01 09:16:26 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-08-01 09:16:26 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:26 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 09:16:26 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'NewWiFiName2'}
2025-08-01 09:16:26 - endpoints.settings - INFO - WiFi name extracted from request: NewWiFiName2
2025-08-01 09:16:26 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:26 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:16:26 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, wifi_name=NewWiFiName2
2025-08-01 09:16:26 - services.base - INFO - Service operation completed: update_wifi_name
2025-08-01 09:16:26 - services.commands_server_operations.settings_execute - INFO - Updating WiFi SSID to 'NewWiFiName2' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:16:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:16:26 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-08-01 09:16:26 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00023055076599121094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:16:45.209174"
  },
  "success": false
}

2025-08-01 09:16:26 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00023055076599121094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:16:45.209174"
  },
  "success": false
}

2025-08-01 09:16:26 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00023055076599121094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:16:45.209174"
  },
  "success": false
}

2025-08-01 09:16:26 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00023055076599121094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:16:45.209174"
  },
  "success": false
}

2025-08-01 09:16:26 - endpoints.settings - WARNING - Service returned error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.00023055076599121094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:16:45.209174"
  },
  "success": false
}

2025-08-01 09:21:09 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:26:16 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:26:16 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:26:16 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:16 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:16 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:16 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:16 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:16 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:26:16 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:26:16 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:26:16 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:26:16 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:26:16 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.7179718017578125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:26:35.461484'}, 'success': True}
2025-08-01 09:26:16 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:26:16 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:26:17 - managers.commands_server - DEBUG - Request completed in 0.80s with status 200
2025-08-01 09:26:17 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'Openwrt'}, 'error': None, 'metadata': {'executionTime': 0.6574983596801758, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-08-01T06:26:36.265324'}, 'success': True}
2025-08-01 09:26:17 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:26:17 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'Openwrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:17 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:26:17 - endpoints.settings - INFO - Service call completed - result: Openwrt, error: None
2025-08-01 09:26:17 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'Openwrt', 'ssid': 'Openwrt'}
2025-08-01 09:26:17 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:26:23 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:26:23 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:26:23 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:23 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:23 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:23 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:23 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:23 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:26:23 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:26:23 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:26:23 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:26:23 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:26:23 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn8v3stpQ0kiDwQtcSF_MzouVJJh9sdkMrfr3SdzVVTVSSz0P8xoZeeLEicg8f6yuTfQoYRVV3epb9-ijr6u-jR6rb3-sIEJR2167Oo-q1bfVBCn-TSAEgz5twBjLyjralrpoqFA5ETDu6PmkWnYuRhdxTT-T7ZEHBfdkMoVZs3whaCIV7K0cGPe-IHju-uT0z1ptar8XycknRKnUW6FgobwR9k_f1xVxnfKeylyHfq_Ql_rU-2KXszbtN0rQkKeSe5BM_2FVYUWc65jnSysdRONTaFrD28zkcGmU9c50j5cMwk1U3eZSGywZJIqh70JFgGLsfQgOYQgXwTjop6NLaWmROsOQUeQnYaBzQsdzyffTSFDEdvV1FT2b9BG1V4iVIrcsQ9AUuyF-xVOsEs3y3NdVGv5ULZqUJDii9JwqhjXLJEjlVi67xhfljVxecmBqo2bKIzj6mebolGfucpAlGZjj2TM10qM01pv3o5fJpG8eSnDcp6qoEJErLJgfNqmnN_0Nl2kQrS2hOjxdRjTXg0odMo_iyaC6zGoZDgEVtr7BZgFFLBBJVC0Q8lOTrPlsxqOW7WcgaYzqCgSsfApI4UOjws6j7cxfKJYECV2P8aiE0I7hiJyEVMvDiE5a71P84FPPInRBgUow4JpFUOk9rt_J6Zh6rp3LWZ1qpkBqc85oEq476_NZJHHrDRVmOg1nUAUOwC1bkyb5HXAK6nwEdSjtKnQ61KHBJui0-9WLa8--q-B-WMJ3WEJd6hpY3gpjpFjebD-epZzQZosFUjyCTJ61WSC0LH-CaRmD3XlO0S68_OOh1-jLEEg5qx_DV_wn3o88l_Zxb0UJnaWXhkCVXSw6hge-9lxQLzjnA1_qdOic96QNzEML9gprmr4bmOAcvmqyQ1CC4pW751jNeWaWCUzLPUw-be8sK3RNW1_m03sO-cq7YG7yAXM72rnnsMOiJzoWWXiyJ99Y1ighQqzLOeVwTvwP-vCJShwkf04Gj-hIvTiIjimwyG6gX4a5RdkU2ONnVih7WJKqldu6TSuDSzeJdVR2qu1n6FA00NJ5NOeU6mgL1wq6fhEU_H9zxjz98tBB58m6FJsEjrXspxXgPVn0Dl56FEmIn4JmIhJIwoTnxWgGvucmI8Z5gtkiNEmbgBk_8ZrfzckqsejXKcurftvrgc9JmwGoT4NEbGurazmhpX1q7cjPfhCstVojnhN3ZUJnKXfPur2hEhePBs8sVNj99pGIuxuxHTKdAmelURHLomKwRdL8gPp0NOBD_MjEFOWa27d5HLCIHLS76ZMWI0gnJrsP_HHcnfyeQ9lN50nnyZW30y5mRG5SUdu0ItIDGSgyHdjm3SceE_o4abaku_VubSUH7jTKxqHcn5_bOD0eznk9UmiTrqtte5xoBDxFgUCb2fMUpw_ywbVNxodc_gnjAciuzF3rEGlPE6lbY7iN13tdiMFRfZa6y26yzRQIn_Zdic9dbKryVfzsVffBymO7bspc1lkDhjeWyEf8t7WobiL8XSVd17Tf3t_HcXyL6zouItik7Ruqy3fYd8n74g1pdavfmkd9S4voy_98ISphWnzBVao0xAVf_-O1m15VdxF8YM_503qW7Jf9dNcEtgk-5q43cbQ5zWLJgtlN2sYpabCwhn2Ij0mCpXmOoEiaobl1w2TDwGxzOi5RjyKK2JRsOnAo6Yi4uSf9G2ya9gfVpRyqqw6b38J4QZyb_zPiq2-MGcKK7uqC5_8dL5HfT68D7vqWRuFfDowd5ZfFcOTX1Q2WaTFdK1gucpl1EWG4Gt-P0wHL-CMuwQqH0p_-RHH8cjlt298mi1297qvuL8I_ePxC-PIbelVXaAlzZ54skE4b-v0R94J-dDQTHzcp6vrH72tTJPTfC_EO3wUx5mr00e_0nUfwd9-_xaERDYzM2xcpKz8u-0_nUV9n-BkIaxs1XppK_2r5zRot-9kHr7lwPIMtluGIDUXTBIPdbbv6_v3PxbmmyzZEDA2DIKLXkOW4NYMgsebokFxDLqI22-jGcTdm9f0_LXH-Kg.aIxeDw.pMNku5XpPjYpTQcjiM0VEmPUBcg'}
2025-08-01 09:26:23 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:26:23 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:26:23 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000013AB37416E0>
2025-08-01 09:26:23 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:23 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:23 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:26:23 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:23 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:26:23 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:26:23 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:26:23 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:26:23 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:26:23 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:23 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:26:23 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:26:23 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:26:23 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:26:23 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:26:23 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:26:24 - managers.commands_server - DEBUG - Request completed in 0.39s with status 200
2025-08-01 09:26:24 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'Openwrt'}, 'error': None, 'metadata': {'executionTime': 0.14012885093688965, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-08-01T06:26:42.674623'}, 'success': True}
2025-08-01 09:26:24 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:26:24 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'Openwrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:24 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:26:24 - endpoints.settings - INFO - Service call completed - result: Openwrt, error: None
2025-08-01 09:26:24 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'Openwrt', 'ssid': 'Openwrt'}
2025-08-01 09:26:24 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:26:24 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:26:24 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:26:24 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:26:24 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVdmuo0gS_ZWSn8v3stpQ0kiDwQtcSF_MzouVJJh9sdkMrfr3SdzVVTVSSz0P8xoZeeLEicg8f6yuTfQoYRVV3epb9-ijr6u-jR6rb3-sIEJR2167Oo-q1bfVBCn-TSAEgz5twBjLyjralrpoqFA5ETDu6PmkWnYuRhdxTT-T7ZEHBfdkMoVZs3whaCIV7K0cGPe-IHju-uT0z1ptar8XycknRKnUW6FgobwR9k_f1xVxnfKeylyHfq_Ql_rU-2KXszbtN0rQkKeSe5BM_2FVYUWc65jnSysdRONTaFrD28zkcGmU9c50j5cMwk1U3eZSGywZJIqh70JFgGLsfQgOYQgXwTjop6NLaWmROsOQUeQnYaBzQsdzyffTSFDEdvV1FT2b9BG1V4iVIrcsQ9AUuyF-xVOsEs3y3NdVGv5ULZqUJDii9JwqhjXLJEjlVi67xhfljVxecmBqo2bKIzj6mebolGfucpAlGZjj2TM10qM01pv3o5fJpG8eSnDcp6qoEJErLJgfNqmnN_0Nl2kQrS2hOjxdRjTXg0odMo_iyaC6zGoZDgEVtr7BZgFFLBBJVC0Q8lOTrPlsxqOW7WcgaYzqCgSsfApI4UOjws6j7cxfKJYECV2P8aiE0I7hiJyEVMvDiE5a71P84FPPInRBgUow4JpFUOk9rt_J6Zh6rp3LWZ1qpkBqc85oEq476_NZJHHrDRVmOg1nUAUOwC1bkyb5HXAK6nwEdSjtKnQ61KHBJui0-9WLa8--q-B-WMJ3WEJd6hpY3gpjpFjebD-epZzQZosFUjyCTJ61WSC0LH-CaRmD3XlO0S68_OOh1-jLEEg5qx_DV_wn3o88l_Zxb0UJnaWXhkCVXSw6hge-9lxQLzjnA1_qdOic96QNzEML9gprmr4bmOAcvmqyQ1CC4pW751jNeWaWCUzLPUw-be8sK3RNW1_m03sO-cq7YG7yAXM72rnnsMOiJzoWWXiyJ99Y1ighQqzLOeVwTvwP-vCJShwkf04Gj-hIvTiIjimwyG6gX4a5RdkU2ONnVih7WJKqldu6TSuDSzeJdVR2qu1n6FA00NJ5NOeU6mgL1wq6fhEU_H9zxjz98tBB58m6FJsEjrXspxXgPVn0Dl56FEmIn4JmIhJIwoTnxWgGvucmI8Z5gtkiNEmbgBk_8ZrfzckqsejXKcurftvrgc9JmwGoT4NEbGurazmhpX1q7cjPfhCstVojnhN3ZUJnKXfPur2hEhePBs8sVNj99pGIuxuxHTKdAmelURHLomKwRdL8gPp0NOBD_MjEFOWa27d5HLCIHLS76ZMWI0gnJrsP_HHcnfyeQ9lN50nnyZW30y5mRG5SUdu0ItIDGSgyHdjm3SceE_o4abaku_VubSUH7jTKxqHcn5_bOD0eznk9UmiTrqtte5xoBDxFgUCb2fMUpw_ywbVNxodc_gnjAciuzF3rEGlPE6lbY7iN13tdiMFRfZa6y26yzRQIn_Zdic9dbKryVfzsVffBymO7bspc1lkDhjeWyEf8t7WobiL8XSVd17Tf3t_HcXyL6zouItik7Ruqy3fYd8n74g1pdavfmkd9S4voy_98ISphWnzBVao0xAVf_-O1m15VdxF8YM_503qW7Jf9dNcEtgk-5q43cbQ5zWLJgtlN2sYpabCwhn2Ij0mCpXmOoEiaobl1w2TDwGxzOi5RjyKK2JRsOnAo6Yi4uSf9G2ya9gfVpRyqqw6b38J4QZyb_zPiq2-MGcKK7uqC5_8dL5HfT68D7vqWRuFfDowd5ZfFcOTX1Q2WaTFdK1gucpl1EWG4Gt-P0wHL-CMuwQqH0p_-RHH8cjlt298mi1297qvuL8I_ePxC-PIbelVXaAlzZ54skE4b-v0R94J-dDQTHzcp6vrH72tTJPTfC_EO3wUx5mr00e_0nUfwd9-_xaERDYzM2xcpKz8u-0_nUV9n-BkIaxs1XppK_2r5zRot-9kHr7lwPIMtluGIDUXTBIPdbbv6_v3PxbmmyzZEDA2DIKLXkOW4NYMgsebokFxDLqI22-jGcTdm9f0_LXH-Kg.aIxeDw.pMNku5XpPjYpTQcjiM0VEmPUBcg'}
2025-08-01 09:26:24 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:26:24 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:26:24 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000013AB36E3E30>
2025-08-01 09:26:24 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:24 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:24 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:26:24 - services.settings_service - INFO - Input parameter - user_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:24 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:26:24 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:26:24 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, setting_key='routerId')
2025-08-01 09:26:24 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:26:24 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:26:24 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:24 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:24 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:24 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:24 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:24 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:26:24 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:26:24 - services.settings_service - INFO - Found UserSetting record: id=972178fe-ac3b-4ae2-a634-43a19647c2a2, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:26:24 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:26:24 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:24 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:26:24 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:26:24 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:26:24 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:26:24 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:26:24 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:26:24 - middleware - DEBUG - Router context established: user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:24 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:26:24 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:26:24 - managers.commands_server - DEBUG - Request completed in 0.30s with status 200
2025-08-01 09:26:24 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'Openwrt'}, 'error': None, 'metadata': {'executionTime': 0.14099502563476562, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-08-01T06:26:43.393194'}, 'success': True}
2025-08-01 09:26:24 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:26:24 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'Openwrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:26:24 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:26:24 - endpoints.settings - INFO - Service call completed - result: Openwrt, error: None
2025-08-01 09:26:24 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'Openwrt', 'ssid': 'Openwrt'}
2025-08-01 09:26:24 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:26:24 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-08-01 09:26:24 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011515617370605469,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:26:43.499309"
  },
  "success": false
}

2025-08-01 09:26:24 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011515617370605469,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:26:43.499309"
  },
  "success": false
}

2025-08-01 09:26:24 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011515617370605469,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "e43abbe3-a588-4ca0-83d1-a8e267ef88f4",
    "timestamp": "2025-08-01T06:26:43.499309"
  },
  "success": false
}

2025-08-01 09:26:24 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID e43abbe3-a588-4ca0-83d1-a8e267ef88f4 - treating as success
2025-08-01 09:26:24 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:26:28 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-08-01 09:26:28 - endpoints.settings - INFO - Request method: POST
2025-08-01 09:26:28 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-08-01 09:26:28 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:26:28 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 09:26:28 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'Openwrt2'}
2025-08-01 09:26:28 - endpoints.settings - INFO - WiFi name extracted from request: Openwrt2
2025-08-01 09:26:28 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:27:33 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:27:35 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:27:35 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:27:35 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:27:35 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:27:35 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:27:35 - endpoints.settings - INFO - Using session_id: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:27:35 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:27:35 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:27:35 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:27:35 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:27:35 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:27:35 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:27:35 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.4318695068359375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:27:54.502758'}, 'success': True}
2025-08-01 09:27:35 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:27:35 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:27:36 - managers.commands_server - DEBUG - Request completed in 0.28s with status 200
2025-08-01 09:27:36 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'Openwrt'}, 'error': None, 'metadata': {'executionTime': 0.13930082321166992, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'e43abbe3-a588-4ca0-83d1-a8e267ef88f4', 'timestamp': '2025-08-01T06:27:54.787987'}, 'success': True}
2025-08-01 09:27:36 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:27:36 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'Openwrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:27:36 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:27:36 - endpoints.settings - INFO - Service call completed - result: Openwrt, error: None
2025-08-01 09:27:36 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'Openwrt', 'ssid': 'Openwrt'}
2025-08-01 09:27:36 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:27:41 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-08-01 09:27:41 - endpoints.settings - INFO - Request method: POST
2025-08-01 09:27:41 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-08-01 09:27:41 - endpoints.settings - INFO - User ID from session: e43abbe3-a588-4ca0-83d1-a8e267ef88f4
2025-08-01 09:27:41 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 09:27:41 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'OpenWrt'}
2025-08-01 09:27:41 - endpoints.settings - INFO - WiFi name extracted from request: OpenWrt
2025-08-01 09:27:41 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:17 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:28:17 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:28:17 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:28:17 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVmPo0gS_isjP7erksuGklZabA5DOcFg7heL04A50uayGfV_36R6pqelHWn2YSVLyJGR8R0Ryvh9dUHpow6btOlXH_1jSL-thi59rD5-X4VxnHbdpW9vabP6WL1CknsLAX-mDhttmsB1j_T1fKrkcMM_SOPuHuREGC-tsLFct_Yt_1S-xMD3GNNXWEpn5aToM9OzhomZDn2udBturQcCTzHrC3-0erSbJYXU27GYNR9MUygPylMqWRRWNPlst2yw1eY0CS5pZ87nz1fH38t4u7-2cxRFl2ZgXoC8OI_uETQz48ktH-6v_idvKWfeNM6ScZA9EhZgZxyDhDVtFE1tX961RJdUAxDb7erbKn2i4pF2lxB7QWwZGlAUyZF_xQvsA8Vw22-rIvnpS_pS80iOC71Qz_asEFqhdErdo2CvbJTavGkWnKClTJoclNA1SN_a3bQyL7X5OvsWJHwSMv4sTn6pEIEl1ZosFse9ClKPX2p-OoRRZMYbhkExBZdQmxzMKZ7b8UhKpU9yRNSY87FOxohMuuDMlBEJlhJ52iwllCcU7Fm3rhMsxVkTIH30eBA2AakJyQOSSe9TThksFGtAhJ5P-2QOoJxMsZsTx1qa4gMcApIbA_JZJZ5WxbU2YswqaowB4_dKMRW-59yUsi2gxRNwvtFQwLizMet7AktHZFIaVDhrTeRqWLL9gkLQa25F6rLWJsKuiQ9Sm5yZPD7s_tLiOXPgqVgPAwKXAccF94ztbXCNAttbithaf9YFm4GWQegC1lD6NI7RcMmrnd53q27hFdUOiOWqiyizjGSOCMQd5iKhaP_Tr-rrv8SRGBMFdVUtLUwOKhGcF31mFsrSHH611aBhBSdzT9RnkZNjQBSJ6Jw0YXdIq6_2DZhzGZxx7g29whv70oVE9N3nZDUOZcrVZyRLr8W3qJb6H3lMlUg7hLmBJY65lsnBeX2d1TlIsC96wY6RfP0Hf7j8CCQhmPPRB-1sODllUDtH9wLNFu3e8ETachw6tBLFm_EcAc7V3StICE6Mq6rSbWlKKkd2bXsyLALPjd_7r8XLBCW1M3gkk0euvcyhHnimEbrPMdkv51WOvxtoxYQm8C_dip_afioCL5-w_09ttgEU4AxnESzjnJReyZsoyFMXCQGtbtT52ZPpljnSw92_mjfK8O6ZcJoKUVn3w-6QK2jkPm07C49dmTlDpFxaE8rqDqhwKzOpJZdPhIzOEUPXG4PMKyrTnFsvq2vXIo6cSKh2AO79xlA7Qj7ognVVOqgI111_t1AEynR7NXo731eb8siC452f0eBQvGrdzYjeZ61vPSRyfkaFopKJWjin8NP5JPP7HjJAkjz73CNqfz-xImvdSe7uQ7g2jheJ3h1DCgvy6oyuAcf7_H4o834fkj3rGNLzc2Tk7MbTx3MEZlftqk-4UeRS4abME-_rR_hyQ5UfHvRh2plBqjGGiKArT4f6cpS2TMlB-tE7eoRO9ITfsC5uUYqfpbzvUffx_j5N09u1ba9VGqKie4vb-j0c-vx9eeWLJmvf0KPNiir9DV9riuS3__leWodFhQG_3sFL__pC3aXhA2-PH0tkSftaJP0lD7scHycseQbCOjvoUgejXtRpIM8GTg-HBB8TgKE4FpAERVPsGtHlONLbG3Wt4yFOSbCpmWJk47wHV3TPh7cQoe4Pjgtc3DY9XmML1aXijP7PFX8I_lg1aY-Kqu3jqh2Sf1-X6K8ZlxErz4o0-XOf4u3xc51QBP1tdS1G7FgT1otjWtqflmr4evFz75Dcdkksuu6XTuJ93A5N_yfBPzD_u0zTNvESUh-lTrJbIayQNkxCoVbh0hlUxP3w-HVEqpz6e9Hv4Tu_v7JtrFK8N-2RzY3wJK75OwvtZ7E9XGjU6Q6X09NFePgpx6PRlnwR8P_quM06XqZxiL66QGwoluEImmGx6RuWwL_V9-8_xuRSLL1PYypmCWqz3my5eE0zgF6HLEeu2XiTJjSTbagsW33_D-5D5IA.aIxegQ.C5Of8_H4jmULmLx7aUloRhjnMtI'}
2025-08-01 09:28:17 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:28:17 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:28:17 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000018C40140350>
2025-08-01 09:28:17 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:17 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:17 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:28:17 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:17 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:28:17 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:28:17 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:28:17 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:28:17 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:28:17 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:17 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:28:17 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:28:17 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:28:17 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:28:17 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:28:17 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:28:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:17 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:28:17 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:28:17 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:28:17 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:28:18 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-08-01 09:28:18 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.552436828613281e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:28:36.823955'}, 'success': True}
2025-08-01 09:28:18 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:28:18 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:28:18 - managers.commands_server - DEBUG - Request completed in 0.16s with status 400
2025-08-01 09:28:18 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009088516235351562,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:28:36.981315"
  },
  "success": false
}

2025-08-01 09:28:18 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009088516235351562,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:28:36.981315"
  },
  "success": false
}

2025-08-01 09:28:18 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009088516235351562,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:28:36.981315"
  },
  "success": false
}

2025-08-01 09:28:18 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:28:18 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:28:19 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:19 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:28:19 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:28:20 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:28:20 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:28:20 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:28:20 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVVmPo0gS_isjP7erksuGklZabA5DOcFg7heL04A50uayGfV_36R6pqelHWn2YSVLyJGR8R0Ryvh9dUHpow6btOlXH_1jSL-thi59rD5-X4VxnHbdpW9vabP6WL1CknsLAX-mDhttmsB1j_T1fKrkcMM_SOPuHuREGC-tsLFct_Yt_1S-xMD3GNNXWEpn5aToM9OzhomZDn2udBturQcCTzHrC3-0erSbJYXU27GYNR9MUygPylMqWRRWNPlst2yw1eY0CS5pZ87nz1fH38t4u7-2cxRFl2ZgXoC8OI_uETQz48ktH-6v_idvKWfeNM6ScZA9EhZgZxyDhDVtFE1tX961RJdUAxDb7erbKn2i4pF2lxB7QWwZGlAUyZF_xQvsA8Vw22-rIvnpS_pS80iOC71Qz_asEFqhdErdo2CvbJTavGkWnKClTJoclNA1SN_a3bQyL7X5OvsWJHwSMv4sTn6pEIEl1ZosFse9ClKPX2p-OoRRZMYbhkExBZdQmxzMKZ7b8UhKpU9yRNSY87FOxohMuuDMlBEJlhJ52iwllCcU7Fm3rhMsxVkTIH30eBA2AakJyQOSSe9TThksFGtAhJ5P-2QOoJxMsZsTx1qa4gMcApIbA_JZJZ5WxbU2YswqaowB4_dKMRW-59yUsi2gxRNwvtFQwLizMet7AktHZFIaVDhrTeRqWLL9gkLQa25F6rLWJsKuiQ9Sm5yZPD7s_tLiOXPgqVgPAwKXAccF94ztbXCNAttbithaf9YFm4GWQegC1lD6NI7RcMmrnd53q27hFdUOiOWqiyizjGSOCMQd5iKhaP_Tr-rrv8SRGBMFdVUtLUwOKhGcF31mFsrSHH611aBhBSdzT9RnkZNjQBSJ6Jw0YXdIq6_2DZhzGZxx7g29whv70oVE9N3nZDUOZcrVZyRLr8W3qJb6H3lMlUg7hLmBJY65lsnBeX2d1TlIsC96wY6RfP0Hf7j8CCQhmPPRB-1sODllUDtH9wLNFu3e8ETachw6tBLFm_EcAc7V3StICE6Mq6rSbWlKKkd2bXsyLALPjd_7r8XLBCW1M3gkk0euvcyhHnimEbrPMdkv51WOvxtoxYQm8C_dip_afioCL5-w_09ttgEU4AxnESzjnJReyZsoyFMXCQGtbtT52ZPpljnSw92_mjfK8O6ZcJoKUVn3w-6QK2jkPm07C49dmTlDpFxaE8rqDqhwKzOpJZdPhIzOEUPXG4PMKyrTnFsvq2vXIo6cSKh2AO79xlA7Qj7ognVVOqgI111_t1AEynR7NXo731eb8siC452f0eBQvGrdzYjeZ61vPSRyfkaFopKJWjin8NP5JPP7HjJAkjz73CNqfz-xImvdSe7uQ7g2jheJ3h1DCgvy6oyuAcf7_H4o834fkj3rGNLzc2Tk7MbTx3MEZlftqk-4UeRS4abME-_rR_hyQ5UfHvRh2plBqjGGiKArT4f6cpS2TMlB-tE7eoRO9ITfsC5uUYqfpbzvUffx_j5N09u1ba9VGqKie4vb-j0c-vx9eeWLJmvf0KPNiir9DV9riuS3__leWodFhQG_3sFL__pC3aXhA2-PH0tkSftaJP0lD7scHycseQbCOjvoUgejXtRpIM8GTg-HBB8TgKE4FpAERVPsGtHlONLbG3Wt4yFOSbCpmWJk47wHV3TPh7cQoe4Pjgtc3DY9XmML1aXijP7PFX8I_lg1aY-Kqu3jqh2Sf1-X6K8ZlxErz4o0-XOf4u3xc51QBP1tdS1G7FgT1otjWtqflmr4evFz75Dcdkksuu6XTuJ93A5N_yfBPzD_u0zTNvESUh-lTrJbIayQNkxCoVbh0hlUxP3w-HVEqpz6e9Hv4Tu_v7JtrFK8N-2RzY3wJK75OwvtZ7E9XGjU6Q6X09NFePgpx6PRlnwR8P_quM06XqZxiL66QGwoluEImmGx6RuWwL_V9-8_xuRSLL1PYypmCWqz3my5eE0zgF6HLEeu2XiTJjSTbagsW33_D-5D5IA.aIxegg.YID1dV8ala8j0xMYpAVzTnnCxJ4'}
2025-08-01 09:28:20 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:28:20 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:28:20 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x0000018C4012D130>
2025-08-01 09:28:20 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:20 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:20 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:28:20 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:20 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:28:20 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:28:20 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:28:20 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:28:20 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:28:20 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:20 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:28:20 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:28:20 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:28:20 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:28:20 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:28:20 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:28:21 - managers.commands_server - DEBUG - Request completed in 2.54s with status 200
2025-08-01 09:28:21 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Tom-s-phone', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.381399154663086, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:28:40.758161'}, 'success': True}
2025-08-01 09:28:21 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:28:21 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-08-01 09:28:21 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-08-01 09:28:22 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:28:22 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:28:22 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:28:22 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 2, updated 1 devices
2025-08-01 09:28:22 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:28:30 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:28:30 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:28:30 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:30 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:30 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:30 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:30 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:30 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:28:30 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:28:30 - managers.commands_server - DEBUG - Request completed in 0.39s with status 200
2025-08-01 09:28:30 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'Openwrt'}, 'error': None, 'metadata': {'executionTime': 0.14380264282226562, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:28:49.305527'}, 'success': True}
2025-08-01 09:28:30 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:28:30 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'Openwrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:30 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:28:30 - endpoints.settings - INFO - Service call completed - result: Openwrt, error: None
2025-08-01 09:28:30 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'Openwrt', 'ssid': 'Openwrt'}
2025-08-01 09:28:30 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:28:30 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:28:30 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:28:30 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:30 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:30 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:30 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:30 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:30 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:28:30 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:28:30 - managers.commands_server - DEBUG - Request completed in 0.29s with status 200
2025-08-01 09:28:30 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'Openwrt'}, 'error': None, 'metadata': {'executionTime': 0.14276552200317383, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:28:49.706200'}, 'success': True}
2025-08-01 09:28:30 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:28:30 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'Openwrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:28:30 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:28:30 - endpoints.settings - INFO - Service call completed - result: Openwrt, error: None
2025-08-01 09:28:30 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'Openwrt', 'ssid': 'Openwrt'}
2025-08-01 09:28:30 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:28:37 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-08-01 09:28:37 - endpoints.settings - INFO - Request method: POST
2025-08-01 09:28:37 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-08-01 09:28:37 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:28:37 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 09:28:37 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'OpenWrt'}
2025-08-01 09:28:37 - endpoints.settings - INFO - WiFi name extracted from request: OpenWrt
2025-08-01 09:28:37 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:29:36 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:29:42 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:29:44 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:29:44 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:29:44 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:29:44 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:29:44 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:29:44 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:29:44 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:29:44 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:29:44 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:29:44 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:29:44 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:29:45 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-08-01 09:29:45 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.9087066650390625e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:30:03.823248'}, 'success': True}
2025-08-01 09:29:45 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:29:45 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:29:45 - managers.commands_server - DEBUG - Request completed in 0.28s with status 200
2025-08-01 09:29:45 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'Openwrt'}, 'error': None, 'metadata': {'executionTime': 0.14143133163452148, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:30:04.102183'}, 'success': True}
2025-08-01 09:29:45 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:29:45 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'Openwrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:29:45 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:29:45 - endpoints.settings - INFO - Service call completed - result: Openwrt, error: None
2025-08-01 09:29:45 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'Openwrt', 'ssid': 'Openwrt'}
2025-08-01 09:29:45 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:29:49 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-08-01 09:29:49 - endpoints.settings - INFO - Request method: POST
2025-08-01 09:29:49 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-08-01 09:29:49 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:29:49 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 09:29:49 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'OpenWrt'}
2025-08-01 09:29:49 - endpoints.settings - INFO - WiFi name extracted from request: OpenWrt
2025-08-01 09:29:49 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:29:49 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:29:49 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, wifi_name=OpenWrt
2025-08-01 09:29:49 - services.base - INFO - Service operation completed: update_wifi_name
2025-08-01 09:29:49 - services.commands_server_operations.settings_execute - INFO - Updating WiFi SSID to 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:29:49 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:29:49 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-08-01 09:29:49 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0001544952392578125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:30:08.396717"
  },
  "success": false
}

2025-08-01 09:29:49 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/wifi/ssid': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0001544952392578125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:30:08.396717"
  },
  "success": false
}

2025-08-01 09:29:49 - services.base - ERROR - Service operation failed: update_wifi_name - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0001544952392578125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:30:08.396717"
  },
  "success": false
}

2025-08-01 09:29:49 - endpoints.settings - INFO - Service call completed - result: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0001544952392578125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:30:08.396717"
  },
  "success": false
}

2025-08-01 09:29:49 - endpoints.settings - WARNING - Service returned error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "BAD_REQUEST",
    "details": null,
    "message": "Missing 'ssid' in request body"
  },
  "metadata": {
    "executionTime": 0.0001544952392578125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:30:08.396717"
  },
  "success": false
}

2025-08-01 09:31:03 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:31:05 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:31:05 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:31:05 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:05 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:05 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:05 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:05 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:05 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:31:05 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:31:05 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:31:05 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:31:05 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-08-01 09:31:05 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.457069396972656e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:31:24.669831'}, 'success': True}
2025-08-01 09:31:05 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:31:05 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:31:06 - managers.commands_server - DEBUG - Request completed in 0.30s with status 200
2025-08-01 09:31:06 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'Openwrt'}, 'error': None, 'metadata': {'executionTime': 0.1418900489807129, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:31:24.967564'}, 'success': True}
2025-08-01 09:31:06 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:31:06 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'Openwrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:06 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:31:06 - endpoints.settings - INFO - Service call completed - result: Openwrt, error: None
2025-08-01 09:31:06 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'Openwrt', 'ssid': 'Openwrt'}
2025-08-01 09:31:06 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:31:10 - endpoints.settings - INFO - === Starting update_wifi_name endpoint ===
2025-08-01 09:31:10 - endpoints.settings - INFO - Request method: POST
2025-08-01 09:31:10 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name
2025-08-01 09:31:10 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:10 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 09:31:10 - endpoints.settings - INFO - Request body parsed: {'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'wifi_name': 'OpenWrt'}
2025-08-01 09:31:10 - endpoints.settings - INFO - WiFi name extracted from request: OpenWrt
2025-08-01 09:31:10 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:10 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:10 - endpoints.settings - INFO - Calling update_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, wifi_name=OpenWrt
2025-08-01 09:31:10 - services.base - INFO - Service operation completed: update_wifi_name
2025-08-01 09:31:10 - services.commands_server_operations.settings_execute - INFO - Updating WiFi SSID to 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:10 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:31:11 - managers.commands_server - DEBUG - Request completed in 0.97s with status 200
2025-08-01 09:31:11 - managers.commands_server - DEBUG - Received response: {'data': 'WiFi SSID changed successfully to: OpenWrt', 'error': None, 'metadata': {'executionTime': 0.8091418743133545, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:31:30.207135'}, 'success': True}
2025-08-01 09:31:11 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:31:11 - services.commands_server_operations.settings_execute - INFO - Successfully updated SSID to 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:11 - services.base - INFO - Service operation completed: update_wifi_name
2025-08-01 09:31:11 - endpoints.settings - INFO - Service call completed - result: WiFi name updated to 'OpenWrt', error: None
2025-08-01 09:31:11 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'OpenWrt', 'message': 'WiFi name updated successfully'}
2025-08-01 09:31:11 - endpoints.settings - INFO - === update_wifi_name endpoint completed successfully ===
2025-08-01 09:31:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:51 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:31:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:51 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:31:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:51 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:31:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:51 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:31:51 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:31:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:31:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:31:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:31:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:31:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:31:52 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:31:55 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:31:55 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:31:55 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:55 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:55 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:55 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:55 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:55 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:31:55 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 6.723403930664062e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:32:14.260331'}, 'success': True}
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Request completed in 0.30s with status 200
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'OpenWrt'}, 'error': None, 'metadata': {'executionTime': 0.1423482894897461, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:32:14.557196'}, 'success': True}
2025-08-01 09:31:55 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:31:55 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:55 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:31:55 - endpoints.settings - INFO - Service call completed - result: OpenWrt, error: None
2025-08-01 09:31:55 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'OpenWrt', 'ssid': 'OpenWrt'}
2025-08-01 09:31:55 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:31:55 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:31:55 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:31:55 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:55 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:55 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:55 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:55 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:31:55 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:31:55 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:31:56 - managers.commands_server - DEBUG - Request completed in 0.29s with status 200
2025-08-01 09:31:56 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'OpenWrt'}, 'error': None, 'metadata': {'executionTime': 0.14168548583984375, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:32:14.865238'}, 'success': True}
2025-08-01 09:31:56 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:31:56 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:31:56 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:31:56 - endpoints.settings - INFO - Service call completed - result: OpenWrt, error: None
2025-08-01 09:31:56 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'OpenWrt', 'ssid': 'OpenWrt'}
2025-08-01 09:31:56 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
