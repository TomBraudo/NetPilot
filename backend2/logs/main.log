2025-07-31 14:01:13 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 14:01:25 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:01:25 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:01:25 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:01:25 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItNBQ.bIerM3QI2ZR2UGPal7giS3fSlAU'}
2025-07-31 14:01:25 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:01:25 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:01:25 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f4560f667d0>
2025-07-31 14:01:25 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:25 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:25 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:01:25 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:25 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:01:25 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:01:25 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:01:25 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:01:25 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:01:25 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:01:25 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:01:25 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:01:25 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:01:25 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:01:25 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:01:25 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:01:26 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:01:26 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:01:26 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:01:26 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItNBQ.bIerM3QI2ZR2UGPal7giS3fSlAU'}
2025-07-31 14:01:26 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:01:26 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:01:26 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f4560b62d70>
2025-07-31 14:01:26 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:26 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:26 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:01:26 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:26 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:01:26 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:01:26 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:01:26 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:01:26 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:01:26 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:01:26 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:01:26 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:01:26 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:01:26 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:01:26 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:01:26 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:01:26 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:01:26 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 14:01:26 - managers.commands_server - INFO - Checking commands server health
2025-07-31 14:01:26 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 14:01:26 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-07-31 14:01:26 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.528594970703125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T11:01:26.304438'}, 'success': True}
2025-07-31 14:01:26 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 14:01:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 14:01:26 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 14:01:26 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00092315673828125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:01:26.442772"
  },
  "success": false
}

2025-07-31 14:01:26 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00092315673828125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:01:26.442772"
  },
  "success": false
}

2025-07-31 14:01:26 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.00092315673828125,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:01:26.442772"
  },
  "success": false
}

2025-07-31 14:01:26 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 14:01:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:01:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:27 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:01:27 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 14:01:29 - managers.commands_server - DEBUG - Request completed in 2.51s with status 200
2025-07-31 14:01:29 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.3263208866119385, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:01:29.397582'}, 'success': True}
2025-07-31 14:01:29 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 14:01:29 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 14:01:29 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 14:01:30 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 14:01:30 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 14:01:30 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 14:01:30 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 14:01:30 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:01:33 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:34 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:01:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:34 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:01:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:01:34 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:01:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:07:50 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:07:50 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:07:50 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:07:50 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItOhg.m6Z4kxwqawTERq8VdyKS9CWoYfg'}
2025-07-31 14:07:50 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:07:50 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:07:50 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f4560bf2a70>
2025-07-31 14:07:50 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:50 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:50 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:07:50 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:50 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:07:50 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:07:50 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:07:51 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:07:51 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:07:51 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:07:51 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:07:51 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:07:51 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:07:51 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:07:51 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:07:51 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:07:51 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:07:51 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:07:51 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:07:51 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItOhg.m6Z4kxwqawTERq8VdyKS9CWoYfg'}
2025-07-31 14:07:51 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:07:51 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:07:51 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f4560bf34f0>
2025-07-31 14:07:51 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:51 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:51 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:07:51 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:51 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:07:51 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:07:51 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:07:51 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:07:51 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:07:51 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:07:51 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:07:51 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:07:51 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:07:51 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:07:51 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:07:51 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:07:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:51 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:07:51 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 14:07:51 - managers.commands_server - INFO - Checking commands server health
2025-07-31 14:07:51 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 14:07:52 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 14:07:52 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 4.673004150390625e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T11:07:51.519915'}, 'success': True}
2025-07-31 14:07:52 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 14:07:52 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 14:07:52 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 14:07:52 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0017154216766357422,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:07:51.658318"
  },
  "success": false
}

2025-07-31 14:07:52 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0017154216766357422,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:07:51.658318"
  },
  "success": false
}

2025-07-31 14:07:52 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0017154216766357422,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:07:51.658318"
  },
  "success": false
}

2025-07-31 14:07:52 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 14:07:52 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:07:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:52 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:07:52 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 14:07:55 - managers.commands_server - DEBUG - Request completed in 3.18s with status 200
2025-07-31 14:07:55 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.9826273918151855, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:07:55.193199'}, 'success': True}
2025-07-31 14:07:55 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 14:07:55 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 14:07:55 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 14:07:55 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 14:07:55 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 14:07:55 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 14:07:55 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 14:07:55 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:07:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:07:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:07:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:59 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:07:59 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:07:59 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:36:44 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:36:44 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:36:44 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:36:44 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItVSw.Uh5c3RSmRzxX3GLKtWrJ-zwNrYs'}
2025-07-31 14:36:44 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:36:44 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:36:44 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f455cd0c7f0>
2025-07-31 14:36:44 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:44 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:44 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:36:44 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:44 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:36:44 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:36:44 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:36:44 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:36:44 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:36:44 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:36:44 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:36:44 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:36:44 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:36:44 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:36:44 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:36:44 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:36:44 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:36:44 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:36:44 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:36:44 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItVTA.ZGvvgraG7hnPDXTmNnIi-jumFAw'}
2025-07-31 14:36:44 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:36:44 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:36:44 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f455cd0ddb0>
2025-07-31 14:36:44 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:44 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:44 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:36:44 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:44 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:36:44 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:36:44 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:36:45 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:36:45 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:36:45 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:36:45 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:36:45 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:36:45 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:36:45 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:36:45 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:36:45 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:36:45 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:45 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:36:45 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 14:36:45 - managers.commands_server - INFO - Checking commands server health
2025-07-31 14:36:45 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 14:36:45 - managers.commands_server - DEBUG - Request completed in 0.17s with status 200
2025-07-31 14:36:45 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.00034236907958984375, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T11:36:45.141549'}, 'success': True}
2025-07-31 14:36:45 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 14:36:45 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 14:36:45 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 14:36:45 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0030982494354248047,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:36:45.298665"
  },
  "success": false
}

2025-07-31 14:36:45 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0030982494354248047,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:36:45.298665"
  },
  "success": false
}

2025-07-31 14:36:45 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0030982494354248047,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:36:45.298665"
  },
  "success": false
}

2025-07-31 14:36:45 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 14:36:45 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:36:50 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:50 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:36:50 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 14:36:53 - managers.commands_server - DEBUG - Request completed in 3.18s with status 200
2025-07-31 14:36:53 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.9778130054473877, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:36:52.884569'}, 'success': True}
2025-07-31 14:36:53 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 14:36:53 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 14:36:53 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 14:36:53 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 14:36:53 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 14:36:53 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 14:36:53 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 14:36:53 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:36:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:56 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:56 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:36:56 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:36:56 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:56 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:36:56 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:36:56 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:45:49 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 14:45:54 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 14:46:01 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:46:01 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:46:01 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:46:01 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItXeA.JBYu9jOWHoDmbpL-7kOCBlbGepU'}
2025-07-31 14:46:01 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:46:01 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:46:01 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f1fa6f32830>
2025-07-31 14:46:01 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:01 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:01 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:46:01 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:01 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:46:01 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:46:01 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:46:01 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:46:01 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:46:01 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:46:01 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:46:01 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:46:01 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:46:01 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:46:01 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:46:01 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:46:01 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:46:01 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:46:01 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:46:01 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItXeQ.WmLZyMvn09Y21_1v9uNa2MgxASM'}
2025-07-31 14:46:01 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:46:01 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:46:01 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f1fa4922e30>
2025-07-31 14:46:01 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:01 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:01 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:46:01 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:01 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:46:01 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:46:01 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:46:01 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:46:01 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:46:01 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:46:01 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:46:01 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:46:01 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:46:01 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:46:01 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:46:01 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:46:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:02 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:46:02 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 14:46:02 - managers.commands_server - INFO - Checking commands server health
2025-07-31 14:46:02 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 14:46:02 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 14:46:02 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 7.2479248046875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T11:46:02.094498'}, 'success': True}
2025-07-31 14:46:02 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 14:46:02 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 14:46:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:02 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:46:02 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 14:46:02 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 14:46:02 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.000982046127319336,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:46:02.235228"
  },
  "success": false
}

2025-07-31 14:46:02 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.000982046127319336,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:46:02.235228"
  },
  "success": false
}

2025-07-31 14:46:02 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.000982046127319336,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:46:02.235228"
  },
  "success": false
}

2025-07-31 14:46:02 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 14:46:02 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:46:05 - managers.commands_server - DEBUG - Request completed in 3.22s with status 200
2025-07-31 14:46:05 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.0253090858459473, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:46:05.366498'}, 'success': True}
2025-07-31 14:46:05 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 14:46:05 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 14:46:05 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 14:46:05 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 14:46:05 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 14:46:06 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 14:46:06 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 14:46:06 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:46:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:08 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:46:09 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:46:09 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:09 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:09 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:46:09 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:09 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:46:09 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:10 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:46:10 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:46:10 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:46:10 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:46:10 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:48:26 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:48:26 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:48:26 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:48:26 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItYCg.wuWdvLKjVUG0eYIeks5bE-y-I6Q'}
2025-07-31 14:48:26 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:48:26 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:48:26 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f1fa496ba60>
2025-07-31 14:48:26 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:26 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:26 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:48:26 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:26 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:48:26 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:48:26 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:48:26 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:48:26 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:48:26 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:48:26 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:48:26 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:48:26 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:48:26 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:48:26 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:48:26 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:48:26 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:48:26 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:48:26 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:48:26 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItYCg.wuWdvLKjVUG0eYIeks5bE-y-I6Q'}
2025-07-31 14:48:26 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:48:26 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:48:26 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f1fa49b1e10>
2025-07-31 14:48:26 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:26 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:26 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:48:26 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:26 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:48:26 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:48:26 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:48:26 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:48:26 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:48:26 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:48:26 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:48:26 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:48:26 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:48:26 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:48:26 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:48:26 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:48:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:27 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:48:27 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 14:48:27 - managers.commands_server - INFO - Checking commands server health
2025-07-31 14:48:27 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 14:48:27 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 14:48:27 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.5272369384765625e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T11:48:26.677939'}, 'success': True}
2025-07-31 14:48:27 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 14:48:27 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 14:48:27 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 14:48:27 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009112358093261719,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:48:26.818506"
  },
  "success": false
}

2025-07-31 14:48:27 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009112358093261719,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:48:26.818506"
  },
  "success": false
}

2025-07-31 14:48:27 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009112358093261719,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:48:26.818506"
  },
  "success": false
}

2025-07-31 14:48:27 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 14:48:27 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:48:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:27 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:48:27 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 14:48:30 - managers.commands_server - DEBUG - Request completed in 2.58s with status 200
2025-07-31 14:48:30 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.3957736492156982, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:48:29.688207'}, 'success': True}
2025-07-31 14:48:30 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 14:48:30 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 14:48:30 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 14:48:30 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 14:48:30 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 14:48:30 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 14:48:30 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 14:48:30 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:48:31 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:31 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:48:31 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:48:31 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:31 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:31 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:48:31 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:31 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:48:31 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:48:31 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:48:31 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:31 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:48:31 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:48:31 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:33 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=52f4eb0b-b777-43c6-8f85-59d742b700e5, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:48:33 - middleware - ERROR - Unexpected error for router 52f4eb0b-b777-43c6-8f85-59d742b700e5 and user ec3c8136-679c-4504-a892-8c6ed45f63ff: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "/mnt/c/Users/Tom/OneDrive/Desktop/NetPilot/NetPilot/backend2/venv/lib/python3.10/site-packages/werkzeug/wrappers/request.py", line 611, in get_json
    rv = self.json_module.loads(data)
  File "/mnt/c/Users/Tom/OneDrive/Desktop/NetPilot/NetPilot/backend2/venv/lib/python3.10/site-packages/flask/json/provider.py", line 188, in loads
    return json.loads(s, **kwargs)
  File "/usr/lib/python3.10/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.10/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.10/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/Tom/OneDrive/Desktop/NetPilot/NetPilot/backend2/utils/middleware.py", line 40, in decorated_function
    return f(*args, **kwargs)
  File "/mnt/c/Users/Tom/OneDrive/Desktop/NetPilot/NetPilot/backend2/endpoints/whitelist.py", line 69, in remove_from_whitelist_route
    data = request.get_json()
  File "/mnt/c/Users/Tom/OneDrive/Desktop/NetPilot/NetPilot/backend2/venv/lib/python3.10/site-packages/werkzeug/wrappers/request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
  File "/mnt/c/Users/Tom/OneDrive/Desktop/NetPilot/NetPilot/backend2/venv/lib/python3.10/site-packages/flask/wrappers.py", line 130, in on_json_loading_failed
    return super().on_json_loading_failed(e)
  File "/mnt/c/Users/Tom/OneDrive/Desktop/NetPilot/NetPilot/backend2/venv/lib/python3.10/site-packages/werkzeug/wrappers/request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)
2025-07-31 14:51:48 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:51:48 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:51:48 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:51:48 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItY0w.oJ1A2tZMnhLpDvCAJ_eXnlENfy4'}
2025-07-31 14:51:48 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:51:48 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:51:48 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f1fa496b640>
2025-07-31 14:51:48 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:48 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:48 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:51:48 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:48 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:51:48 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:51:48 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:51:48 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:51:48 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:51:48 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:51:48 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:51:48 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:51:48 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:51:48 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:51:48 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:51:48 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:51:48 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 14:51:48 - endpoints.settings - INFO - Request method: GET
2025-07-31 14:51:48 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 14:51:48 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItY1A.uv23Kw3nzEgTmDAaEg28V64pfLA'}
2025-07-31 14:51:48 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 14:51:48 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 14:51:48 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f1fa49b2560>
2025-07-31 14:51:48 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:48 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:48 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 14:51:48 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:48 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 14:51:48 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 14:51:48 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 14:51:48 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:51:48 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 14:51:48 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:51:48 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 14:51:48 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 14:51:48 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 14:51:48 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 14:51:48 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 14:51:48 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 14:51:49 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:49 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:51:49 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 14:51:49 - managers.commands_server - INFO - Checking commands server health
2025-07-31 14:51:49 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 14:51:49 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 14:51:49 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.0279159545898438e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T11:51:49.176427'}, 'success': True}
2025-07-31 14:51:49 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 14:51:49 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 14:51:49 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:49 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:51:49 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 14:51:49 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 14:51:49 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006945133209228516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:51:49.319239"
  },
  "success": false
}

2025-07-31 14:51:49 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006945133209228516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:51:49.319239"
  },
  "success": false
}

2025-07-31 14:51:49 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006945133209228516,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T11:51:49.319239"
  },
  "success": false
}

2025-07-31 14:51:49 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 14:51:49 - services.base - INFO - Service operation completed: start_session
2025-07-31 14:51:52 - managers.commands_server - DEBUG - Request completed in 2.61s with status 200
2025-07-31 14:51:52 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.415388345718384, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:51:51.760264'}, 'success': True}
2025-07-31 14:51:52 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 14:51:52 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 14:51:52 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 14:51:52 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 14:51:52 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 14:51:52 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 14:51:52 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 14:51:52 - services.base - INFO - Service operation completed: scan_network
2025-07-31 14:51:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:53 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:51:53 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:51:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:53 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:51:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:53 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:51:53 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:51:53 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 14:51:54 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:54 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:54 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:51:54 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 14:51:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:51:55 - services.base - INFO - Service operation completed: remove_device_from_whitelist
2025-07-31 14:51:55 - services.db_operations.whitelist_db - INFO - Removed device 192.168.1.171 from whitelist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:51:55 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/remove
2025-07-31 14:51:57 - managers.commands_server - DEBUG - Request completed in 1.80s with status 200
2025-07-31 14:51:57 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.171 removed from whitelist.', 'error': None, 'metadata': {'executionTime': 1.611431360244751, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:51:57.290639'}, 'success': True}
2025-07-31 14:51:57 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/remove'
2025-07-31 14:51:57 - services.commands_server_operations.whitelist_execute - INFO - Removed device 192.168.1.171 from whitelist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:51:57 - services.base - INFO - Service operation completed: remove_device_from_whitelist
2025-07-31 14:52:03 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:52:03 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 14:52:03 - services.db_operations.whitelist_db - INFO - Set whitelist limit rate for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 30 Mbps
2025-07-31 14:52:03 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/limit-rate
2025-07-31 14:52:04 - managers.commands_server - DEBUG - Request completed in 0.54s with status 200
2025-07-31 14:52:04 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': '30'}, 'error': None, 'metadata': {'executionTime': 0.3774373531341553, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:52:04.050122'}, 'success': True}
2025-07-31 14:52:04 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/limit-rate'
2025-07-31 14:52:04 - services.commands_server_operations.whitelist_execute - INFO - Set whitelist rate limit to 30 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:52:04 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 14:52:04 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:52:04 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 14:52:05 - services.db_operations.whitelist_db - INFO - Activated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:52:05 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 14:52:10 - managers.commands_server - DEBUG - Request completed in 5.09s with status 200
2025-07-31 14:52:10 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode activated.', 'error': None, 'metadata': {'executionTime': 4.8562400341033936, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:52:09.746841'}, 'success': True}
2025-07-31 14:52:10 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 14:52:10 - services.commands_server_operations.whitelist_execute - INFO - Activated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:52:10 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 14:52:40 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 14:52:40 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 14:52:40 - services.db_operations.whitelist_db - INFO - Deactivated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:52:40 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 14:52:40 - managers.commands_server - INFO - Checking commands server health
2025-07-31 14:52:40 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 14:52:41 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-07-31 14:52:41 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 4.100799560546875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T11:52:40.505588'}, 'success': True}
2025-07-31 14:52:41 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 14:52:41 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 14:52:44 - managers.commands_server - DEBUG - Request completed in 3.69s with status 200
2025-07-31 14:52:44 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode deactivated.', 'error': None, 'metadata': {'executionTime': 3.4765403270721436, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T11:52:44.127167'}, 'success': True}
2025-07-31 14:52:44 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 14:52:44 - services.commands_server_operations.whitelist_execute - INFO - Deactivated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 14:52:44 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 15:32:53 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:32:58 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:33:06 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:33:06 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:33:06 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:33:06 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItigg.DurQkKY9MUNHHLdRNPLLcwc4YiU'}
2025-07-31 15:33:06 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:33:06 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:33:06 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7ffab9f6ad70>
2025-07-31 15:33:06 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:06 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:06 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:33:06 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:06 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:33:06 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:33:06 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:33:06 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:06 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:33:06 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:06 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:33:06 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:33:06 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:33:06 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:33:06 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:06 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:33:07 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:33:07 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:33:07 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:33:07 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItigg.DurQkKY9MUNHHLdRNPLLcwc4YiU'}
2025-07-31 15:33:07 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:33:07 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:33:07 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7ffab9b62dd0>
2025-07-31 15:33:07 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:07 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:07 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:33:07 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:07 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:33:07 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:33:07 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:33:07 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:07 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:33:07 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:07 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:33:07 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:33:07 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:33:07 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:33:07 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:07 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:33:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:07 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:33:07 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 15:33:07 - managers.commands_server - INFO - Checking commands server health
2025-07-31 15:33:07 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 15:33:07 - managers.commands_server - DEBUG - Request completed in 0.17s with status 200
2025-07-31 15:33:07 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.00034427642822265625, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T12:33:07.539789'}, 'success': True}
2025-07-31 15:33:07 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 15:33:07 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:33:07 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 15:33:07 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0024383068084716797,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:07.688824"
  },
  "success": false
}

2025-07-31 15:33:07 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0024383068084716797,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:07.688824"
  },
  "success": false
}

2025-07-31 15:33:07 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0024383068084716797,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:07.688824"
  },
  "success": false
}

2025-07-31 15:33:07 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:33:07 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:33:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:08 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:33:08 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 15:33:11 - managers.commands_server - DEBUG - Request completed in 3.13s with status 200
2025-07-31 15:33:11 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.9202210903167725, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:33:10.796202'}, 'success': True}
2025-07-31 15:33:11 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 15:33:11 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 15:33:11 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 15:33:11 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 15:33:11 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 15:33:11 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 15:33:11 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 15:33:11 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:33:12 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:12 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:12 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:12 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:12 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:13 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:13 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:13 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:13 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:13 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:13 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:13 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:14 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:14 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:22 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:22 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 15:33:22 - services.db_operations.whitelist_db - INFO - Set whitelist limit rate for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 90 Mbps
2025-07-31 15:33:22 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/limit-rate
2025-07-31 15:33:22 - managers.commands_server - DEBUG - Request completed in 0.53s with status 200
2025-07-31 15:33:22 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': 90}, 'error': None, 'metadata': {'executionTime': 0.38797616958618164, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:33:22.424857'}, 'success': True}
2025-07-31 15:33:22 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/limit-rate'
2025-07-31 15:33:22 - services.commands_server_operations.whitelist_execute - INFO - Set whitelist rate limit to 90 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:22 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 15:33:23 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:23 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 15:33:23 - services.db_operations.whitelist_db - INFO - Activated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:23 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 15:33:27 - managers.commands_server - DEBUG - Request completed in 4.52s with status 200
2025-07-31 15:33:27 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode activated.', 'error': None, 'metadata': {'executionTime': 4.868978977203369, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:33:27.843183'}, 'success': True}
2025-07-31 15:33:27 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 15:33:27 - services.commands_server_operations.whitelist_execute - INFO - Activated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:27 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 15:33:45 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:45 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 15:33:46 - services.db_operations.whitelist_db - INFO - Deactivated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:46 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 15:33:46 - managers.commands_server - INFO - Checking commands server health
2025-07-31 15:33:46 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 15:33:47 - managers.commands_server - DEBUG - Request completed in 0.58s with status 200
2025-07-31 15:33:47 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.956390380859375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T12:33:46.540747'}, 'success': True}
2025-07-31 15:33:47 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 15:33:47 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 15:33:51 - managers.commands_server - DEBUG - Request completed in 4.60s with status 200
2025-07-31 15:33:51 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode deactivated.', 'error': None, 'metadata': {'executionTime': 4.182406902313232, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:33:51.261332'}, 'success': True}
2025-07-31 15:33:51 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 15:33:51 - services.commands_server_operations.whitelist_execute - INFO - Deactivated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:51 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 15:33:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:53 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:53 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:33:53 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:33:53 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:33:53 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItisQ.lXqgvSny9DT7rHxQhpYp07WqdbI'}
2025-07-31 15:33:53 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:33:53 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:33:53 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7ffab9ba6350>
2025-07-31 15:33:53 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:53 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:53 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:33:53 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:53 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:33:53 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:33:53 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:33:53 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:53 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:53 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:33:53 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:53 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:33:53 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:33:53 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:33:53 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:33:53 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:53 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:33:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:53 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:53 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:54 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:54 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:54 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:33:54 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:33:54 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:33:54 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItisQ.lXqgvSny9DT7rHxQhpYp07WqdbI'}
2025-07-31 15:33:54 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:33:54 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:33:54 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7ffab9bf2590>
2025-07-31 15:33:54 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:54 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:54 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:33:54 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:54 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:33:54 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:33:54 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:33:54 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:54 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:33:54 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:54 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:33:54 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:33:54 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:33:54 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:33:54 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:54 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:33:54 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:54 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:54 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:54 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:54 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:54 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:33:54 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:33:54 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 15:33:54 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009763240814208984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:53.961126"
  },
  "success": false
}

2025-07-31 15:33:54 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009763240814208984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:53.961126"
  },
  "success": false
}

2025-07-31 15:33:54 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009763240814208984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:53.961126"
  },
  "success": false
}

2025-07-31 15:33:54 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:33:54 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:33:54 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:55 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:55 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:55 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:55 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:55 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:33:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:55 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:33:55 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:55 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:33:55 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItisw.TARcbSxEyWmVd_fTfpyua1Q1OnA'}
2025-07-31 15:33:55 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:33:55 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:33:55 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7ffab9ba7970>
2025-07-31 15:33:55 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:55 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:55 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:33:55 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:55 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:33:55 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:33:55 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:33:56 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:33:56 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:56 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:33:56 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:56 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:33:56 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:33:56 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:33:56 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:33:56 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:56 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:33:56 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:56 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:56 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:56 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:33:56 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:33:56 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:33:56 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:33:56 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItisw.TARcbSxEyWmVd_fTfpyua1Q1OnA'}
2025-07-31 15:33:56 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:33:56 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:33:56 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7ffab97290c0>
2025-07-31 15:33:56 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:56 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:56 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:33:56 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:56 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:33:56 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:33:56 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:33:56 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:56 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:33:56 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:33:56 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 15:33:56 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0026092529296875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:56.667338"
  },
  "success": false
}

2025-07-31 15:33:56 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0026092529296875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:56.667338"
  },
  "success": false
}

2025-07-31 15:33:56 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0026092529296875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:33:56.667338"
  },
  "success": false
}

2025-07-31 15:33:56 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:33:56 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:33:56 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:56 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:33:56 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:56 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:33:56 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:33:56 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:33:56 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:33:56 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:33:56 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:33:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:57 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 15:33:57 - services.db_operations.whitelist_db - INFO - Set whitelist limit rate for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 90 Mbps
2025-07-31 15:33:57 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/limit-rate
2025-07-31 15:33:58 - managers.commands_server - DEBUG - Request completed in 0.52s with status 200
2025-07-31 15:33:58 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': 90}, 'error': None, 'metadata': {'executionTime': 0.3831825256347656, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:33:58.385205'}, 'success': True}
2025-07-31 15:33:58 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/limit-rate'
2025-07-31 15:33:58 - services.commands_server_operations.whitelist_execute - INFO - Set whitelist rate limit to 90 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:58 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 15:33:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:33:58 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 15:33:58 - services.db_operations.whitelist_db - INFO - Activated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:33:58 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 15:34:05 - managers.commands_server - DEBUG - Request completed in 7.18s with status 200
2025-07-31 15:34:05 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode activated.', 'error': None, 'metadata': {'executionTime': 6.839228391647339, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:34:05.769470'}, 'success': True}
2025-07-31 15:34:05 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 15:34:05 - services.commands_server_operations.whitelist_execute - INFO - Activated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:34:05 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 15:34:24 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:34:24 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 15:34:24 - services.db_operations.whitelist_db - INFO - Deactivated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:34:24 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 15:34:24 - managers.commands_server - INFO - Checking commands server health
2025-07-31 15:34:24 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 15:34:24 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 15:34:24 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.838539123535156e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T12:34:23.967674'}, 'success': True}
2025-07-31 15:34:24 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 15:34:24 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 15:34:27 - managers.commands_server - DEBUG - Request completed in 3.31s with status 200
2025-07-31 15:34:27 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode deactivated.', 'error': None, 'metadata': {'executionTime': 3.663529634475708, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:34:27.771047'}, 'success': True}
2025-07-31 15:34:27 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 15:34:27 - services.commands_server_operations.whitelist_execute - INFO - Deactivated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:34:27 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 15:49:42 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:49:47 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:49:54 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:49:54 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:49:54 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:49:54 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItmcQ.k6CND_I1krr3JlAnbERwhYc-Oos'}
2025-07-31 15:49:54 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:49:54 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:49:54 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f2beb1668f0>
2025-07-31 15:49:54 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:49:54 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:49:54 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:49:54 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:49:54 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:49:54 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:49:54 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:49:54 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:49:54 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:49:54 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:49:54 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:49:54 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:49:54 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:49:54 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:49:54 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:49:54 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:49:54 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:49:54 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:49:54 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:49:54 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItmcg.8cQLzar9clFPrmuJbuKp2OP24nE'}
2025-07-31 15:49:54 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:49:54 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:49:54 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f2beb166cb0>
2025-07-31 15:49:54 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:49:54 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:49:54 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:49:54 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:49:54 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:49:54 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:49:54 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:49:54 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:49:54 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:49:54 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:49:54 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:49:54 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:49:54 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:49:54 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:49:54 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:49:54 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:49:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:49:55 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:49:55 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 15:49:55 - managers.commands_server - INFO - Checking commands server health
2025-07-31 15:49:55 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 15:49:55 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 15:49:55 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.0040740966796875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T12:49:55.162855'}, 'success': True}
2025-07-31 15:49:55 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 15:49:55 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:49:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:49:55 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:49:55 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 15:49:56 - managers.commands_server - DEBUG - Request completed in 1.41s with status 500
2025-07-31 15:49:56 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "INFRASTRUCTURE_SETUP_FAILED",
    "details": null,
    "message": "Infrastructure setup failed: Infrastructure setup failed: 'NoneType' object has no attribute 'strip'"
  },
  "metadata": {
    "executionTime": 1.2485008239746094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:49:56.540754"
  },
  "success": false
}

2025-07-31 15:49:56 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "INFRASTRUCTURE_SETUP_FAILED",
    "details": null,
    "message": "Infrastructure setup failed: Infrastructure setup failed: 'NoneType' object has no attribute 'strip'"
  },
  "metadata": {
    "executionTime": 1.2485008239746094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:49:56.540754"
  },
  "success": false
}

2025-07-31 15:49:56 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "INFRASTRUCTURE_SETUP_FAILED",
    "details": null,
    "message": "Infrastructure setup failed: Infrastructure setup failed: 'NoneType' object has no attribute 'strip'"
  },
  "metadata": {
    "executionTime": 1.2485008239746094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:49:56.540754"
  },
  "success": false
}

2025-07-31 15:49:56 - services.commands_server_operations.session_execute - ERROR - Session start failed for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "INFRASTRUCTURE_SETUP_FAILED",
    "details": null,
    "message": "Infrastructure setup failed: Infrastructure setup failed: 'NoneType' object has no attribute 'strip'"
  },
  "metadata": {
    "executionTime": 1.2485008239746094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:49:56.540754"
  },
  "success": false
}

2025-07-31 15:49:56 - services.base - ERROR - Service operation failed: start_session - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "INFRASTRUCTURE_SETUP_FAILED",
    "details": null,
    "message": "Infrastructure setup failed: Infrastructure setup failed: 'NoneType' object has no attribute 'strip'"
  },
  "metadata": {
    "executionTime": 1.2485008239746094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:49:56.540754"
  },
  "success": false
}

2025-07-31 15:49:58 - managers.commands_server - DEBUG - Request completed in 3.31s with status 200
2025-07-31 15:49:58 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.089061975479126, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:49:58.505226'}, 'success': True}
2025-07-31 15:49:58 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 15:49:58 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 15:49:58 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 15:49:58 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 15:49:59 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 15:49:59 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 15:49:59 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 15:49:59 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:50:00 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:00 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:50:00 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:50:00 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:00 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:50:00 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:00 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:00 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:50:00 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:01 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 15:50:01 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:50:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:01 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:50:01 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 15:50:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:02 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 15:50:02 - services.db_operations.whitelist_db - INFO - Set whitelist limit rate for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 90 Mbps
2025-07-31 15:50:02 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/limit-rate
2025-07-31 15:50:03 - managers.commands_server - DEBUG - Request completed in 0.57s with status 200
2025-07-31 15:50:03 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': 90}, 'error': None, 'metadata': {'executionTime': 0.40495920181274414, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:50:03.052327'}, 'success': True}
2025-07-31 15:50:03 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/limit-rate'
2025-07-31 15:50:03 - services.commands_server_operations.whitelist_execute - INFO - Set whitelist rate limit to 90 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:50:03 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 15:50:03 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:03 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 15:50:03 - services.db_operations.whitelist_db - INFO - Activated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:50:03 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 15:50:14 - managers.commands_server - DEBUG - Request completed in 10.82s with status 200
2025-07-31 15:50:14 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode activated.', 'error': None, 'metadata': {'executionTime': 10.514828205108643, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:50:14.036467'}, 'success': True}
2025-07-31 15:50:14 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 15:50:14 - services.commands_server_operations.whitelist_execute - INFO - Activated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:50:14 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 15:50:22 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:50:22 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 15:50:23 - services.db_operations.whitelist_db - INFO - Deactivated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:50:23 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 15:50:28 - managers.commands_server - DEBUG - Request completed in 5.32s with status 200
2025-07-31 15:50:28 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode deactivated.', 'error': None, 'metadata': {'executionTime': 4.895187139511108, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:50:28.324078'}, 'success': True}
2025-07-31 15:50:28 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 15:50:28 - services.commands_server_operations.whitelist_execute - INFO - Deactivated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:50:28 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
