2025-07-31 12:54:25 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:54:25 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:54:25 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:54:25 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3MtuU1FKDGW2DL7NhYzEZktnM8FT__pJbo1q96EVvkByReU6cE-GMv3ePJm5Lv4qrfve1b4f4y27o4nb39e-dH4Zx1z36Oo-r3dfd4mP0m48wBi5R6uwbHXGP3JMOdF5Gx369-GZzB5pcE7qGKUS9iJe4qqbUBkl0vihmKKwNOzgVLsFPASRB_EhPCdBYVnP8A3diGVN-XeeC8Ov2zpDPiUESVmAJfhSOZlzpCesMFY-0NnWiEYNSF2K2HiNqC85N3ZNJYBs4Od_Yej7v61yd-UXzT4l7YfzcYHTZEDRJvGMKuCvIbEcgtRIxTBbdB6koBhOCHg67L7t4bkAbdw8feoEeSJwmaYzCfscB9AEn6eOXHYh--RIv5zQQQ3ADZ8NaZVQFcieXfeOdZEou9Vw1lUkx5UkVvUxxNMw12VzN0kxdk9U1FdTFFNJd-cnNZNQzhVIVeXA9nZH4zmyYFxvVwFN7gzRNiCtbqI4kfQrXerxiQuZiNBpU-notozHAos4zyCzAkA0ijasNQp4VzlpvZjIpGb-qnEJc7wziVx6mclGrYFHv4nbmbSWWCOrfXcLFUkQRoyl0UvRaClMoKYOH0aOHzUV0V4uwVEfIWQSVNkD-XgYTcO92Lmc1UEwGVdacUDjIu2rr7YRC6Q0WZRrur2oVOCqUbC0K5_WqU2A3Ua0jjq1CSagjg0xDif2t5W6v3v0M9ZCI55DIdeM1oL0VxADQ3oyHHPykZgmqmi55M_P5xskk1Isqp60Ndu86RbfVBTUVQenB2oUlMlPGw9DUd6Zf9XvO9nt-RqW9-I7XeI4GbpW-RI4FcQTkjqVpiCWbn0t4Ql0DD9fQiWQbPwPHtmcbVV-xOLMbVlDSENfaeqWoeT_6nLf4XHEN8762kELy7kVjbTpKMg2cz3OZL9qDLP6o71Mj27i4joal9R89n2tlIasAo6tAtNEQsxeoYYjg_ej02fvRNWhWw0IiwFTFdejWxFXPRmbDAOhLy86Ca5EfBkbzDi9kZmn1tn0uAkueQxHlbcTrlFLATaEw45ynwzXHro6yzVPl370iKKA2By1-efo57h7UUXSx_TvnQR_d-xnd_PAdAYGxWV23ObRQNXMRiFfEEpzPjMfhX4RUzXxRM51-exGUkkq1yfNtx6ESmIVVyR2Luzw75FSwnY1a15oANWgf5LgmpHa5kS_D4GxWaciHZKcSYRFasMdOJ5Gy8IM8Zxmf54qbcB8BHnwQK1PpHtOFcytm8sgGZDytEac9NYnWFMkKVglO8Vqoh3jwLsh4Szj6ZCnl_OqmZRW1KrNZ9IIa9fOjasZHZe8Z1_soVURuwg7D94cxK_nAfbL9x0M8juUxHR7zQH3oo86qMxtYmcNMDxp5EKaS9LGVnbCudocPwF3bi-uVh5M1H6MjKR58YACgCtd0YV7Hq6I0eq48BcDoRH6WuKf6ouarag_YY9-oF2dxzPapDKrWBgG-CJSIaYRDHvfCMPDWBF-3LqybGD5Y8FuB6K-075vu6_v7NE1vSV0nRew3oHsL6_LdH_r0fVsDoHrWb01bP0ER_-8X4tIHBST8fCEf_fLJysZ-C_fK9_WyHftcMf0j9bsUprFmf79M-CuRnDZwrZdjZHPBwOP-EME0isDX-IhgKE7gx31DZONIHHI8KcMhjDGEKkkwHsO0R5LmlQ5vftN0P2rc6MK66uGC20rdENfm_4z4XfDXXQhf3Gfc-u1w_Heyxf7MP0ao-wni6OeehVvljzVDfNk9_RIUy6Pyy82w70DwdgJGaOOP6EYBY-D3iiKp7S7oOpj92SK4uuuh6n9W_KOMPyD--oVe1VW4Ra_UpU6pNqUv7SU1ZDFegAbTDQj7oY3_wC5S_L8b8e6_M6fkWIdXv85vnetc9fM-YzHeV2-XmrszoRrvLT0uWbQpOUcoMH-6usbK_KujqX24TegQbJ1BcRShjlAYTdPoEaMRkkR23759H50H2OYBp6gIedLEHomfwZ44xMjep2NiHx8OQUiRJB7j9O7bP54d-Io.aIs9UQ.j5Hs_jWCvCxOnGdrQsrbkiApflg'}
2025-07-31 12:54:25 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:54:25 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:54:25 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x06F96A80>
2025-07-31 12:54:25 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:25 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:25 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:54:25 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:25 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:54:25 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:54:25 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:54:26 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:26 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:54:26 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:54:26 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:54:26 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:54:26 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:54:26 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:54:26 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:26 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:54:26 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 12:54:26 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 12:54:26 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010671615600585938,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.707806"
  },
  "success": false
}

2025-07-31 12:54:26 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010671615600585938,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.707806"
  },
  "success": false
}

2025-07-31 12:54:26 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010671615600585938,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.707806"
  },
  "success": false
}

2025-07-31 12:54:26 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 12:54:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:26 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:26 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 12:54:27 - managers.commands_server - DEBUG - Request completed in 0.17s with status 400
2025-07-31 12:54:27 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007622241973876953,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.899931"
  },
  "success": false
}

2025-07-31 12:54:27 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007622241973876953,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.899931"
  },
  "success": false
}

2025-07-31 12:54:27 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007622241973876953,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:26.899931"
  },
  "success": false
}

2025-07-31 12:54:27 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 12:54:27 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:27 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:27 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:54:27 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 12:54:28 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:54:28 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:54:28 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:54:28 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3MtuU1FKDGW2DL7NhYzEZktnM8FT__pJbo1q96EVvkByReU6cE-GMv3ePJm5Lv4qrfve1b4f4y27o4nb39e-dH4Zx1z36Oo-r3dfd4mP0m48wBi5R6uwbHXGP3JMOdF5Gx369-GZzB5pcE7qGKUS9iJe4qqbUBkl0vihmKKwNOzgVLsFPASRB_EhPCdBYVnP8A3diGVN-XeeC8Ov2zpDPiUESVmAJfhSOZlzpCesMFY-0NnWiEYNSF2K2HiNqC85N3ZNJYBs4Od_Yej7v61yd-UXzT4l7YfzcYHTZEDRJvGMKuCvIbEcgtRIxTBbdB6koBhOCHg67L7t4bkAbdw8feoEeSJwmaYzCfscB9AEn6eOXHYh--RIv5zQQQ3ADZ8NaZVQFcieXfeOdZEou9Vw1lUkx5UkVvUxxNMw12VzN0kxdk9U1FdTFFNJd-cnNZNQzhVIVeXA9nZH4zmyYFxvVwFN7gzRNiCtbqI4kfQrXerxiQuZiNBpU-notozHAos4zyCzAkA0ijasNQp4VzlpvZjIpGb-qnEJc7wziVx6mclGrYFHv4nbmbSWWCOrfXcLFUkQRoyl0UvRaClMoKYOH0aOHzUV0V4uwVEfIWQSVNkD-XgYTcO92Lmc1UEwGVdacUDjIu2rr7YRC6Q0WZRrur2oVOCqUbC0K5_WqU2A3Ua0jjq1CSagjg0xDif2t5W6v3v0M9ZCI55DIdeM1oL0VxADQ3oyHHPykZgmqmi55M_P5xskk1Isqp60Ndu86RbfVBTUVQenB2oUlMlPGw9DUd6Zf9XvO9nt-RqW9-I7XeI4GbpW-RI4FcQTkjqVpiCWbn0t4Ql0DD9fQiWQbPwPHtmcbVV-xOLMbVlDSENfaeqWoeT_6nLf4XHEN8762kELy7kVjbTpKMg2cz3OZL9qDLP6o71Mj27i4joal9R89n2tlIasAo6tAtNEQsxeoYYjg_ej02fvRNWhWw0IiwFTFdejWxFXPRmbDAOhLy86Ca5EfBkbzDi9kZmn1tn0uAkueQxHlbcTrlFLATaEw45ynwzXHro6yzVPl370iKKA2By1-efo57h7UUXSx_TvnQR_d-xnd_PAdAYGxWV23ObRQNXMRiFfEEpzPjMfhX4RUzXxRM51-exGUkkq1yfNtx6ESmIVVyR2Luzw75FSwnY1a15oANWgf5LgmpHa5kS_D4GxWaciHZKcSYRFasMdOJ5Gy8IM8Zxmf54qbcB8BHnwQK1PpHtOFcytm8sgGZDytEac9NYnWFMkKVglO8Vqoh3jwLsh4Szj6ZCnl_OqmZRW1KrNZ9IIa9fOjasZHZe8Z1_soVURuwg7D94cxK_nAfbL9x0M8juUxHR7zQH3oo86qMxtYmcNMDxp5EKaS9LGVnbCudocPwF3bi-uVh5M1H6MjKR58YACgCtd0YV7Hq6I0eq48BcDoRH6WuKf6ouarag_YY9-oF2dxzPapDKrWBgG-CJSIaYRDHvfCMPDWBF-3LqybGD5Y8FuB6K-075vu6_v7NE1vSV0nRew3oHsL6_LdH_r0fVsDoHrWb01bP0ER_-8X4tIHBST8fCEf_fLJysZ-C_fK9_WyHftcMf0j9bsUprFmf79M-CuRnDZwrZdjZHPBwOP-EME0isDX-IhgKE7gx31DZONIHHI8KcMhjDGEKkkwHsO0R5LmlQ5vftN0P2rc6MK66uGC20rdENfm_4z4XfDXXQhf3Gfc-u1w_Heyxf7MP0ao-wni6OeehVvljzVDfNk9_RIUy6Pyy82w70DwdgJGaOOP6EYBY-D3iiKp7S7oOpj92SK4uuuh6n9W_KOMPyD--oVe1VW4Ra_UpU6pNqUv7SU1ZDFegAbTDQj7oY3_wC5S_L8b8e6_M6fkWIdXv85vnetc9fM-YzHeV2-XmrszoRrvLT0uWbQpOUcoMH-6usbK_KujqX24TegQbJ1BcRShjlAYTdPoEaMRkkR23759H50H2OYBp6gIedLEHomfwZ44xMjep2NiHx8OQUiRJB7j9O7bP54d-Io.aIs9Uw.MM-nLZtAlgwmIQ6W31Vciscpri0'}
2025-07-31 12:54:28 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:54:28 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:54:28 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x01C45330>
2025-07-31 12:54:28 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:28 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:28 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:54:28 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:28 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:54:28 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:54:28 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:54:28 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:28 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:54:28 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:54:28 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:54:28 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:54:28 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:54:28 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:54:28 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:28 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:54:30 - managers.commands_server - DEBUG - Request completed in 2.54s with status 200
2025-07-31 12:54:30 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.387146234512329, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T09:54:29.795139'}, 'success': True}
2025-07-31 12:54:30 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 12:54:30 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 12:54:30 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 12:54:30 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 12:54:30 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 12:54:30 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 12:54:30 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 12:54:30 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:54:56 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:54:56 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:54:56 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:54:56 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3MtuU1FKDGW2DL7NhYzEZktnM8FT__pJbo1q96EVvkByReU6cE-GMv3ePJm5Lv4qrfve1b4f4y27o4nb39e-dH4Zx1z36Oo-r3dfd4mP0m48wBi5R6uwbHXGP3JMOdF5Gx369-GZzB5pcE7qGKUS9iJe4qqbUBkl0vihmKKwNOzgVLsFPASRB_EhPCdBYVnP8A3diGVN-XeeC8Ov2zpDPiUESVmAJfhSOZlzpCesMFY-0NnWiEYNSF2K2HiNqC85N3ZNJYBs4Od_Yej7v61yd-UXzT4l7YfzcYHTZEDRJvGMKuCvIbEcgtRIxTBbdB6koBhOCHg67L7t4bkAbdw8feoEeSJwmaYzCfscB9AEn6eOXHYh--RIv5zQQQ3ADZ8NaZVQFcieXfeOdZEou9Vw1lUkx5UkVvUxxNMw12VzN0kxdk9U1FdTFFNJd-cnNZNQzhVIVeXA9nZH4zmyYFxvVwFN7gzRNiCtbqI4kfQrXerxiQuZiNBpU-notozHAos4zyCzAkA0ijasNQp4VzlpvZjIpGb-qnEJc7wziVx6mclGrYFHv4nbmbSWWCOrfXcLFUkQRoyl0UvRaClMoKYOH0aOHzUV0V4uwVEfIWQSVNkD-XgYTcO92Lmc1UEwGVdacUDjIu2rr7YRC6Q0WZRrur2oVOCqUbC0K5_WqU2A3Ua0jjq1CSagjg0xDif2t5W6v3v0M9ZCI55DIdeM1oL0VxADQ3oyHHPykZgmqmi55M_P5xskk1Isqp60Ndu86RbfVBTUVQenB2oUlMlPGw9DUd6Zf9XvO9nt-RqW9-I7XeI4GbpW-RI4FcQTkjqVpiCWbn0t4Ql0DD9fQiWQbPwPHtmcbVV-xOLMbVlDSENfaeqWoeT_6nLf4XHEN8762kELy7kVjbTpKMg2cz3OZL9qDLP6o71Mj27i4joal9R89n2tlIasAo6tAtNEQsxeoYYjg_ej02fvRNWhWw0IiwFTFdejWxFXPRmbDAOhLy86Ca5EfBkbzDi9kZmn1tn0uAkueQxHlbcTrlFLATaEw45ynwzXHro6yzVPl370iKKA2By1-efo57h7UUXSx_TvnQR_d-xnd_PAdAYGxWV23ObRQNXMRiFfEEpzPjMfhX4RUzXxRM51-exGUkkq1yfNtx6ESmIVVyR2Luzw75FSwnY1a15oANWgf5LgmpHa5kS_D4GxWaciHZKcSYRFasMdOJ5Gy8IM8Zxmf54qbcB8BHnwQK1PpHtOFcytm8sgGZDytEac9NYnWFMkKVglO8Vqoh3jwLsh4Szj6ZCnl_OqmZRW1KrNZ9IIa9fOjasZHZe8Z1_soVURuwg7D94cxK_nAfbL9x0M8juUxHR7zQH3oo86qMxtYmcNMDxp5EKaS9LGVnbCudocPwF3bi-uVh5M1H6MjKR58YACgCtd0YV7Hq6I0eq48BcDoRH6WuKf6ouarag_YY9-oF2dxzPapDKrWBgG-CJSIaYRDHvfCMPDWBF-3LqybGD5Y8FuB6K-075vu6_v7NE1vSV0nRew3oHsL6_LdH_r0fVsDoHrWb01bP0ER_-8X4tIHBST8fCEf_fLJysZ-C_fK9_WyHftcMf0j9bsUprFmf79M-CuRnDZwrZdjZHPBwOP-EME0isDX-IhgKE7gx31DZONIHHI8KcMhjDGEKkkwHsO0R5LmlQ5vftN0P2rc6MK66uGC20rdENfm_4z4XfDXXQhf3Gfc-u1w_Heyxf7MP0ao-wni6OeehVvljzVDfNk9_RIUy6Pyy82w70DwdgJGaOOP6EYBY-D3iiKp7S7oOpj92SK4uuuh6n9W_KOMPyD--oVe1VW4Ra_UpU6pNqUv7SU1ZDFegAbTDQj7oY3_wC5S_L8b8e6_M6fkWIdXv85vnetc9fM-YzHeV2-XmrszoRrvLT0uWbQpOUcoMH-6usbK_KujqX24TegQbJ1BcRShjlAYTdPoEaMRkkR23759H50H2OYBp6gIedLEHomfwZ44xMjep2NiHx8OQUiRJB7j9O7bP54d-Io.aIs9cA.acu9HpwFo_j6O-1gLEV1680nygU'}
2025-07-31 12:54:56 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:54:56 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:54:56 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x01C45780>
2025-07-31 12:54:56 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:56 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:56 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:54:56 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:56 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:54:56 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:54:56 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:54:57 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:54:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:54:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:54:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:54:57 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:54:57 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:54:57 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:54:57 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3MtuU1FKDGW2DL7NhYzEZktnM8FT__pJbo1q96EVvkByReU6cE-GMv3ePJm5Lv4qrfve1b4f4y27o4nb39e-dH4Zx1z36Oo-r3dfd4mP0m48wBi5R6uwbHXGP3JMOdF5Gx369-GZzB5pcE7qGKUS9iJe4qqbUBkl0vihmKKwNOzgVLsFPASRB_EhPCdBYVnP8A3diGVN-XeeC8Ov2zpDPiUESVmAJfhSOZlzpCesMFY-0NnWiEYNSF2K2HiNqC85N3ZNJYBs4Od_Yej7v61yd-UXzT4l7YfzcYHTZEDRJvGMKuCvIbEcgtRIxTBbdB6koBhOCHg67L7t4bkAbdw8feoEeSJwmaYzCfscB9AEn6eOXHYh--RIv5zQQQ3ADZ8NaZVQFcieXfeOdZEou9Vw1lUkx5UkVvUxxNMw12VzN0kxdk9U1FdTFFNJd-cnNZNQzhVIVeXA9nZH4zmyYFxvVwFN7gzRNiCtbqI4kfQrXerxiQuZiNBpU-notozHAos4zyCzAkA0ijasNQp4VzlpvZjIpGb-qnEJc7wziVx6mclGrYFHv4nbmbSWWCOrfXcLFUkQRoyl0UvRaClMoKYOH0aOHzUV0V4uwVEfIWQSVNkD-XgYTcO92Lmc1UEwGVdacUDjIu2rr7YRC6Q0WZRrur2oVOCqUbC0K5_WqU2A3Ua0jjq1CSagjg0xDif2t5W6v3v0M9ZCI55DIdeM1oL0VxADQ3oyHHPykZgmqmi55M_P5xskk1Isqp60Ndu86RbfVBTUVQenB2oUlMlPGw9DUd6Zf9XvO9nt-RqW9-I7XeI4GbpW-RI4FcQTkjqVpiCWbn0t4Ql0DD9fQiWQbPwPHtmcbVV-xOLMbVlDSENfaeqWoeT_6nLf4XHEN8762kELy7kVjbTpKMg2cz3OZL9qDLP6o71Mj27i4joal9R89n2tlIasAo6tAtNEQsxeoYYjg_ej02fvRNWhWw0IiwFTFdejWxFXPRmbDAOhLy86Ca5EfBkbzDi9kZmn1tn0uAkueQxHlbcTrlFLATaEw45ynwzXHro6yzVPl370iKKA2By1-efo57h7UUXSx_TvnQR_d-xnd_PAdAYGxWV23ObRQNXMRiFfEEpzPjMfhX4RUzXxRM51-exGUkkq1yfNtx6ESmIVVyR2Luzw75FSwnY1a15oANWgf5LgmpHa5kS_D4GxWaciHZKcSYRFasMdOJ5Gy8IM8Zxmf54qbcB8BHnwQK1PpHtOFcytm8sgGZDytEac9NYnWFMkKVglO8Vqoh3jwLsh4Szj6ZCnl_OqmZRW1KrNZ9IIa9fOjasZHZe8Z1_soVURuwg7D94cxK_nAfbL9x0M8juUxHR7zQH3oo86qMxtYmcNMDxp5EKaS9LGVnbCudocPwF3bi-uVh5M1H6MjKR58YACgCtd0YV7Hq6I0eq48BcDoRH6WuKf6ouarag_YY9-oF2dxzPapDKrWBgG-CJSIaYRDHvfCMPDWBF-3LqybGD5Y8FuB6K-075vu6_v7NE1vSV0nRew3oHsL6_LdH_r0fVsDoHrWb01bP0ER_-8X4tIHBST8fCEf_fLJysZ-C_fK9_WyHftcMf0j9bsUprFmf79M-CuRnDZwrZdjZHPBwOP-EME0isDX-IhgKE7gx31DZONIHHI8KcMhjDGEKkkwHsO0R5LmlQ5vftN0P2rc6MK66uGC20rdENfm_4z4XfDXXQhf3Gfc-u1w_Heyxf7MP0ao-wni6OeehVvljzVDfNk9_RIUy6Pyy82w70DwdgJGaOOP6EYBY-D3iiKp7S7oOpj92SK4uuuh6n9W_KOMPyD--oVe1VW4Ra_UpU6pNqUv7SU1ZDFegAbTDQj7oY3_wC5S_L8b8e6_M6fkWIdXv85vnetc9fM-YzHeV2-XmrszoRrvLT0uWbQpOUcoMH-6usbK_KujqX24TegQbJ1BcRShjlAYTdPoEaMRkkR23759H50H2OYBp6gIedLEHomfwZ44xMjep2NiHx8OQUiRJB7j9O7bP54d-Io.aIs9cA.acu9HpwFo_j6O-1gLEV1680nygU'}
2025-07-31 12:54:57 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:54:57 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:54:57 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x06F958D0>
2025-07-31 12:54:57 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:57 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:57 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:54:57 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:57 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:54:57 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:54:57 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:54:57 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:54:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:54:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:54:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:54:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:54:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:54:57 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:57 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 12:54:57 - managers.commands_server - INFO - Checking commands server health
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.3126602172851562e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T09:54:57.719938'}, 'success': True}
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 12:54:57 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 12:54:58 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 12:54:58 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007033348083496094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:57.872605"
  },
  "success": false
}

2025-07-31 12:54:58 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007033348083496094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:57.872605"
  },
  "success": false
}

2025-07-31 12:54:58 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007033348083496094,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:54:57.872605"
  },
  "success": false
}

2025-07-31 12:54:58 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 12:54:58 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:54:58 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:54:58 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:54:58 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 12:55:01 - managers.commands_server - DEBUG - Request completed in 2.43s with status 200
2025-07-31 12:55:01 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.283355474472046, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T09:55:01.185405'}, 'success': True}
2025-07-31 12:55:01 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 12:55:01 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 12:55:01 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 12:55:01 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 12:55:01 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 12:55:02 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 12:55:02 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 12:55:02 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:57:07 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:07 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:07 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:07 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 12:57:07 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:07 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 12:57:08 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 12:57:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:08 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:08 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 12:57:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:09 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:09 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:09 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:09 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 12:57:09 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:09 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 12:57:10 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:10 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:10 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 12:57:10 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 12:57:10 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:10 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 12:57:28 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:57:28 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:57:28 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:57:28 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3QjLYlNRSgwEb24AxMxsrGcw8XAYzPNW_v-TWqFYvetEbS0RknhPnRDjj782jidoSVlHVb7727RB92Qxd1G6-_r2BQRB13aOv86jafN3MEDBvEGN14kQrY0nJsrStKeWWDpN7yxIKHvn-wRa3qjtxBj1sMfbC2Bd1h6m2WV41NXj2efrQcKs_ADqhS-JsnXTqZXUQknkVWeTj2Ov7lGhEWmtZgh44eVu_bl3XW06Wysdrtj-GRJDTk9zayyXjDntNdrCP7Qfj5hQ7tw5tC06-y8nlo_cuQwwPsXthNUFn75IuaqejA-SUF6-MOMfscmN4e6Jvwo0Hkobhu93myyaamrSNugdEXuA7imAohiTJ3_EU-UBQzP7LJg1_-RLN58Q_BqmannVzkXAllTqp7BvvINFSec8VQx5lQxqVo5fJtgZcg8uVLMmUJV5cQ8ZdIFPuIoxuJuGeIZbKUUivhzMWOeyKebFwLX1qb4imCQh5DdXh6T4GS_26AjFzAYP71X25luHLB2Hn6VTmA2yFSKJqhZAmmTcX1YhHORMWhZfJq8NisPKAwoetDMLeJazMW0ssMRw6LumCBJOP4RjYCX4txTE4yYMHmJcHpiJ0lCIolRfiLPxKGxB_L6Vj6jpWLmV1KhssLi85KfOId9EW9YAj6Q0IM42Ai1L5toIkm7PMe71iF0A9KnXIc1VwEutQp5LgxP3W4liL55yRHgrzbAq7rrw6srdCGCmyNxMQhzAqWYwrhkupRj6pvEQhvbh8WNtg9a5ddGtdSFPhlx6qXZxDI2E9gCfQHn_V79nr9_QMS2uGttd4tpaq1X0ObRPhiJgDkiQA8eo_H5q9YOZ30gTxrAtny3eai21ORGAo1YrllwzCNdezYnBU6Ht-PhpA5DSbGu-lNcplr3ufY0Ilvv15LoNHa5COP-r71Mg1LnHHg9L8j55PtTxTlQ-Yyj9aeACsGWkYQnQ_PHz2_uXqDKeBgPSBIrs20xqE4lnYpOsp_qFlZ9E1qZsOGMEWxMwozd6yzoVvSlNwxAUL8zq5FAlDLIwoF5hgycHVltd5qqDjFX6BtNl48cvTTx0e0lF0kfU75yEfXeeMr35AW8RQbFKWdQ5NXOU1gPCK6ITmMxMI9BehFCPHFN5j3oQlkWfzLr8spjO0ajlkzm3eisKDeUmzTAq11Ia0ZKt7IJ7FctFMg3UdwNiUQysfYR8F0KRwFesvucak0O1z0qVGqozdiHTCUmgvzWKGTyFtRTrfU16LH29EOSlnrRZ8ir3uXYIrWf0ycvKE-huTlrfsNZKYxaOrECpJ3Fv38HjY7NMrGLL24W1mTQcqDLYb70SXTPg4amU_mAYhPqq4OTQCYNliThkuYWOgKLoqJSVL9B234zlKE19Q1vrqeq2AebukuMkp_rwbSW2Kje0rdNSPc9Pr1IGIr-0OG8XFJpfTx0WsWyogA0AMdlJXJyrdtlOGh6U_KZZE7q2KNgW78fqnYZ-Spx2j160L6iZCDxb6rdLwr6Tvm-7r-_s4jm9xXcdFBJu0ewvq8h0OffK-roG0etZvUQnT4n8_3rT1My0iRPj5Qj76-ZOVi2CL9sr39bIe_Fwx_SOBXYLSh-HC3_lJT8CJM8vl7F7HD2KtGg4hSuMYeo33GMAJkthvGzJ7vchdTsRlMAQRwOiSSl_7IOmxuPlIhjfYNN2PKle6oK56tODWYlfEpfk_I346hDAD9OI-oxa2w_7f8Rr7M_94Id3PNAp_7lm0Vf5YM_SXzROWaTE_Kliuhn0HQrfj9IVs_BFdKVAs_b2iqP16N-06lP3ZJLS666Hqf1b8o4w_IP76hV7VVbBGhSZYRE5UIctWjRg1IL8_UbpJg35ooz-wi4T470a8w3f2EO_r4ArrXO1c-3o_bzMOCFBRLzXvsIESbc17VHJ4U_K2WAA4Xl19Yf_VMfQ2WCd08NfO4ASO0XuKohmGwfeAwSgK23z79n10Huk6DwRNh9iTIbdY9PS35C7CtpCJyG202_kBTVFERDCbb_8ArRnzQg.aIs-CA.SskV7PWimqG0gQ5NQQ6bOo_fasg'}
2025-07-31 12:57:28 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:57:28 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:57:28 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x01C45450>
2025-07-31 12:57:28 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:28 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:28 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:57:28 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:28 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:57:28 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:57:28 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:57:28 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:57:28 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:57:28 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:57:28 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:57:28 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:57:28 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:57:28 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:57:28 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:57:28 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:57:28 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:28 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 12:57:28 - managers.commands_server - INFO - Checking commands server health
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0002589225769042969, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T09:57:28.555567'}, 'success': True}
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 12:57:28 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 12:57:28 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0013225078582763672,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:57:28.704020"
  },
  "success": false
}

2025-07-31 12:57:28 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0013225078582763672,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:57:28.704020"
  },
  "success": false
}

2025-07-31 12:57:28 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0013225078582763672,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T09:57:28.704020"
  },
  "success": false
}

2025-07-31 12:57:28 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 12:57:28 - services.base - INFO - Service operation completed: start_session
2025-07-31 12:57:30 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:30 - services.base - INFO - Service operation completed: scan_network
2025-07-31 12:57:30 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 12:57:31 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 12:57:31 - endpoints.settings - INFO - Request method: GET
2025-07-31 12:57:31 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 12:57:31 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcmuo0oS_ZUnr8v3QjLYlNRSgwEb24AxMxsrGcw8XAYzPNW_v-TWqFYvetEbS0RknhPnRDjj782jidoSVlHVb7727RB92Qxd1G6-_r2BQRB13aOv86jafN3MEDBvEGN14kQrY0nJsrStKeWWDpN7yxIKHvn-wRa3qjtxBj1sMfbC2Bd1h6m2WV41NXj2efrQcKs_ADqhS-JsnXTqZXUQknkVWeTj2Ov7lGhEWmtZgh44eVu_bl3XW06Wysdrtj-GRJDTk9zayyXjDntNdrCP7Qfj5hQ7tw5tC06-y8nlo_cuQwwPsXthNUFn75IuaqejA-SUF6-MOMfscmN4e6Jvwo0Hkobhu93myyaamrSNugdEXuA7imAohiTJ3_EU-UBQzP7LJg1_-RLN58Q_BqmannVzkXAllTqp7BvvINFSec8VQx5lQxqVo5fJtgZcg8uVLMmUJV5cQ8ZdIFPuIoxuJuGeIZbKUUivhzMWOeyKebFwLX1qb4imCQh5DdXh6T4GS_26AjFzAYP71X25luHLB2Hn6VTmA2yFSKJqhZAmmTcX1YhHORMWhZfJq8NisPKAwoetDMLeJazMW0ssMRw6LumCBJOP4RjYCX4txTE4yYMHmJcHpiJ0lCIolRfiLPxKGxB_L6Vj6jpWLmV1KhssLi85KfOId9EW9YAj6Q0IM42Ai1L5toIkm7PMe71iF0A9KnXIc1VwEutQp5LgxP3W4liL55yRHgrzbAq7rrw6srdCGCmyNxMQhzAqWYwrhkupRj6pvEQhvbh8WNtg9a5ddGtdSFPhlx6qXZxDI2E9gCfQHn_V79nr9_QMS2uGttd4tpaq1X0ObRPhiJgDkiQA8eo_H5q9YOZ30gTxrAtny3eai21ORGAo1YrllwzCNdezYnBU6Ht-PhpA5DSbGu-lNcplr3ufY0Ilvv15LoNHa5COP-r71Mg1LnHHg9L8j55PtTxTlQ-Yyj9aeACsGWkYQnQ_PHz2_uXqDKeBgPSBIrs20xqE4lnYpOsp_qFlZ9E1qZsOGMEWxMwozd6yzoVvSlNwxAUL8zq5FAlDLIwoF5hgycHVltd5qqDjFX6BtNl48cvTTx0e0lF0kfU75yEfXeeMr35AW8RQbFKWdQ5NXOU1gPCK6ITmMxMI9BehFCPHFN5j3oQlkWfzLr8spjO0ajlkzm3eisKDeUmzTAq11Ia0ZKt7IJ7FctFMg3UdwNiUQysfYR8F0KRwFesvucak0O1z0qVGqozdiHTCUmgvzWKGTyFtRTrfU16LH29EOSlnrRZ8ir3uXYIrWf0ycvKE-huTlrfsNZKYxaOrECpJ3Fv38HjY7NMrGLL24W1mTQcqDLYb70SXTPg4amU_mAYhPqq4OTQCYNliThkuYWOgKLoqJSVL9B234zlKE19Q1vrqeq2AebukuMkp_rwbSW2Kje0rdNSPc9Pr1IGIr-0OG8XFJpfTx0WsWyogA0AMdlJXJyrdtlOGh6U_KZZE7q2KNgW78fqnYZ-Spx2j160L6iZCDxb6rdLwr6Tvm-7r-_s4jm9xXcdFBJu0ewvq8h0OffK-roG0etZvUQnT4n8_3rT1My0iRPj5Qj76-ZOVi2CL9sr39bIe_Fwx_SOBXYLSh-HC3_lJT8CJM8vl7F7HD2KtGg4hSuMYeo33GMAJkthvGzJ7vchdTsRlMAQRwOiSSl_7IOmxuPlIhjfYNN2PKle6oK56tODWYlfEpfk_I346hDAD9OI-oxa2w_7f8Rr7M_94Id3PNAp_7lm0Vf5YM_SXzROWaTE_Kliuhn0HQrfj9IVs_BFdKVAs_b2iqP16N-06lP3ZJLS666Hqf1b8o4w_IP76hV7VVbBGhSZYRE5UIctWjRg1IL8_UbpJg35ooz-wi4T470a8w3f2EO_r4ArrXO1c-3o_bzMOCFBRLzXvsIESbc17VHJ4U_K2WAA4Xl19Yf_VMfQ2WCd08NfO4ASO0XuKohmGwfeAwSgK23z79n10Huk6DwRNh9iTIbdY9PS35C7CtpCJyG202_kBTVFERDCbb_8ArRnzQg.aIs-CQ.ntYrGt7W-T_W4CSn7RUY5lsvN4E'}
2025-07-31 12:57:31 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 12:57:31 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 12:57:31 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x06F96D20>
2025-07-31 12:57:31 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:31 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:31 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 12:57:31 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 12:57:31 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 12:57:31 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 12:57:31 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 12:57:31 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:57:31 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 12:57:31 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 12:57:31 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 12:57:31 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 12:57:31 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 12:57:31 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 12:57:31 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 12:57:31 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 12:57:32 - managers.commands_server - DEBUG - Request completed in 2.53s with status 200
2025-07-31 12:57:32 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.378375768661499, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T09:57:32.397652'}, 'success': True}
2025-07-31 12:57:32 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 12:57:32 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 12:57:32 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 12:57:32 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 12:57:33 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 12:57:33 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 12:57:33 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 12:57:33 - services.base - INFO - Service operation completed: scan_network
2025-07-31 13:05:48 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:48 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:48 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:48 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:05:48 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:05:48 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:48 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:48 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:49 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:05:49 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:49 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:49 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:05:50 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:50 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:50 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:50 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:05:50 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:50 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:05:50 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:50 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:50 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:05:50 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:05:50 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:05:50 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:09:13 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:13 - services.base - INFO - Service operation completed: scan_network
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 13:09:13 - managers.commands_server - INFO - Checking commands server health
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Request completed in 0.17s with status 200
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.361701965332031e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T10:09:13.117020'}, 'success': True}
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 13:09:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 13:09:16 - managers.commands_server - DEBUG - Request completed in 2.96s with status 200
2025-07-31 13:09:16 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.8203132152557373, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T10:09:16.090073'}, 'success': True}
2025-07-31 13:09:16 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 13:09:16 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 13:09:16 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 13:09:16 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 13:09:16 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 13:09:16 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 13:09:16 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 13:09:16 - services.base - INFO - Service operation completed: scan_network
2025-07-31 13:09:34 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:34 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:09:35 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:09:35 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:09:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:09:35 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:35 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:09:35 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:09:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:09:35 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:09:35 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:14:16 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:14:16 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:14:16 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:14:16 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:14:16 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:14:16 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:14:16 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:14:16 - services.db_operations.whitelist_db - INFO - Created whitelist mode setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 13:14:17 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:14:17 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:14:17 - services.db_operations.whitelist_db - INFO - Created whitelist limit rate setting for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 13:14:17 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 13:15:24 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 13:15:27 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 13:33:36 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 13:33:39 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 13:33:59 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 13:33:59 - endpoints.settings - INFO - Request method: GET
2025-07-31 13:33:59 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 13:33:59 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcuyosoS_ZUTjtu9qUJQOuJEHFRQ1AJ5PyYGFCggL3mI0NH_ford3bs7btzBHdyJEWRVrZVrZZr5bXapojr3i6hoZ1_buou-zLomqmdfv818jKOmubTlPSpmX2eDD7k3n-J1es_Kr9y4ZPs00IOxpFlz0QTPXcwL53JjhFcF5aoxrHxGNUEcbPgHeF7PN87LW6hHcwb7uL8-XaR6p_GMnLDU-GawpHyAp9zqFbtnBNAt9_yyyw5Vl94Y2Voi50JvlmfjQNv6XjmearYQ61it-uaxacxykAT3yB3c1f0hhMDxV1v53vubm3vkA0rnNUkX1f3OgSg5rjS0jHjd6i7OZld4tHFIHJ4Cy-Xsyyx6VUkdNRefeAGWDM2xgKWZ3_GE-EAz3OrLLAk_fYmGQxzscKIkB90cJSAnUiPlbeVtJFbKtbtsoB4ZUi_vvBTZKnSN9V1O41Qeb6NrIOBCxLij0LupBDxDzOWdkJw2Bypy-AnzaAE1uapvhKbCNJpCZbjXejyWzxMUUxdyICi08ZSHzwCGjaczaQCpCSKOiglCeqGtOSrGrUepMMpbtDgRxX7hQXkb1giGrUtbqTelmFPAd9yFC2MK7cIe2zE45WKP96jzIPf04CsLHTnDufwknFlQqB3hb6WkT1zHuktpmSCDB2i8L9CW8I7qqGwAkV7BMFVpf5SLwJaJZHNAW6-V7QwqO7kMt-sC78Uy1JkY79e_tTjW6DkHooehPJuhThOvTuwtCEZC7E0FwiH0cnoDsuEyinF_KVuJIXoB2kxlsFrXzpopL6IpC3KP5C4OoRHzHgSxb_ef-Xv29P26hrk1-LZXebaaKIU2hLZJcETKgXGM4W3yk9LyKsGFOmgmSGX7lTtUe7QzK_ZFrZiwgpwjuOZUK1MX0KjvLAWJsqLeNSSL6kuGL9GbdORMHNgf91J_Z3XS7md-HxrXlUtrAOfmf9T8VaKBKQLIFcHOAhhaA9HQheR9uPmo_dPVubUK8SKAMnJtrjZo2bOol64n4KGmB9E1mbMOOcEWxNTIzdayDllgSi-8A4JFeQ3KRdoQMyO6Cxwe7_Bko6mfCt_xsiAj2myQfXr60e4e0ZE1kfX7zCM-us4BTH74tkiR2Esepz40SW8gSPCyaE_6MxVo8hdh5FSAaPS4N9F6VAzy6gUdwY3DldBZnQ89ozUwDRMrlDfz8XDc5q_zTVZlFlT8Y4jA3OqQUkLK3EVicQQnFrO-pSV2xu-xh9SBUZPsIRz3PhidnBXK7pF39JG0da64r0jbx2t292Ky5VnO_Ktid4mK1mcvrq-8FiPAnIy5dTXc8AjW7EZgqTp5AiF8igJnJt3h6T7n-8r0imTjiiURCh-hIc3zRzoatw1vVdt-EaSOcQcws-vaXcPNwVQGT1cHSWrsOr9iuj-X65Wq7S5eR-9u2V5cJfMlsi-tBfqQwf2NzDQal6stfHllW-W-ocjO1bg_50XOBPL6FfSZRB01elS35oXDd7UR8Gqxp5SGn-9Lnky3BpdVRAYW-S2S8K-4bavm6_t73_dvt7K8ZZFfJc0bLvN3v2vj92kNJMW1fItyP8n-9-tVXV6TLCKEHxPy0g4frOvIr8le-bFeposfK6a9xH4Tk-OFmAZ1CwWEmex6OR4804-NG7nudyE5BhSZxisKAnpBr-bVIn0-F8s7fctxhyNIsTmTPFc4bqlb9Yi7N7-qmp9ZTnS4LFqy4KZkJ8Sx-j8jfjhEMDGZuNeo9utu9c9tiv15fnkS3dckCn_tWbJV_lgz7JfZ1c-TbLgUfj4Z9gOIvL4lT2Ljz-hEQWLJ54piVtT0NmkacvqrSGR1l13R_sr4Zxp_QPz1iV6UBZ6ixn5D7yOZ0uX19rQwwDITphqSQdd2dfQHdhbT_92Id_-d39xWJT755V1pXPukHebpGgq-rBzLrcNjOZqbWpSvQZVvbTGDfn9y9ZH_u-HYOZ46tAumygAaUOyKYViO48AKchTDULPv33-0ziWZ-oFm2ZC6cos5FV2D-WIZUXOfixbzaLkMMMswdERzs-__AjeD9Go.aItGlw.268TFQGg580WNctnE2gJNkrRXFI'}
2025-07-31 13:33:59 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 13:33:59 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 13:33:59 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x065ECAF8>
2025-07-31 13:33:59 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:33:59 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:33:59 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 13:33:59 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:33:59 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 13:33:59 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 13:33:59 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 13:33:59 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 13:33:59 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 13:33:59 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 13:33:59 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 13:33:59 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 13:33:59 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 13:33:59 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 13:33:59 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 13:33:59 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 13:34:00 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:00 - services.base - INFO - Service operation completed: start_session
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 13:34:00 - managers.commands_server - INFO - Checking commands server health
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 13:34:00 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:00 - services.base - INFO - Service operation completed: start_session
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 13:34:00 - managers.commands_server - INFO - Checking commands server health
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.838539123535156e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T10:34:00.444431'}, 'success': True}
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.337860107421875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T10:34:00.550646'}, 'success': True}
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 13:34:00 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 13:34:00 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011415481567382812,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.591241"
  },
  "success": false
}

2025-07-31 13:34:00 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011415481567382812,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.591241"
  },
  "success": false
}

2025-07-31 13:34:00 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011415481567382812,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.591241"
  },
  "success": false
}

2025-07-31 13:34:00 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 13:34:00 - services.base - INFO - Service operation completed: start_session
2025-07-31 13:34:01 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 13:34:01 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007476806640625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.704504"
  },
  "success": false
}

2025-07-31 13:34:01 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007476806640625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.704504"
  },
  "success": false
}

2025-07-31 13:34:01 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007476806640625,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "366d0f94-0efb-47e0-a9e4-e77bc6553e39",
    "timestamp": "2025-07-31T10:34:00.704504"
  },
  "success": false
}

2025-07-31 13:34:01 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID 366d0f94-0efb-47e0-a9e4-e77bc6553e39 - treating as success
2025-07-31 13:34:01 - services.base - INFO - Service operation completed: start_session
2025-07-31 13:34:01 - middleware - DEBUG - Router context established: user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:01 - services.base - INFO - Service operation completed: scan_network
2025-07-31 13:34:01 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 13:34:02 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 13:34:02 - endpoints.settings - INFO - Request method: GET
2025-07-31 13:34:02 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 13:34:02 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'he-IL,he;q=0.9,en-US;q=0.8,en;q=0.7', 'Cookie': 'session=.eJytVcuyosoS_ZUTjtu9qUJQOuJEHFRQ1AJ5PyYGFCggL3mI0NH_ford3bs7btzBHdyJEWRVrZVrZZr5bXapojr3i6hoZ1_buou-zLomqmdfv818jKOmubTlPSpmX2eDD7k3n-J1es_Kr9y4ZPs00IOxpFlz0QTPXcwL53JjhFcF5aoxrHxGNUEcbPgHeF7PN87LW6hHcwb7uL8-XaR6p_GMnLDU-GawpHyAp9zqFbtnBNAt9_yyyw5Vl94Y2Voi50JvlmfjQNv6XjmearYQ61it-uaxacxykAT3yB3c1f0hhMDxV1v53vubm3vkA0rnNUkX1f3OgSg5rjS0jHjd6i7OZld4tHFIHJ4Cy-Xsyyx6VUkdNRefeAGWDM2xgKWZ3_GE-EAz3OrLLAk_fYmGQxzscKIkB90cJSAnUiPlbeVtJFbKtbtsoB4ZUi_vvBTZKnSN9V1O41Qeb6NrIOBCxLij0LupBDxDzOWdkJw2Bypy-AnzaAE1uapvhKbCNJpCZbjXejyWzxMUUxdyICi08ZSHzwCGjaczaQCpCSKOiglCeqGtOSrGrUepMMpbtDgRxX7hQXkb1giGrUtbqTelmFPAd9yFC2MK7cIe2zE45WKP96jzIPf04CsLHTnDufwknFlQqB3hb6WkT1zHuktpmSCDB2i8L9CW8I7qqGwAkV7BMFVpf5SLwJaJZHNAW6-V7QwqO7kMt-sC78Uy1JkY79e_tTjW6DkHooehPJuhThOvTuwtCEZC7E0FwiH0cnoDsuEyinF_KVuJIXoB2kxlsFrXzpopL6IpC3KP5C4OoRHzHgSxb_ef-Xv29P26hrk1-LZXebaaKIU2hLZJcETKgXGM4W3yk9LyKsGFOmgmSGX7lTtUe7QzK_ZFrZiwgpwjuOZUK1MX0KjvLAWJsqLeNSSL6kuGL9GbdORMHNgf91J_Z3XS7md-HxrXlUtrAOfmf9T8VaKBKQLIFcHOAhhaA9HQheR9uPmo_dPVubUK8SKAMnJtrjZo2bOol64n4KGmB9E1mbMOOcEWxNTIzdayDllgSi-8A4JFeQ3KRdoQMyO6Cxwe7_Bko6mfCt_xsiAj2myQfXr60e4e0ZE1kfX7zCM-us4BTH74tkiR2Esepz40SW8gSPCyaE_6MxVo8hdh5FSAaPS4N9F6VAzy6gUdwY3DldBZnQ89ozUwDRMrlDfz8XDc5q_zTVZlFlT8Y4jA3OqQUkLK3EVicQQnFrO-pSV2xu-xh9SBUZPsIRz3PhidnBXK7pF39JG0da64r0jbx2t292Ky5VnO_Ktid4mK1mcvrq-8FiPAnIy5dTXc8AjW7EZgqTp5AiF8igJnJt3h6T7n-8r0imTjiiURCh-hIc3zRzoatw1vVdt-EaSOcQcws-vaXcPNwVQGT1cHSWrsOr9iuj-X65Wq7S5eR-9u2V5cJfMlsi-tBfqQwf2NzDQal6stfHllW-W-ocjO1bg_50XOBPL6FfSZRB01elS35oXDd7UR8Gqxp5SGn-9Lnky3BpdVRAYW-S2S8K-4bavm6_t73_dvt7K8ZZFfJc0bLvN3v2vj92kNJMW1fItyP8n-9-tVXV6TLCKEHxPy0g4frOvIr8le-bFeposfK6a9xH4Tk-OFmAZ1CwWEmex6OR4804-NG7nudyE5BhSZxisKAnpBr-bVIn0-F8s7fctxhyNIsTmTPFc4bqlb9Yi7N7-qmp9ZTnS4LFqy4KZkJ8Sx-j8jfjhEMDGZuNeo9utu9c9tiv15fnkS3dckCn_tWbJV_lgz7JfZ1c-TbLgUfj4Z9gOIvL4lT2Ljz-hEQWLJ54piVtT0NmkacvqrSGR1l13R_sr4Zxp_QPz1iV6UBZ6ixn5D7yOZ0uX19rQwwDITphqSQdd2dfQHdhbT_92Id_-d39xWJT755V1pXPukHebpGgq-rBzLrcNjOZqbWpSvQZVvbTGDfn9y9ZH_u-HYOZ46tAumygAaUOyKYViO48AKchTDULPv33-0ziWZ-oFm2ZC6cos5FV2D-WIZUXOfixbzaLkMMMswdERzs-__AjeD9Go.aItGmQ.-bZ-NMmRhRf83C5qly2o3bwL0NU'}
2025-07-31 13:34:02 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 13:34:02 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 13:34:02 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x06606510>
2025-07-31 13:34:02 - endpoints.settings - INFO - User ID from session: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:02 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:02 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 13:34:02 - services.settings_service - INFO - Input parameter - user_id: 366d0f94-0efb-47e0-a9e4-e77bc6553e39
2025-07-31 13:34:02 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 13:34:02 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 13:34:02 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=366d0f94-0efb-47e0-a9e4-e77bc6553e39, setting_key='routerId')
2025-07-31 13:34:02 - services.settings_service - INFO - Found UserSetting record: id=b6353585-7296-4029-a252-eea7b8d89177, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 13:34:02 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 13:34:02 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 13:34:02 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 13:34:02 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 13:34:02 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 13:34:02 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 13:34:02 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 13:34:02 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 13:34:04 - managers.commands_server - DEBUG - Request completed in 3.12s with status 200
2025-07-31 13:34:04 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.9592514038085938, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': '366d0f94-0efb-47e0-a9e4-e77bc6553e39', 'timestamp': '2025-07-31T10:34:04.257984'}, 'success': True}
2025-07-31 13:34:04 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 13:34:04 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 13:34:04 - services.db_operations.network_db - INFO - Saving network scan result for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 13:34:04 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 13:34:05 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 13:34:05 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 13:34:05 - services.db_operations.network_db - INFO - Network scan save completed for user 366d0f94-0efb-47e0-a9e4-e77bc6553e39, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 3, updated 0 devices
2025-07-31 13:34:05 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:52:19 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:52:25 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:52:33 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:52:33 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:52:33 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:52:33 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItnEA.UalLOOIDQWSfgkj1NAMs2oMO6Pg'}
2025-07-31 15:52:33 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:52:33 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:52:33 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f26dd582020>
2025-07-31 15:52:33 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:52:33 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:52:33 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:52:33 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:52:33 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:33 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:52:33 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:52:33 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:52:33 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:33 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:52:33 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:52:33 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:52:33 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:52:33 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmOo1YQ_ZXIz-NudpuWIgUbMLZZDGZ_QXDZLmaz2Wyi-fdcejKTkRIpeYhkG7mqqFPnVKnq91XQJo8qrJO6X330jyH5shq65LH6-H0VApB0XdA3t6RefaxeIcG-hRh3JSVGnSo4HmeJHA2NGkiFDKRndhtrSS9voyTwB26_r5rN3bAi4SyMYXuiWLHDzqJROmQKD8n4YlzMYs4VI12V4nYMGGza-HxxpzYz2QOf1uo1AaRMP3nSpT5JFXv2GWrSx4MbREMUB-Vm2-98bFgLJ_0KB_OGSfs7nhgncF-bE7Mxz1m4z7wzl3ZXztCvoi4dXEKBKt6diSCGw75Ojwwxtq97cZ4wfLNZfVklzxY-ki4IkRb4hiZZBqdp6i87RDqQNLv9soLxD12S1ymPDgBq8HS15iOuwmN3rPrW3x-ZY2XcVFOZFPM4qQe_UByd8MzdTS3yQp2z2TMV3CMU2puFySuOuG-KlXoQoLw_YYnLLTnPNq7DVH9DMC0glcXUxJIxgbkZZUIsPILFo9qY5SoeIyLu_CtdRAS2pMiTeklxfCq8NWtmNimFMKu8Qskuh4W1T6h8_FCIuPdIu_CXEisMD12P8ogcUw7xBJwclytxApIy-AQ7-sSzjF21BJU6IswyqvUB4fdHOEHPtW_HooGKyeHKfKMUHuHO-qztcUS9JeJCJ8NZrSNHRZStl8L7veqUhHZQm5jf1UASm_hK50Da_cXFtWffPSE-NOY7NCYvuFckb41yQCRvISBpvVnjLVoxdVzjEYfCo5CNUpa4yu49p-yWuqLKxsCh7CLSKKIDi_vCDtUittH-h17l53-RJRBm61dlubQwlk64f134GWl4EOdwaWvJvhzH1xRXlGN3VyWm2l9v_jUuxNapwJJrQDUX_hXF3nDeEPKLaYIZWPhOlfydV-xU8yC8Ft2iSuy_xdFlLO5aVBu22FGtRSzZr09flWMx0kWD2zE6ZP-iD5vLmMj7cz56WDPrdk7q5M7WXF-1BKvXXYEybZsKzfjozmiOMNbRnAyLcVYAZVlqljjFpX1wLGvSTRzNjdd7r0XLuI0re3AJOo8ca5lDzXcNPXSeY7xf_GWOnoxigqX_uLp8EQ_fzSek_1Odlxn0nqppEWicc5UYX-CGyU5gDEzsJ4rsPYnNbG5nv37c9yPHDk6rP6ZivFMH2SxtSTUHy6dMX80k_3WqTeblSRSnNOz6DA9FDV5ietFBdXmedp2qX_Yehb-I1l6LOow36zPPJOPw5I2cKfRR7O63WbJkmFbR7lZHYaPOtEgaORWR4EniG2uWwf4C986RihynY3j8ZKT5UwB2ehSZjCNAFSZXZc_LL3V2Z18EijlccTUINPdcXdjr3N3bp31pyNEWTG02VYZJVcHLeHm-eN5Rqg-6Yhu5BNKhkW2w83C82nNRUQQypRIEIDBnLW8asxaa1MWhNIJdsD6v-RjtucEzR-sWxE_Hb2RDSKXIHTkC1jraYR1o2gStJfRbw_iXvO_b7uP9fZqmt6xpsjIJW9i9gaZ6D4c-f1-WPazT5q19NCksk__-QlKFsESAn3sw6F-fqLskfKDr8e2ILGGfh6QP8rDLkTt4eKmK389Dm77I6iQaIw79DIWHQ4zcOIZ27hYjcJIit-uWKsaR2tzIrAIDSAiMqWg4bkHeY1l7z4e3sG27P2tc4EBT9-iMLaUuGef2f874jfDHqk76FpZND8pmiH_LFuvPEcGImKcwib_fU3Q9fjonzJdVBkekWB1Wi2Jq0l-WbOh1-OPu0Bt2CYRdhyK-dwTd42ao--8F_on59zR1U4PFhIZT0pQNeVc4auQiTJFDArlbCPrhkfyUuMzJfyb9Hr5z-2zbgBPJudO-tdhRuQhr7r5VrCfcSAHVdprN5tQU8A8vYbl2tERPwLhfO5ZZg2Uah-izCzhDbmkWp-gtEp3Z4uiz-vr125gEcOl9AkiwxUlmzWxYsKZojFqHW5ZYbwGTxBSdMmSarr7-ATKl5RY.aItnEQ.7pGXx5sPjSF84VwFQiGkYTfI6qQ'}
2025-07-31 15:52:33 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:52:33 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:52:33 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f26dd581e70>
2025-07-31 15:52:33 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:52:33 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:33 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:52:33 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:52:33 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:52:33 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:33 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:52:33 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:52:33 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:52:33 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:52:33 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:33 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:52:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:34 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 15:52:34 - managers.commands_server - INFO - Checking commands server health
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.6941299438476562e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T12:52:34.003548'}, 'success': True}
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 15:52:34 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007786750793457031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:34.145840"
  },
  "success": false
}

2025-07-31 15:52:34 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007786750793457031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:34.145840"
  },
  "success": false
}

2025-07-31 15:52:34 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007786750793457031,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:34.145840"
  },
  "success": false
}

2025-07-31 15:52:34 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:52:34 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:52:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:34 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:52:34 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 15:52:37 - managers.commands_server - DEBUG - Request completed in 2.62s with status 200
2025-07-31 15:52:37 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.438366174697876, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:52:37.261592'}, 'success': True}
2025-07-31 15:52:37 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 15:52:37 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 15:52:37 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 15:52:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 15:52:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 15:52:38 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 15:52:38 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 15:52:38 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:52:47 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:52:47 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:52:47 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:52:47 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItnHg.qJuHJuPzgN_vDdL9w0eKN-ZrDYc'}
2025-07-31 15:52:47 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:52:47 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:52:47 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f26da34d090>
2025-07-31 15:52:47 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:47 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:47 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:52:47 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:47 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:52:47 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:52:47 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:52:47 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:47 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:52:47 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:52:47 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:52:47 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:52:47 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:52:47 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:52:47 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:47 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:52:47 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:47 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:52:47 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:52:47 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 15:52:47 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006444454193115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:47.177494"
  },
  "success": false
}

2025-07-31 15:52:47 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006444454193115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:47.177494"
  },
  "success": false
}

2025-07-31 15:52:47 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0006444454193115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:52:47.177494"
  },
  "success": false
}

2025-07-31 15:52:47 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:52:47 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:52:48 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:48 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:52:48 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 15:52:50 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:52:50 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:52:50 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:52:50 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItnHw.Y27qMBB-uz-Whi7tGSmxHy8BlYA'}
2025-07-31 15:52:50 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:52:50 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:52:50 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f26da301720>
2025-07-31 15:52:50 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:50 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:50 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:52:50 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:52:50 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:52:50 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:52:50 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:52:50 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:50 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:52:50 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:52:50 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:52:50 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:52:50 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:52:50 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:52:50 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:52:50 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:52:51 - managers.commands_server - DEBUG - Request completed in 2.61s with status 200
2025-07-31 15:52:51 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.4197170734405518, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:52:50.589606'}, 'success': True}
2025-07-31 15:52:51 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 15:52:51 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 15:52:51 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 15:52:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 15:52:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 15:52:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 15:52:51 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 15:52:51 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:56:34 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:56:39 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 15:56:45 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:56:45 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:56:45 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:56:45 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItoDA.VQuy2BoqS5kJwtwoIDN2qyu6_pE'}
2025-07-31 15:56:45 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:56:45 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:56:45 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe13077da50>
2025-07-31 15:56:45 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:56:45 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:56:45 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:56:45 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:56:45 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:56:45 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:56:45 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:56:45 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:56:45 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:56:45 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:56:45 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 15:56:45 - endpoints.settings - INFO - Request method: GET
2025-07-31 15:56:45 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:56:45 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItoDQ.5VYfpQYDAHNBEEQY4aIeW5MUUJg'}
2025-07-31 15:56:45 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 15:56:45 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 15:56:45 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe13077dd80>
2025-07-31 15:56:45 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 15:56:45 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:45 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 15:56:45 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 15:56:45 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 15:56:45 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:56:45 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 15:56:45 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 15:56:45 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 15:56:45 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 15:56:45 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:56:45 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 15:56:46 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:46 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 15:56:46 - managers.commands_server - INFO - Checking commands server health
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Request completed in 0.16s with status 200
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0002803802490234375, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T12:56:46.095564'}, 'success': True}
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 15:56:46 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0058438777923583984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:56:46.246042"
  },
  "success": false
}

2025-07-31 15:56:46 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0058438777923583984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:56:46.246042"
  },
  "success": false
}

2025-07-31 15:56:46 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0058438777923583984,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T12:56:46.246042"
  },
  "success": false
}

2025-07-31 15:56:46 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 15:56:46 - services.base - INFO - Service operation completed: start_session
2025-07-31 15:56:46 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:56:46 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:56:46 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 15:56:49 - managers.commands_server - DEBUG - Request completed in 2.62s with status 200
2025-07-31 15:56:49 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.4429194927215576, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T12:56:49.362596'}, 'success': True}
2025-07-31 15:56:49 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 15:56:49 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 15:56:49 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 15:56:49 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 15:56:49 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 15:56:50 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 15:56:50 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 15:56:50 - services.base - INFO - Service operation completed: scan_network
2025-07-31 15:57:00 - endpoints.settings - INFO - === Starting save_router_id endpoint ===
2025-07-31 15:57:00 - endpoints.settings - INFO - Request method: POST
2025-07-31 15:57:00 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 15:57:00 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Content-Length': '79', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Content-Type': 'application/json', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aItoEg.YRW6nn2PLO0jO8Jk06xroplTep4'}
2025-07-31 15:57:00 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe1303d1c30>
2025-07-31 15:57:00 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 15:57:00 - endpoints.settings - INFO - Parsing request JSON body...
2025-07-31 15:57:00 - endpoints.settings - INFO - Request body parsed: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 15:57:00 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:57:00 - endpoints.settings - INFO - Calling save_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:57:00 - services.settings_service - INFO - === Starting save_router_id_setting ===
2025-07-31 15:57:00 - services.settings_service - INFO - Input parameters - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:57:00 - services.settings_service - INFO - Router ID validation passed: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 15:57:00 - services.settings_service - INFO - Allowing multiple users to use the same router ID
2025-07-31 15:57:00 - services.settings_service - INFO - Querying existing UserSetting record...
2025-07-31 15:57:00 - services.settings_service - INFO - Found existing UserSetting record: id=33039718-fdde-458e-b250-50e52516db96
2025-07-31 15:57:00 - services.settings_service - INFO - Updating setting_value from {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'} to {'routerId': e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f}
2025-07-31 15:57:00 - services.settings_service - INFO - UserSetting record updated successfully
2025-07-31 15:57:00 - services.settings_service - INFO - Querying existing UserRouter record...
2025-07-31 15:57:00 - services.settings_service - INFO - Found existing UserRouter record: id=4f9b95d3-cc3f-461e-a1db-8ed7fedf123d, is_active=True
2025-07-31 15:57:00 - services.settings_service - INFO - UserRouter is already active
2025-07-31 15:57:00 - services.settings_service - INFO - About to commit session to database...
2025-07-31 15:57:00 - services.settings_service - INFO - Session committed successfully!
2025-07-31 15:57:00 - services.settings_service - INFO - === save_router_id_setting completed successfully ===
2025-07-31 15:57:00 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'message': 'RouterId saved in settings.'}, error: None
2025-07-31 15:57:00 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'message': 'RouterId saved in settings.'}
2025-07-31 15:57:00 - endpoints.settings - INFO - === save_router_id endpoint completed successfully ===
2025-07-31 17:54:45 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 17:54:50 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 17:54:57 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 17:54:57 - endpoints.settings - INFO - Request method: GET
2025-07-31 17:54:57 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 17:54:57 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuDvw.Hdf7rSrOaWxIVC-MOXhToHGdmco'}
2025-07-31 17:54:57 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 17:54:57 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 17:54:57 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe63859e260>
2025-07-31 17:54:57 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 17:54:57 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 17:54:57 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 17:54:57 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 17:54:57 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 17:54:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 17:54:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 17:54:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 17:54:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 17:54:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 17:54:57 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 17:54:57 - endpoints.settings - INFO - Request method: GET
2025-07-31 17:54:57 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 17:54:57 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuDwQ.H1V7u8D4-IxKKClf4pLX8Ej2LFU'}
2025-07-31 17:54:57 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 17:54:57 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 17:54:57 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe63859d1e0>
2025-07-31 17:54:57 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 17:54:57 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:57 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 17:54:57 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 17:54:57 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 17:54:57 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 17:54:57 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 17:54:57 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 17:54:57 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 17:54:57 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 17:54:57 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 17:54:57 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 17:54:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:54:58 - services.base - INFO - Service operation completed: start_session
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 17:54:58 - managers.commands_server - INFO - Checking commands server health
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Request completed in 0.18s with status 200
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.00027108192443847656, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T14:54:58.219373'}, 'success': True}
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 17:54:58 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 17:55:00 - managers.commands_server - DEBUG - Request completed in 2.40s with status 200
2025-07-31 17:55:00 - managers.commands_server - DEBUG - Received response: {'data': {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, 'error': None, 'metadata': {'executionTime': 2.2913856506347656, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T14:55:00.678728'}, 'success': True}
2025-07-31 17:55:00 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/session/start'
2025-07-31 17:55:00 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, error: None
2025-07-31 17:55:00 - services.commands_server_operations.session_execute - INFO - Session started successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:55:00 - services.base - INFO - Service operation completed: start_session
2025-07-31 17:55:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 17:55:01 - services.base - INFO - Service operation completed: scan_network
2025-07-31 17:55:01 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 17:55:03 - managers.commands_server - DEBUG - Request completed in 2.60s with status 200
2025-07-31 17:55:03 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.494995594024658, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T14:55:03.863680'}, 'success': True}
2025-07-31 17:55:03 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 17:55:03 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 17:55:03 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 17:55:03 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 17:55:04 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 17:55:04 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 17:55:04 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 17:55:04 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:04:18 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:04:24 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:04:32 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:04:32 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:04:32 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:04:32 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuF_w.qZFXsB43EM1BEf9FzfB7PsDbabI'}
2025-07-31 18:04:32 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:04:32 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:04:32 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f102dfa2230>
2025-07-31 18:04:32 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:04:32 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:04:32 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:04:32 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:04:32 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:04:32 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:04:32 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:04:32 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:04:32 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:04:32 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:04:32 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:04:32 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:04:32 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:04:32 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuGAA.EoQT8kF59qH0JM_q3V1TtvyKSVs'}
2025-07-31 18:04:32 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:04:32 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:04:32 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f102dfa13f0>
2025-07-31 18:04:32 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:04:32 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:32 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:04:32 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:04:32 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:04:32 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:04:32 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:04:32 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:04:32 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:04:32 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:04:32 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:04:32 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:04:33 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:33 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:04:33 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 5.745887756347656e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:04:33.452867'}, 'success': True}
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 18:04:33 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012547969818115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:04:33.591790"
  },
  "success": false
}

2025-07-31 18:04:33 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012547969818115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:04:33.591790"
  },
  "success": false
}

2025-07-31 18:04:33 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012547969818115234,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:04:33.591790"
  },
  "success": false
}

2025-07-31 18:04:33 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 18:04:33 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:04:33 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:04:33 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:04:33 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 18:04:36 - managers.commands_server - DEBUG - Request completed in 3.03s with status 200
2025-07-31 18:04:36 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.9874773025512695, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:04:37.268296'}, 'success': True}
2025-07-31 18:04:36 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 18:04:36 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 18:04:36 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 18:04:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 18:04:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 18:04:37 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 18:04:37 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 18:04:37 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:10:46 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:10:46 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:10:46 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:10:46 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuHdQ.iRwa7AANcoHkkdmOlRaiH4PSGVI'}
2025-07-31 18:10:46 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:10:46 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:10:46 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f102dbface0>
2025-07-31 18:10:46 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:10:46 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:10:46 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:10:46 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:10:46 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:10:46 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:10:46 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:46 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:10:46 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:10:46 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:10:46 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:10:46 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:10:46 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:10:46 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:10:46 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:10:46 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:10:46 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuHdg.IihtDr1-UVqmwjrYn8G65oeswyo'}
2025-07-31 18:10:46 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:10:46 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:10:46 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f102dfa23e0>
2025-07-31 18:10:46 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:10:46 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:46 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:10:46 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:10:46 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:10:47 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:10:47 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:10:47 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:47 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:10:47 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:10:47 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:10:47 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:10:47 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:10:47 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:10:47 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:47 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:10:47 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.0279159545898438e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:10:48.154969'}, 'success': True}
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 18:10:47 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-07-31 18:10:47 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015690326690673828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:10:48.302797"
  },
  "success": false
}

2025-07-31 18:10:47 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015690326690673828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:10:48.302797"
  },
  "success": false
}

2025-07-31 18:10:47 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0015690326690673828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:10:48.302797"
  },
  "success": false
}

2025-07-31 18:10:47 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 18:10:47 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:10:48 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:48 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:10:48 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 18:10:50 - managers.commands_server - DEBUG - Request completed in 2.64s with status 200
2025-07-31 18:10:50 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.59097957611084, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:10:51.572667'}, 'success': True}
2025-07-31 18:10:50 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 18:10:50 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 18:10:50 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 18:10:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 18:10:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 18:10:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 18:10:51 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 18:10:51 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:10:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:53 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD ENDPOINT - Starting request processing
2025-07-31 18:10:53 - endpoints.blacklist - INFO -   - Authenticated user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:53 - endpoints.blacklist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:53 - endpoints.blacklist - INFO -   - Session ID: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:53 - endpoints.blacklist - INFO -   - Request body: {'ip': '192.168.1.122', 'name': 'DESKTOP-DQ80I51', 'description': 'DESKTOP-DQ80I51 - d8:bb:c1:47:3a:43'}
2025-07-31 18:10:53 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD - Calling service with IP: 192.168.1.122
2025-07-31 18:10:53 - services.base - INFO - Service operation completed: add_device_to_blacklist
2025-07-31 18:10:53 - services.db_operations.blacklist_db - INFO - Added device 192.168.1.122 to blacklist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:53 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/add
2025-07-31 18:10:55 - managers.commands_server - DEBUG - Request completed in 1.28s with status 200
2025-07-31 18:10:55 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 added to blacklist.', 'error': None, 'metadata': {'executionTime': 1.1798653602600098, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:10:55.927712'}, 'success': True}
2025-07-31 18:10:55 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/add'
2025-07-31 18:10:55 - services.commands_server_operations.blacklist_execute - INFO - Added device 192.168.1.122 to blacklist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:10:55 - services.base - INFO - Service operation completed: add_device_to_blacklist
2025-07-31 18:10:55 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD - Success! Result: Device 192.168.1.122 added to blacklist.
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:57 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.db_operations.blacklist_db - INFO - Created blacklist limit rate setting for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: 50 mbps
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:10:58 - services.db_operations.blacklist_db - INFO - Created blacklist mode setting for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with default: disabled
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:10:58 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:10:58 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:10:59 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:17 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:17 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:11:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:11:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:11:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:11:26 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:26 - services.base - INFO - Service operation completed: set_blacklist_limit_rate
2025-07-31 18:11:26 - services.db_operations.blacklist_db - INFO - Set blacklist limit rate for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 50 Mbps
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:11:26 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.0517578125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:11:27.867282'}, 'success': True}
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:11:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/limit-rate
2025-07-31 18:11:27 - managers.commands_server - DEBUG - Request completed in 0.51s with status 200
2025-07-31 18:11:27 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': 50}, 'error': None, 'metadata': {'executionTime': 0.3969461917877197, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:11:28.402115'}, 'success': True}
2025-07-31 18:11:27 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/limit-rate'
2025-07-31 18:11:27 - services.commands_server_operations.blacklist_execute - INFO - Set blacklist rate limit to 50 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:11:27 - services.base - INFO - Service operation completed: set_blacklist_limit_rate
2025-07-31 18:11:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:27 - services.base - INFO - Service operation completed: activate_blacklist_mode
2025-07-31 18:11:27 - services.db_operations.blacklist_db - INFO - Activated blacklist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:11:27 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/mode
2025-07-31 18:11:39 - managers.commands_server - DEBUG - Request completed in 11.67s with status 200
2025-07-31 18:11:39 - managers.commands_server - DEBUG - Received response: {'data': 'Blacklist mode activated.', 'error': None, 'metadata': {'executionTime': 10.666852474212646, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:11:39.532503'}, 'success': True}
2025-07-31 18:11:39 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/mode'
2025-07-31 18:11:39 - services.commands_server_operations.blacklist_execute - INFO - Activated blacklist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:11:39 - services.base - INFO - Service operation completed: activate_blacklist_mode
2025-07-31 18:11:40 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:11:50 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:12:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:12:17 - services.base - INFO - Service operation completed: deactivate_blacklist_mode
2025-07-31 18:12:17 - services.db_operations.blacklist_db - INFO - Deactivated blacklist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:12:17 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.3855438232421875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:12:17.460595'}, 'success': True}
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:12:17 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/blacklist/mode
2025-07-31 18:12:21 - managers.commands_server - DEBUG - Request completed in 3.55s with status 200
2025-07-31 18:12:21 - managers.commands_server - DEBUG - Received response: {'data': 'Blacklist mode deactivated.', 'error': None, 'metadata': {'executionTime': 3.6382131576538086, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:12:21.237765'}, 'success': True}
2025-07-31 18:12:21 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/mode'
2025-07-31 18:12:21 - services.commands_server_operations.blacklist_execute - INFO - Deactivated blacklist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:12:21 - services.base - INFO - Service operation completed: deactivate_blacklist_mode
2025-07-31 18:12:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:21:53 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:22:00 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:22:09 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:23:56 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:24:58 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:25:04 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:25:09 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:25:09 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:25:09 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:25:09 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuK1Q.wmWrtX5ktq0vCIQ-p8pc51HI32s'}
2025-07-31 18:25:09 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:25:09 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:25:09 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7faed7996500>
2025-07-31 18:25:09 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:09 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:09 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:25:09 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:09 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:25:09 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:25:09 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:25:10 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:25:10 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:25:10 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:25:10 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:25:10 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:25:10 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:25:10 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:25:10 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:25:10 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:25:10 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuK1Q.wmWrtX5ktq0vCIQ-p8pc51HI32s'}
2025-07-31 18:25:10 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:25:10 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:25:10 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7faed79951e0>
2025-07-31 18:25:10 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:10 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:10 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:25:10 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:10 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:25:10 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:25:10 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:25:10 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:25:10 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:25:10 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:25:10 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:25:10 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:25:10 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:25:10 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:25:10 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:10 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:25:10 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:25:10 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:25:10 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Request completed in 0.20s with status 200
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0003871917724609375, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:25:11.352738'}, 'success': True}
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Request completed in 0.15s with status 400
2025-07-31 18:25:11 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002445697784423828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:25:11.523259"
  },
  "success": false
}

2025-07-31 18:25:11 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002445697784423828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:25:11.523259"
  },
  "success": false
}

2025-07-31 18:25:11 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002445697784423828,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:25:11.523259"
  },
  "success": false
}

2025-07-31 18:25:11 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 18:25:11 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:25:11 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:11 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:25:11 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 18:25:14 - managers.commands_server - DEBUG - Request completed in 3.07s with status 200
2025-07-31 18:25:14 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.0522141456604004, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:25:15.258326'}, 'success': True}
2025-07-31 18:25:14 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 18:25:14 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 18:25:14 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 18:25:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 18:25:15 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 18:25:15 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 18:25:15 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 18:25:15 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:17 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:17 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:18 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:21 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:21 - services.base - INFO - Service operation completed: remove_device_from_blacklist
2025-07-31 18:25:22 - services.db_operations.blacklist_db - INFO - Removed device 192.168.1.122 from blacklist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:22 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/remove
2025-07-31 18:25:22 - managers.commands_server - DEBUG - Request completed in 0.78s with status 200
2025-07-31 18:25:22 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 removed from blacklist.', 'error': None, 'metadata': {'executionTime': 0.6668331623077393, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:25:23.720848'}, 'success': True}
2025-07-31 18:25:22 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/remove'
2025-07-31 18:25:22 - services.commands_server_operations.blacklist_execute - INFO - Removed device 192.168.1.122 from blacklist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:22 - services.base - INFO - Service operation completed: remove_device_from_blacklist
2025-07-31 18:25:26 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:26 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD ENDPOINT - Starting request processing
2025-07-31 18:25:26 - endpoints.blacklist - INFO -   - Authenticated user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:26 - endpoints.blacklist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:26 - endpoints.blacklist - INFO -   - Session ID: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:26 - endpoints.blacklist - INFO -   - Request body: {'ip': '192.168.1.122', 'name': 'DESKTOP-DQ80I51', 'description': 'DESKTOP-DQ80I51 - d8:bb:c1:47:3a:43'}
2025-07-31 18:25:26 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD - Calling service with IP: 192.168.1.122, name: DESKTOP-DQ80I51
2025-07-31 18:25:26 - services.base - INFO - Service operation completed: add_device_to_blacklist
2025-07-31 18:25:26 - services.db_operations.blacklist_db - INFO - Added device 192.168.1.122 to blacklist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/add
2025-07-31 18:25:28 - managers.commands_server - DEBUG - Request completed in 1.27s with status 200
2025-07-31 18:25:28 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 added to blacklist.', 'error': None, 'metadata': {'executionTime': 1.1729037761688232, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:25:29.158172'}, 'success': True}
2025-07-31 18:25:28 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/add'
2025-07-31 18:25:28 - services.commands_server_operations.blacklist_execute - INFO - Added device 192.168.1.122 to blacklist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:28 - services.base - INFO - Service operation completed: add_device_to_blacklist
2025-07-31 18:25:28 - endpoints.blacklist - INFO - 🔍 BLACKLIST ADD - Success! Result: Device 192.168.1.122 added to blacklist.
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:29 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:25:30 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:25:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:25:42 - services.base - INFO - Service operation completed: remove_device_from_blacklist
2025-07-31 18:25:42 - services.db_operations.blacklist_db - INFO - Removed device 192.168.1.122 from blacklist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:25:42 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.765655517578125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:25:43.038204'}, 'success': True}
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:25:42 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/blacklist/remove
2025-07-31 18:25:43 - managers.commands_server - DEBUG - Request completed in 0.76s with status 200
2025-07-31 18:25:43 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 removed from blacklist.', 'error': None, 'metadata': {'executionTime': 0.6565783023834229, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:25:43.831718'}, 'success': True}
2025-07-31 18:25:43 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/blacklist/remove'
2025-07-31 18:25:43 - services.commands_server_operations.blacklist_execute - INFO - Removed device 192.168.1.122 from blacklist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:25:43 - services.base - INFO - Service operation completed: remove_device_from_blacklist
2025-07-31 18:28:58 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:29:03 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-07-31 18:29:06 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:06 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:07 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:29:07 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:29:07 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:29:07 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuLwg.GLO0kRSBQ10CVvxPTNqufrrcrrs'}
2025-07-31 18:29:07 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:29:07 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:29:07 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fc1b7bd02b0>
2025-07-31 18:29:07 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:29:07 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:29:07 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:29:07 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:29:07 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:07 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:07 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:29:07 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:29:07 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:07 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:29:07 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:29:07 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:29:07 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:29:07 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:29:07 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:08 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-07-31 18:29:08 - endpoints.settings - INFO - Request method: GET
2025-07-31 18:29:08 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-07-31 18:29:08 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIuLww.mH1vVa56yd6pRfpJ13x95rSQs8g'}
2025-07-31 18:29:08 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-07-31 18:29:08 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-07-31 18:29:08 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fc1b7b8dd20>
2025-07-31 18:29:08 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-07-31 18:29:08 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.settings_service - INFO - User ID type: <class 'str'>
2025-07-31 18:29:08 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-07-31 18:29:08 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-07-31 18:29:08 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:29:08 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.6702880859375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:29:09.246068'}, 'success': True}
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-07-31 18:29:08 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:29:08 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-07-31 18:29:08 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:08 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-07-31 18:29:08 - services.settings_service - INFO - Router ID is valid and non-empty
2025-07-31 18:29:08 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-07-31 18:29:08 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-07-31 18:29:08 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-07-31 18:29:08 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-07-31 18:29:08 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-07-31 18:29:08 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007791519165039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:29:09.384105"
  },
  "success": false
}

2025-07-31 18:29:08 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007791519165039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:29:09.384105"
  },
  "success": false
}

2025-07-31 18:29:08 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007791519165039062,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-07-31T15:29:09.384105"
  },
  "success": false
}

2025-07-31 18:29:08 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-07-31 18:29:08 - services.base - INFO - Service operation completed: start_session
2025-07-31 18:29:13 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:13 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:29:13 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-07-31 18:29:16 - managers.commands_server - DEBUG - Request completed in 2.55s with status 200
2025-07-31 18:29:16 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}, {'hostname': 'Unknown', 'ip': '192.168.1.176', 'mac': '0e:db:5c:f7:62:ca', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.171', 'mac': '22:46:ea:81:04:7c', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 2.5122084617614746, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:29:17.164796'}, 'success': True}
2025-07-31 18:29:16 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-07-31 18:29:16 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 3 devices
2025-07-31 18:29:16 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 3 devices
2025-07-31 18:29:16 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-07-31 18:29:16 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.176 (0e:db:5c:f7:62:ca)
2025-07-31 18:29:16 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.171 (22:46:ea:81:04:7c)
2025-07-31 18:29:16 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 3 devices
2025-07-31 18:29:16 - services.base - INFO - Service operation completed: scan_network
2025-07-31 18:29:23 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:23 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD ENDPOINT - Starting request processing
2025-07-31 18:29:23 - endpoints.whitelist - INFO -   - Authenticated user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:23 - endpoints.whitelist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:23 - endpoints.whitelist - INFO -   - Session ID: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:23 - endpoints.whitelist - INFO -   - Request body: {'ip': '192.168.1.122', 'name': 'DESKTOP-DQ80I51', 'description': 'DESKTOP-DQ80I51 - d8:bb:c1:47:3a:43'}
2025-07-31 18:29:23 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD - Calling service with IP: 192.168.1.122, name: DESKTOP-DQ80I51
2025-07-31 18:29:23 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-07-31 18:29:23 - services.db_operations.whitelist_db - INFO - Added device 192.168.1.122 to whitelist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:23 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/add
2025-07-31 18:29:25 - managers.commands_server - DEBUG - Request completed in 1.77s with status 200
2025-07-31 18:29:25 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 added to whitelist.', 'error': None, 'metadata': {'executionTime': 1.6942095756530762, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:29:26.649142'}, 'success': True}
2025-07-31 18:29:25 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/add'
2025-07-31 18:29:25 - services.commands_server_operations.whitelist_execute - INFO - Added device 192.168.1.122 to whitelist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:25 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-07-31 18:29:25 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD - Success! Result: Device 192.168.1.122 added to whitelist.
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:28 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:28 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_whitelist
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_blacklist
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-07-31 18:29:29 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-07-31 18:29:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:34 - services.base - INFO - Service operation completed: remove_device_from_whitelist
2025-07-31 18:29:35 - services.db_operations.whitelist_db - INFO - Removed device 192.168.1.122 from whitelist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:35 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/remove
2025-07-31 18:29:36 - managers.commands_server - DEBUG - Request completed in 1.70s with status 200
2025-07-31 18:29:36 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.122 removed from whitelist.', 'error': None, 'metadata': {'executionTime': 1.6202030181884766, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:29:37.111991'}, 'success': True}
2025-07-31 18:29:36 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/remove'
2025-07-31 18:29:36 - services.commands_server_operations.whitelist_execute - INFO - Removed device 192.168.1.122 from whitelist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:36 - services.base - INFO - Service operation completed: remove_device_from_whitelist
2025-07-31 18:29:47 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:47 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 18:29:47 - services.db_operations.whitelist_db - INFO - Set whitelist limit rate for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f to 90 Mbps
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Performing health check...
2025-07-31 18:29:47 - managers.commands_server - INFO - Checking commands server health
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.4318695068359375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-07-31T15:29:48.307215'}, 'success': True}
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Commands server health check successful
2025-07-31 18:29:47 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/limit-rate
2025-07-31 18:29:48 - managers.commands_server - DEBUG - Request completed in 0.51s with status 200
2025-07-31 18:29:48 - managers.commands_server - DEBUG - Received response: {'data': {'rate_mbps': 90}, 'error': None, 'metadata': {'executionTime': 0.3988471031188965, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:29:48.841896'}, 'success': True}
2025-07-31 18:29:48 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/limit-rate'
2025-07-31 18:29:48 - services.commands_server_operations.whitelist_execute - INFO - Set whitelist rate limit to 90 Mbps on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:48 - services.base - INFO - Service operation completed: set_whitelist_limit_rate
2025-07-31 18:29:48 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:29:48 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 18:29:49 - services.db_operations.whitelist_db - INFO - Activated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:49 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 18:29:59 - managers.commands_server - DEBUG - Request completed in 10.23s with status 200
2025-07-31 18:29:59 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode activated.', 'error': None, 'metadata': {'executionTime': 10.492425680160522, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:30:00.402395'}, 'success': True}
2025-07-31 18:29:59 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 18:29:59 - services.commands_server_operations.whitelist_execute - INFO - Activated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:29:59 - services.base - INFO - Service operation completed: activate_whitelist_mode
2025-07-31 18:29:59 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:30:09 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-07-31 18:30:09 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-07-31 18:30:10 - services.db_operations.whitelist_db - INFO - Deactivated whitelist mode for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:30:10 - managers.commands_server - DEBUG - Making DELETE request to http://34.38.207.87:5000/api/whitelist/mode
2025-07-31 18:30:15 - managers.commands_server - DEBUG - Request completed in 4.93s with status 200
2025-07-31 18:30:15 - managers.commands_server - DEBUG - Received response: {'data': 'Whitelist mode deactivated.', 'error': None, 'metadata': {'executionTime': 4.775225639343262, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-07-31T15:30:16.308043'}, 'success': True}
2025-07-31 18:30:15 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/mode'
2025-07-31 18:30:15 - services.commands_server_operations.whitelist_execute - INFO - Deactivated whitelist mode on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-07-31 18:30:15 - services.base - INFO - Service operation completed: deactivate_whitelist_mode
2025-08-01 09:13:28 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:13:33 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:14:17 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:14:17 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:14:17 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:14:17 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIxbOA.MRwuYrU6O0kuVre7OX5EFAWmLqQ'}
2025-08-01 09:14:17 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:14:17 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:14:17 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fd2c819e4d0>
2025-08-01 09:14:17 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:17 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:17 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:14:17 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:17 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:14:17 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:14:17 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:14:17 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:14:17 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:14:17 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:14:17 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:14:17 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:14:17 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:14:17 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:14:17 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:14:17 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:14:17 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:14:17 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:14:17 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:14:17 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo0gS_ZWWn8u3SDZDSSONjdlsA8Zmf0EsaUjMZrPZtOrfO7nV3VWjGWnmYSQs5MjgnBMnQhm_r8IWPquohnW_-tY_B_hlNXTwufr2-ypKEth1Yd_cYb36tnpHJP8REdsrpbD6aze266s_hma1D0fezY7-ZKay0IGBd-3UZWLA5bSuv55tub7y6msjpHoctaO8606WAxJ3bdail5_zR8-eryWy-Aq65vHe8Xp2yHZ3syPDB3VrQA7F-nUdWVWAJnmM_LpgNtpLkN1qmDNTZG0BVt7L3tuPkHqJ1frdJrv04JC9GQmZf9wG2XV7Ma-SqcgeqaHSaE5inSnJw7e8twgY0wDalgCbzerLCr5a9IRdGGEvwIaheJbnWfpnHGEfKIbnv6xQ-rcv8H3IYzlBBjpc7VkFOlI7terbQFBZtbrcdUubNEuddDkoNNckfWt314u80Ods9i0N-KTG-LM4-YUKAkuqdFlEJ-FAQG-7YB4dYKKb-YFp2oTSllCTKpcpmZvxREqFT_Igri_zqUrHmEy74MoUMUksEDmsFwj1pe3t2bCySSvEWd9r9MnbElEdkPo-fWpk2vuUUwSLxIoAkefTPpkTmpxOiZuDUyVNiaINAcmPAfkqU08vk0ofMWcZ1-aA-XsVTcj3nLtaNEiztkCb77S2x7yzORsCwKW3ZFqYVDTrdezquGT7re2DXndL0pD1Jt3v6kSRmvTK5Imy-1mL58yBd8D1METgMsRp4b1ie2uMgbC9hYit9WdjbzOaZQJjj2sofBrHaG3Jq5zed8tu0RVXDpHIZRdTlyKWeRCIO6xFamPhb7_Kz_8ST2LONqjKcmlhqhxAcF3qu9wiWZqjz7b2bCA6giNdpKAiiCvYnaHljIEi9jYeBYw1YM1FcF1yD-QF2LShBFPkNu8AlPfLnSFj6j4tvsWV1H_m3ZkylXYt1kYscay1SBXn_QMjJ1Lsi4G4MZaz_-IPn58IaR_M-egTzWw6OWVSO8fwAt0W7d70RNpyHDqyUtWb8RwRvGu4GZECXkzKsjRsaUpLR3ZtezItgOfG7_334mXappUzeCSTx669zKEReBczcl9jKiznZY7frGYlS_9JvdBIXZhQ4OUT9v-lz8sM-gz-EXicHV-Bl8fGD--ZcNxfNQ2eARXu5YmFdmK-uexBzruHNR6asyOZG-cMzzDVBYcamreY3CxXNaUTd9Cc3blbF24U9-th8J7xJD_B0BT5WAoDV3PjuuTsxKWTS-tACfhCmE0jOs_BaFpDEsoHfnNgLaOl4WEiAauoI9D68lDduJ0una3TsVTXqmUiSAq74lryCsc9DscxlXl9_VbOj1YS1JeEXqIy2kg5SH1MvJGmeqIxvPTOgcQBakRvFje2TJ2XUI85X7oBo13PzEYncjE_MR06y0hhgzmyPaej0nP_CI9E5YaqshHBOGY5s7f13GB4U5UKaq7oLevt3VEU6fPcx8de1_pLnjLvFmT4DuuSpoX4Wsr7vu2-ff06TdNH1jRZCaMWdR9JU32Nhj7_utzyqL41H7CKUPnb_5zePpsbKuFvmKVGKSb8vAfD_v3JuoPRE2-PH0tkyf9cJH2YR12Oj-9zKu4sS7xV9PFsvJkmfazPi-poSPExIPCdyxEkoGiKW7d0MY705k5lVTIkkCTYikEjl-Q9kbWPfPiI2rb7U-xClzR1j9fYonlBnNv_M-KnURizhn2LyqZPymZI_5kt0V8zwhFXfkMw_Wuf4u3xr-skQyN2rI6qxTEd9ucFDX-Ofu4dlloSUdf90km8j5uh7v8S-Cfnv8PUTZ0soXiUbY4bW1SQmZ9K-ti8CXzcoqQfnr-OSJlT_7nor9HXrZBxTXKgtt4ktDY_amdxvX1wmv1CGyWk285w-Jyewv3Th_y2HW3JF4ntPzqeXSfLNA7xZxcAS3EMD2iGw6azHMDP6vv3H2MSoqX3MKESDlDsmt3wyZpmCHodcTy55hIWpjRzY6nbbfX9D9Vf5NI.aIxbOQ.oL0RyHtfFS92CmsQtiRZzVtpcWY'}
2025-08-01 09:14:17 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:14:17 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:14:17 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fd2c5b91960>
2025-08-01 09:14:17 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:17 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:17 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:14:17 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:17 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:14:17 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:14:17 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:14:17 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:14:17 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:14:17 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:14:17 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:14:17 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:14:17 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:14:17 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:14:17 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:14:17 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:14:18 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:18 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:14:18 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:14:18 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:14:18 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:14:18 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:14:18 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.4809112548828125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:14:17.990537'}, 'success': True}
2025-08-01 09:14:18 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:14:18 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:14:18 - managers.commands_server - DEBUG - Request completed in 0.15s with status 500
2025-08-01 09:14:18 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007566928863525391,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:18.132216"
  },
  "success": false
}

2025-08-01 09:14:18 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007566928863525391,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:18.132216"
  },
  "success": false
}

2025-08-01 09:14:18 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007566928863525391,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:18.132216"
  },
  "success": false
}

2025-08-01 09:14:18 - services.commands_server_operations.session_execute - ERROR - Session start failed for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007566928863525391,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:18.132216"
  },
  "success": false
}

2025-08-01 09:14:18 - services.base - ERROR - Service operation failed: start_session - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "SESSION_SETUP_FAILED",
    "details": null,
    "message": "Session setup failed: [Errno None] Unable to connect to port 2205 on 127.0.0.1"
  },
  "metadata": {
    "executionTime": 0.007566928863525391,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:18.132216"
  },
  "success": false
}

2025-08-01 09:14:20 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:20 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:14:20 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:14:20 - managers.commands_server - DEBUG - Request completed in 0.15s with status 500
2025-08-01 09:14:20 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007119655609130859,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:20.056749"
  },
  "success": false
}

2025-08-01 09:14:20 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007119655609130859,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:20.056749"
  },
  "success": false
}

2025-08-01 09:14:20 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007119655609130859,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:20.056749"
  },
  "success": false
}

2025-08-01 09:14:22 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:22 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:14:22 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:14:22 - managers.commands_server - DEBUG - Request completed in 0.14s with status 500
2025-08-01 09:14:22 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006741762161254883,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:21.703583"
  },
  "success": false
}

2025-08-01 09:14:22 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006741762161254883,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:21.703583"
  },
  "success": false
}

2025-08-01 09:14:22 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.006741762161254883,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:21.703583"
  },
  "success": false
}

2025-08-01 09:14:30 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:14:30 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:14:30 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:14:30 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxbRg.Yl3lgxNxydgPDbjwE1BsdiA0sXs'}
2025-08-01 09:14:30 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:14:30 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:14:30 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fd2c520a800>
2025-08-01 09:14:30 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:30 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:30 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:14:30 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:30 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:14:30 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:14:30 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:14:30 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:14:30 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:14:30 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:14:30 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:14:30 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:14:30 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:14:30 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:14:30 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:14:30 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:14:30 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:30 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:14:30 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:14:31 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:14:31 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010335445404052734,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:30.387183"
  },
  "success": false
}

2025-08-01 09:14:31 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010335445404052734,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:30.387183"
  },
  "success": false
}

2025-08-01 09:14:31 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010335445404052734,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:30.387183"
  },
  "success": false
}

2025-08-01 09:14:31 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:14:31 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:14:31 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:31 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:14:31 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:14:32 - managers.commands_server - DEBUG - Request completed in 0.20s with status 500
2025-08-01 09:14:32 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007261991500854492,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:31.385560"
  },
  "success": false
}

2025-08-01 09:14:32 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007261991500854492,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:31.385560"
  },
  "success": false
}

2025-08-01 09:14:32 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007261991500854492,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:31.385560"
  },
  "success": false
}

2025-08-01 09:14:33 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:33 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:14:33 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:14:33 - managers.commands_server - DEBUG - Request completed in 0.15s with status 500
2025-08-01 09:14:33 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.0076410770416259766,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:32.802954"
  },
  "success": false
}

2025-08-01 09:14:33 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.0076410770416259766,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:32.802954"
  },
  "success": false
}

2025-08-01 09:14:33 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.0076410770416259766,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:32.802954"
  },
  "success": false
}

2025-08-01 09:14:33 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:14:33 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:14:33 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:14:33 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxbSA.ECFua2Mu06pxcsaALd99YQItGH4'}
2025-08-01 09:14:33 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:14:33 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:14:33 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fd2c525dde0>
2025-08-01 09:14:33 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:33 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:33 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:14:33 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:33 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:14:33 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:14:33 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:14:33 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:14:33 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:14:33 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:14:33 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:14:33 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:14:33 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:14:33 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:14:33 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:14:33 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:14:33 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:14:33 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:14:33 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:14:34 - managers.commands_server - DEBUG - Request completed in 0.15s with status 500
2025-08-01 09:14:34 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007616758346557617,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:33.412797"
  },
  "success": false
}

2025-08-01 09:14:34 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007616758346557617,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:33.412797"
  },
  "success": false
}

2025-08-01 09:14:34 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: An unexpected error occurred while scanning for devices."
  },
  "metadata": {
    "executionTime": 0.007616758346557617,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:14:33.412797"
  },
  "success": false
}

2025-08-01 09:36:41 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:36:45 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:36:53 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:36:53 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:36:53 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:36:53 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxghA.2boXObJ6JtXcfQVlTnKJZ7B825U'}
2025-08-01 09:36:53 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:36:53 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:36:53 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd739f190>
2025-08-01 09:36:53 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:36:53 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:36:53 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:36:53 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:36:53 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:36:53 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:36:53 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:36:53 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:36:53 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:36:53 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:36:53 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:36:53 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:36:53 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:36:53 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:36:53 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:36:53 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:36:53 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:36:53 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:36:53 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:36:53 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxghQ.Eys4Rt6v8rvNM3-hV76ccd3TBW4'}
2025-08-01 09:36:53 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:36:53 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:36:53 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6f979d0>
2025-08-01 09:36:53 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:36:53 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:36:53 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:36:53 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:36:53 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:36:53 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:36:53 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:36:53 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:36:53 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:36:53 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:36:53 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:36:53 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:36:53 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:36:53 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:36:53 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:36:53 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:36:54 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:36:54 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:36:54 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:36:54 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:36:54 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:36:54 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:36:54 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 4.482269287109375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:36:53.928786'}, 'success': True}
2025-08-01 09:36:54 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:36:54 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:36:54 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:36:54 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012493133544921875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:36:54.068610"
  },
  "success": false
}

2025-08-01 09:36:54 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012493133544921875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:36:54.068610"
  },
  "success": false
}

2025-08-01 09:36:54 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012493133544921875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:36:54.068610"
  },
  "success": false
}

2025-08-01 09:36:54 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:36:54 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:36:54 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:36:54 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:36:54 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:36:58 - managers.commands_server - DEBUG - Request completed in 3.27s with status 200
2025-08-01 09:36:58 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.048557996749878, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:36:57.793383'}, 'success': True}
2025-08-01 09:36:58 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:36:58 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:36:58 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:36:58 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:36:58 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:36:58 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:36:58 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:36:58 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 1, updated 3 devices
2025-08-01 09:36:58 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:39:10 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:39:10 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:39:10 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:39:10 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:39:10 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:39:10 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:39:10 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:39:10 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:39:10 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxhDg.h8k651vae-mlJ4bRxaGQo42svE0'}
2025-08-01 09:39:10 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:39:10 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:39:10 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b348e0>
2025-08-01 09:39:10 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:39:10 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:39:10 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:39:10 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:39:10 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:39:10 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:39:10 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:39:11 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-08-01 09:39:11 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.361701965332031e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:39:10.470538'}, 'success': True}
2025-08-01 09:39:11 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:39:11 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:39:11 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:39:11 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:39:11 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:39:11 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:39:11 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:39:11 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:39:11 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:39:11 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:39:11 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:39:11 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:39:11 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:39:11 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:39:11 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxhDg.h8k651vae-mlJ4bRxaGQo42svE0'}
2025-08-01 09:39:11 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:39:11 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:39:11 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6fe3be0>
2025-08-01 09:39:11 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:39:11 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:39:11 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:39:11 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:39:11 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:39:11 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:39:11 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:39:11 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:39:11 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:39:11 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:39:11 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:39:11 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:39:11 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:39:11 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:39:11 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:39:11 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:39:11 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:39:11 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:39:11 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:39:11 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:39:11 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009653568267822266,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:39:11.085735"
  },
  "success": false
}

2025-08-01 09:39:11 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009653568267822266,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:39:11.085735"
  },
  "success": false
}

2025-08-01 09:39:11 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009653568267822266,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:39:11.085735"
  },
  "success": false
}

2025-08-01 09:39:11 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:39:11 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:39:14 - managers.commands_server - DEBUG - Request completed in 3.37s with status 200
2025-08-01 09:39:14 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.146603584289551, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:39:13.758072'}, 'success': True}
2025-08-01 09:39:14 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:39:14 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:39:14 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:39:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:39:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:39:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:39:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:39:14 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:39:14 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:44:35 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:35 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:44:35 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:44:35 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:44:35 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:44:35 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:44:35 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:44:35 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:44:35 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxiUw.ZRM-wOduUGtIK2zpw1086Kn8nB4'}
2025-08-01 09:44:35 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:44:35 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:44:35 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b369b0>
2025-08-01 09:44:35 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:35 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:35 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:44:35 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:35 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:44:35 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:44:35 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:44:35 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-08-01 09:44:35 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.170967102050781e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:44:35.922525'}, 'success': True}
2025-08-01 09:44:35 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:44:35 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:44:36 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:44:36 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:44:36 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:44:36 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:44:36 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:44:36 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:44:36 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:44:36 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:44:36 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:44:36 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:44:36 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:36 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:44:36 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:44:36 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:44:36 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:44:36 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxiUw.ZRM-wOduUGtIK2zpw1086Kn8nB4'}
2025-08-01 09:44:36 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:44:36 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:44:36 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6fe22c0>
2025-08-01 09:44:36 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:36 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:36 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:44:36 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:36 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:44:36 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:44:36 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:44:36 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-08-01 09:44:36 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008227825164794922,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:44:36.869656"
  },
  "success": false
}

2025-08-01 09:44:36 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008227825164794922,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:44:36.869656"
  },
  "success": false
}

2025-08-01 09:44:36 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008227825164794922,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:44:36.869656"
  },
  "success": false
}

2025-08-01 09:44:36 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:44:36 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:44:37 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:44:37 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:44:37 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:44:37 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:44:37 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:44:37 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:44:37 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:44:37 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:44:37 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:44:37 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:44:37 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:44:37 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:44:37 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxiUw.ZRM-wOduUGtIK2zpw1086Kn8nB4'}
2025-08-01 09:44:37 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:44:37 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:44:37 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b36800>
2025-08-01 09:44:37 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:37 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:37 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:44:37 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:37 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:44:37 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:44:37 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:44:37 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:44:37 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:44:37 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:44:37 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:44:37 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:44:37 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:44:37 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:44:37 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:44:37 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:44:37 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:44:37 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:44:37 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:37 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:44:37 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:44:37 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxiVA.seBXazqSn6I15zp385JT5FI6j-U'}
2025-08-01 09:44:37 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:44:37 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:44:37 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:44:37 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b35f00>
2025-08-01 09:44:37 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:37 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:37 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:44:37 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:44:37 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:44:37 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:44:37 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:44:38 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:44:38 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011525154113769531,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:44:37.975273"
  },
  "success": false
}

2025-08-01 09:44:38 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011525154113769531,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:44:37.975273"
  },
  "success": false
}

2025-08-01 09:44:38 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011525154113769531,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:44:37.975273"
  },
  "success": false
}

2025-08-01 09:44:38 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:44:38 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:44:38 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:44:38 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:44:38 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:44:38 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:44:38 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:44:38 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:44:38 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:44:38 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:44:38 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:44:39 - managers.commands_server - DEBUG - Request completed in 3.78s with status 200
2025-08-01 09:44:39 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.544504165649414, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:44:39.600575'}, 'success': True}
2025-08-01 09:44:39 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:44:39 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:44:39 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:44:39 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:44:40 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:44:40 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:44:40 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:44:40 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:44:40 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:45:05 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:45:05 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:45:05 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:45:05 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:45:05 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:45:05 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:45:05 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxicQ.WMvA96uuC0VHGzlNWye6q9yDkhs'}
2025-08-01 09:45:05 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:45:05 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:45:05 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b34a30>
2025-08-01 09:45:05 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:45:05 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:45:05 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:45:05 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:45:05 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:45:05 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:45:05 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:45:05 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:45:05 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:45:05 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:45:05 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:45:05 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:45:05 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:45:05 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:45:05 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:45:05 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:45:05 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:45:05 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:45:05 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:45:05 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxicQ.WMvA96uuC0VHGzlNWye6q9yDkhs'}
2025-08-01 09:45:05 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:45:05 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:45:05 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b341c0>
2025-08-01 09:45:05 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:45:05 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:45:05 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:45:05 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:45:05 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:45:05 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:45:05 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:45:06 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:45:06 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:45:06 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:45:06 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:45:06 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:45:06 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:45:06 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:45:06 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:45:06 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:45:06 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:45:06 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:45:06 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:45:06 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:45:06 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:45:06 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:45:06 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.8371810913085938e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:45:05.509827'}, 'success': True}
2025-08-01 09:45:06 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:45:06 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:45:06 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:45:06 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001630544662475586,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:45:05.654218"
  },
  "success": false
}

2025-08-01 09:45:06 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001630544662475586,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:45:05.654218"
  },
  "success": false
}

2025-08-01 09:45:06 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001630544662475586,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:45:05.654218"
  },
  "success": false
}

2025-08-01 09:45:06 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:45:06 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:45:08 - managers.commands_server - DEBUG - Request completed in 2.49s with status 200
2025-08-01 09:45:08 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.1102843284606934, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:45:07.965759'}, 'success': True}
2025-08-01 09:45:08 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:45:08 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:45:08 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:45:08 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:45:08 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:45:08 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:45:08 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:45:08 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:45:08 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:48:51 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:48:51 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:48:51 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:48:51 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxjUw.nkEWfxbfMRISxVUvlPZvzL4-YIc'}
2025-08-01 09:48:51 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:48:51 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:48:51 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6fe2e00>
2025-08-01 09:48:51 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:48:51 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:48:51 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:48:51 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:48:51 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:48:51 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:48:51 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:48:52 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:48:52 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:48:52 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:48:52 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:48:52 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:48:52 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:48:52 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:48:52 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:48:52 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:48:52 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:48:52 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:48:52 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:48:52 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxjUw.nkEWfxbfMRISxVUvlPZvzL4-YIc'}
2025-08-01 09:48:52 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:48:52 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:48:52 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6fe2aa0>
2025-08-01 09:48:52 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:48:52 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:48:52 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:48:52 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:48:52 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:48:52 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:48:52 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:48:52 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:48:52 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:48:52 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:48:52 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:48:52 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:48:52 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:48:52 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:48:52 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:48:52 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:48:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:48:52 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:48:52 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:48:52 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:48:52 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:48:52 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:48:52 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.0994415283203125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:48:52.684411'}, 'success': True}
2025-08-01 09:48:52 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:48:52 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:48:53 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-08-01 09:48:53 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0019164085388183594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:48:52.813391"
  },
  "success": false
}

2025-08-01 09:48:53 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0019164085388183594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:48:52.813391"
  },
  "success": false
}

2025-08-01 09:48:53 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0019164085388183594,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:48:52.813391"
  },
  "success": false
}

2025-08-01 09:48:53 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:48:53 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:49:09 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:49:09 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:49:09 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:49:09 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxjZA.B26NOKlI299JqpPMI4B3wUqrYZg'}
2025-08-01 09:49:09 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:49:09 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:49:09 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b34d90>
2025-08-01 09:49:09 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:09 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:09 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:49:09 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:09 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:49:09 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:49:09 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:49:09 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:49:09 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:49:09 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:49:09 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:49:09 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:49:09 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:49:09 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:49:09 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:49:09 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:49:09 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:49:09 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:49:09 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:49:09 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxjZQ.610cUiD-dvttb4lw_r-3cBGn0eA'}
2025-08-01 09:49:09 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:49:09 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:49:09 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b34d00>
2025-08-01 09:49:09 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:09 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:09 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:49:09 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:09 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:49:09 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:49:09 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:49:09 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:09 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:49:09 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:49:09 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:49:09 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001201629638671875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:49:09.164132"
  },
  "success": false
}

2025-08-01 09:49:09 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001201629638671875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:49:09.164132"
  },
  "success": false
}

2025-08-01 09:49:09 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001201629638671875,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:49:09.164132"
  },
  "success": false
}

2025-08-01 09:49:09 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:49:09 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:49:09 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:49:09 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:49:09 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:49:09 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:49:09 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:49:09 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:49:09 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:49:09 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:49:09 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:49:11 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:11 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:49:11 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:49:14 - managers.commands_server - DEBUG - Request completed in 3.32s with status 200
2025-08-01 09:49:14 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.1015849113464355, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:49:13.559255'}, 'success': True}
2025-08-01 09:49:14 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:49:14 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:49:14 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:49:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:49:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:49:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:49:14 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:49:14 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:49:14 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:49:25 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:49:25 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:49:25 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:49:25 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxjdQ.fPY8TqbyTl92fetUbEyMZkjVtEw'}
2025-08-01 09:49:25 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:49:25 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:49:25 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b36e00>
2025-08-01 09:49:25 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:25 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:25 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:49:25 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:25 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:49:25 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:49:25 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:49:25 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:49:25 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:49:25 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:49:25 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:49:25 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:49:25 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:49:25 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:49:25 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:49:25 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:49:26 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:26 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:49:26 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:49:26 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:49:26 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:49:26 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:49:26 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:49:26 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxjdQ.fPY8TqbyTl92fetUbEyMZkjVtEw'}
2025-08-01 09:49:26 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:49:26 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:49:26 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:49:26 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b35360>
2025-08-01 09:49:26 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:26 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:26 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:49:26 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:26 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:49:26 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:49:26 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:49:26 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-08-01 09:49:26 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.1219253540039062e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:49:26.031664'}, 'success': True}
2025-08-01 09:49:26 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:49:26 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:49:26 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:49:26 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:49:26 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:49:26 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:49:26 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:49:26 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:49:26 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:49:26 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:49:26 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:49:26 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:49:26 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001107931137084961,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:49:26.164720"
  },
  "success": false
}

2025-08-01 09:49:26 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001107931137084961,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:49:26.164720"
  },
  "success": false
}

2025-08-01 09:49:26 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001107931137084961,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:49:26.164720"
  },
  "success": false
}

2025-08-01 09:49:26 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:49:26 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:49:27 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:49:27 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:49:27 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:49:30 - managers.commands_server - DEBUG - Request completed in 3.17s with status 200
2025-08-01 09:49:30 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 2.9576711654663086, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:49:30.399214'}, 'success': True}
2025-08-01 09:49:30 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:49:30 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:49:30 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:49:30 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:49:31 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:49:31 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:49:31 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:49:31 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:49:31 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:51:13 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:51:13 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:51:13 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:51:13 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxj4Q.1RmGme7A9EWPTUXEFPJ__-uH6YM'}
2025-08-01 09:51:13 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:51:13 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:51:13 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6fe22c0>
2025-08-01 09:51:13 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:13 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:13 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:51:13 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:13 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:51:13 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:51:13 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:51:13 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:13 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:51:13 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:51:13 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:51:13 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:51:13 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:51:13 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:51:13 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:13 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:51:13 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:51:13 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:51:13 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:51:13 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxj4Q.1RmGme7A9EWPTUXEFPJ__-uH6YM'}
2025-08-01 09:51:13 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:51:13 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:51:13 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b357b0>
2025-08-01 09:51:13 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:13 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:13 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:51:13 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:13 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:51:13 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:51:13 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:51:13 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:13 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:51:13 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:51:13 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:51:13 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:51:13 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:51:13 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:51:13 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:13 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:51:14 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:14 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:51:14 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:51:14 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:51:14 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:51:14 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 09:51:14 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.86102294921875e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:51:13.800673'}, 'success': True}
2025-08-01 09:51:14 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:51:14 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:51:14 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-08-01 09:51:14 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011665821075439453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:51:13.935710"
  },
  "success": false
}

2025-08-01 09:51:14 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011665821075439453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:51:13.935710"
  },
  "success": false
}

2025-08-01 09:51:14 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011665821075439453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:51:13.935710"
  },
  "success": false
}

2025-08-01 09:51:14 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:51:14 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:51:25 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:51:25 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:51:25 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:51:25 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxj7A.oFSVJv316UnrpJAmOdqQdaDDiC4'}
2025-08-01 09:51:25 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:51:25 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:51:25 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b6c280>
2025-08-01 09:51:25 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:25 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:25 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:51:25 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:25 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:51:25 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:51:25 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:51:25 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:25 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:51:25 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:51:25 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:51:25 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:51:25 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:51:25 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:51:25 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:25 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:51:25 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:51:25 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:51:25 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:51:25 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxj7Q.U5wmYpEkGB1Y7Wp5WHVHkVjxp6E'}
2025-08-01 09:51:25 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:51:25 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:51:25 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b377f0>
2025-08-01 09:51:25 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:25 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:25 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:51:25 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:25 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:51:25 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:51:25 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:51:25 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:25 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:51:25 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:51:25 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-08-01 09:51:25 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008649826049804688,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:51:25.640750"
  },
  "success": false
}

2025-08-01 09:51:25 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008649826049804688,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:51:25.640750"
  },
  "success": false
}

2025-08-01 09:51:25 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0008649826049804688,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:51:25.640750"
  },
  "success": false
}

2025-08-01 09:51:25 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:51:25 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:51:25 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:25 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:51:25 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:51:25 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:51:25 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:51:25 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:51:25 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:51:25 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:25 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:51:59 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:51:59 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:51:59 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:51:59 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxkDw.5C6uNoNbItpqcUzHGB5ni-VabG8'}
2025-08-01 09:51:59 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:51:59 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:51:59 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6fe2770>
2025-08-01 09:51:59 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:59 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:59 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:51:59 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:59 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:51:59 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:51:59 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:51:59 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:59 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:51:59 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:51:59 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:51:59 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:51:59 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:51:59 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:51:59 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:59 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:51:59 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:51:59 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:51:59 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:51:59 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxkDw.5C6uNoNbItpqcUzHGB5ni-VabG8'}
2025-08-01 09:51:59 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:51:59 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:51:59 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6fe1ba0>
2025-08-01 09:51:59 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:59 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:59 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:51:59 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:51:59 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:51:59 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:51:59 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:51:59 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:59 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:51:59 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:51:59 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:51:59 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:51:59 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:51:59 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:51:59 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:51:59 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:52:00 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:00 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:52:00 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:52:00 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:52:00 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:52:00 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-08-01 09:52:00 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.8133392333984375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:52:00.324037'}, 'success': True}
2025-08-01 09:52:00 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:52:00 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:52:00 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:52:00 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010628700256347656,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:52:00.460520"
  },
  "success": false
}

2025-08-01 09:52:00 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010628700256347656,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:52:00.460520"
  },
  "success": false
}

2025-08-01 09:52:00 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010628700256347656,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:52:00.460520"
  },
  "success": false
}

2025-08-01 09:52:00 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:52:00 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:52:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:01 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:52:01 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:52:04 - managers.commands_server - DEBUG - Request completed in 3.24s with status 200
2025-08-01 09:52:04 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.02329683303833, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:52:04.159970'}, 'success': True}
2025-08-01 09:52:04 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:52:04 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:52:04 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:52:04 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:52:04 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:52:04 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:52:04 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:52:04 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:52:04 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:52:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:52 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:52:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:52 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:52:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:52 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:52:52 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:52 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:52:52 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:52:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:52:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:52:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:52:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:52:53 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:52:53 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:52:53 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:52:53 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:52:53 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:52:53 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:52:53 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:52:53 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:52:53 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Request completed in 0.13s with status 200
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 5.14984130859375e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:52:53.205486'}, 'success': True}
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Request completed in 0.28s with status 200
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'OpenWrt'}, 'error': None, 'metadata': {'executionTime': 0.13355040550231934, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:52:53.474685'}, 'success': True}
2025-08-01 09:52:54 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:52:54 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:52:54 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:52:54 - endpoints.settings - INFO - Service call completed - result: OpenWrt, error: None
2025-08-01 09:52:54 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'OpenWrt', 'ssid': 'OpenWrt'}
2025-08-01 09:52:54 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:52:54 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:52:54 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:52:54 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:52:54 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:54 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:52:54 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:54 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:54 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Request completed in 0.27s with status 200
2025-08-01 09:52:54 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'OpenWrt'}, 'error': None, 'metadata': {'executionTime': 0.13548588752746582, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:52:54.064275'}, 'success': True}
2025-08-01 09:52:54 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:52:54 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:52:54 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:52:54 - endpoints.settings - INFO - Service call completed - result: OpenWrt, error: None
2025-08-01 09:52:54 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'OpenWrt', 'ssid': 'OpenWrt'}
2025-08-01 09:52:54 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:52:55 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:52:55 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:52:56 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 09:52:56 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 09:52:56 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 09:52:56 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 09:53:13 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:53:13 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:53:13 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:53:13 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxkWQ.Iu3hCeWrV7Qe4zrjWd5-nmbw9W8'}
2025-08-01 09:53:13 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:53:13 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:53:13 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6b6e5f0>
2025-08-01 09:53:13 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:53:13 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:53:13 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:53:13 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:53:13 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:53:13 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:53:13 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:53:13 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:53:13 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:53:13 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:53:13 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:53:13 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:53:13 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:53:13 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:53:13 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:53:13 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:53:14 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:53:14 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:53:14 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:53:14 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxkWQ.Iu3hCeWrV7Qe4zrjWd5-nmbw9W8'}
2025-08-01 09:53:14 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:53:14 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:53:14 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f7bd6bb0820>
2025-08-01 09:53:14 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:53:14 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:53:14 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:53:14 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:53:14 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:53:14 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:53:14 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:53:14 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:53:14 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:53:14 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:53:14 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:53:14 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:53:14 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:53:14 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:53:14 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:53:14 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:53:14 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:53:14 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:53:14 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:53:14 - managers.commands_server - DEBUG - Request completed in 0.13s with status 400
2025-08-01 09:53:14 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012345314025878906,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:53:13.975278"
  },
  "success": false
}

2025-08-01 09:53:14 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012345314025878906,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:53:13.975278"
  },
  "success": false
}

2025-08-01 09:53:14 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0012345314025878906,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:53:13.975278"
  },
  "success": false
}

2025-08-01 09:53:14 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:53:14 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:53:15 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:53:15 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:53:15 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:53:19 - managers.commands_server - DEBUG - Request completed in 3.45s with status 200
2025-08-01 09:53:19 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.2239158153533936, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:53:18.490040'}, 'success': True}
2025-08-01 09:53:19 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:53:19 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:53:19 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:53:19 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:53:19 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:53:19 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:53:19 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:53:19 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:53:19 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:54:31 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:54:36 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 09:56:22 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:56:22 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:56:22 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:56:22 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxlFQ.DTCvhF9bbdKWQI2Q0aIaW2OgSVA'}
2025-08-01 09:56:22 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:56:22 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:56:22 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe930d5b3d0>
2025-08-01 09:56:22 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:22 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:22 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:56:22 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:22 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:56:22 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:56:22 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:56:22 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:56:22 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:56:22 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:22 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:56:22 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:56:22 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:56:22 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:56:22 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:56:22 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:56:22 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:56:22 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:56:22 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:56:22 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxlFg.5EJ7uP7g0x21Zfg2N1c11otpLCw'}
2025-08-01 09:56:22 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:56:22 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:56:22 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe93094bc70>
2025-08-01 09:56:22 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:22 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:22 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:56:22 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:22 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:56:22 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:56:22 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:56:22 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:56:22 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:56:22 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:22 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:56:22 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:56:22 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:56:22 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:56:22 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:56:22 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:56:23 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:23 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:56:23 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 09:56:23 - managers.commands_server - INFO - Checking commands server health
2025-08-01 09:56:23 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 09:56:23 - managers.commands_server - DEBUG - Request completed in 0.18s with status 200
2025-08-01 09:56:23 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0002894401550292969, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T06:56:22.848304'}, 'success': True}
2025-08-01 09:56:23 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 09:56:23 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:56:23 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:56:23 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002366304397583008,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:56:22.997013"
  },
  "success": false
}

2025-08-01 09:56:23 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002366304397583008,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:56:22.997013"
  },
  "success": false
}

2025-08-01 09:56:23 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.002366304397583008,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:56:22.997013"
  },
  "success": false
}

2025-08-01 09:56:23 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:56:23 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:56:24 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:24 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:56:24 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:56:28 - managers.commands_server - DEBUG - Request completed in 3.27s with status 200
2025-08-01 09:56:28 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.0553958415985107, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:56:27.559493'}, 'success': True}
2025-08-01 09:56:28 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:56:28 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:56:28 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:56:28 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:56:28 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:56:28 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:56:28 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:56:28 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:56:28 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:56:31 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:56:31 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:56:31 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:31 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:31 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:31 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:31 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:31 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:56:31 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:56:31 - managers.commands_server - DEBUG - Request completed in 0.28s with status 200
2025-08-01 09:56:31 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'OpenWrt'}, 'error': None, 'metadata': {'executionTime': 0.13956999778747559, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:56:30.854890'}, 'success': True}
2025-08-01 09:56:31 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:56:31 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:31 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:56:31 - endpoints.settings - INFO - Service call completed - result: OpenWrt, error: None
2025-08-01 09:56:31 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'OpenWrt', 'ssid': 'OpenWrt'}
2025-08-01 09:56:31 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:56:31 - endpoints.settings - INFO - === Starting get_wifi_name endpoint ===
2025-08-01 09:56:31 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:56:31 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-name?routerId=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:31 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:31 - endpoints.settings - INFO - Using router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:31 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:31 - endpoints.settings - INFO - Calling get_wifi_name service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:31 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:56:31 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/wifi/ssid
2025-08-01 09:56:31 - managers.commands_server - DEBUG - Request completed in 0.31s with status 200
2025-08-01 09:56:31 - managers.commands_server - DEBUG - Received response: {'data': {'ssid': 'OpenWrt'}, 'error': None, 'metadata': {'executionTime': 0.16033339500427246, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:56:31.160043'}, 'success': True}
2025-08-01 09:56:31 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/ssid'
2025-08-01 09:56:31 - services.commands_server_operations.settings_execute - INFO - Retrieved SSID 'OpenWrt' for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:31 - services.base - INFO - Service operation completed: get_wifi_name
2025-08-01 09:56:31 - endpoints.settings - INFO - Service call completed - result: OpenWrt, error: None
2025-08-01 09:56:31 - endpoints.settings - INFO - Service call successful, returning result: {'wifi_name': 'OpenWrt', 'ssid': 'OpenWrt'}
2025-08-01 09:56:31 - endpoints.settings - INFO - === get_wifi_name endpoint completed successfully ===
2025-08-01 09:56:47 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:56:47 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:56:47 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:56:47 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxlLw.x3kOBbv6WMzkkBgBNbtc_g4PYnU'}
2025-08-01 09:56:47 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:56:47 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:56:47 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe93099d720>
2025-08-01 09:56:47 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:47 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:47 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:56:47 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:47 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:56:47 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:56:47 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:56:47 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:56:47 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:56:47 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:47 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:56:47 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:56:47 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:56:47 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:56:47 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:56:47 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:56:47 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 09:56:47 - endpoints.settings - INFO - Request method: GET
2025-08-01 09:56:47 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 09:56:47 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxlLw.x3kOBbv6WMzkkBgBNbtc_g4PYnU'}
2025-08-01 09:56:47 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 09:56:47 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 09:56:47 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe93099e4a0>
2025-08-01 09:56:47 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:47 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:47 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 09:56:47 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:47 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 09:56:47 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 09:56:47 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 09:56:47 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:56:47 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 09:56:47 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 09:56:47 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 09:56:47 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 09:56:47 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 09:56:47 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 09:56:47 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 09:56:47 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 09:56:48 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:48 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:56:48 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 09:56:48 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 09:56:48 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001641988754272461,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:56:47.815304"
  },
  "success": false
}

2025-08-01 09:56:48 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001641988754272461,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:56:47.815304"
  },
  "success": false
}

2025-08-01 09:56:48 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.001641988754272461,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T06:56:47.815304"
  },
  "success": false
}

2025-08-01 09:56:48 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 09:56:48 - services.base - INFO - Service operation completed: start_session
2025-08-01 09:56:49 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 09:56:49 - services.base - INFO - Service operation completed: scan_network
2025-08-01 09:56:49 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 09:56:52 - managers.commands_server - DEBUG - Request completed in 3.27s with status 200
2025-08-01 09:56:52 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.043714761734009, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T06:56:52.159074'}, 'success': True}
2025-08-01 09:56:52 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 09:56:52 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 09:56:52 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 09:56:52 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 09:56:52 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 09:56:53 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 09:56:53 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 09:56:53 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 09:56:53 - services.base - INFO - Service operation completed: scan_network
2025-08-01 10:20:49 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 10:20:54 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 10:21:00 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 10:21:00 - endpoints.settings - INFO - Request method: GET
2025-08-01 10:21:00 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 10:21:00 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxq2w.wrvu7yecMASRpZF0WAF08BHLMq0'}
2025-08-01 10:21:00 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 10:21:00 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 10:21:00 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe5a819af50>
2025-08-01 10:21:00 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:21:00 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:21:00 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 10:21:00 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:21:00 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 10:21:00 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 10:21:00 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 10:21:00 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 10:21:00 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 10:21:00 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 10:21:00 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 10:21:00 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 10:21:00 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 10:21:00 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 10:21:00 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 10:21:00 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 10:21:00 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 10:21:00 - endpoints.settings - INFO - Request method: GET
2025-08-01 10:21:00 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 10:21:00 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9YS_ZUrP7fPYTa0FOnazD5sMJj5xQI2NjPYTDZR_3s2p9OdXCVS8nAlBKKqWKtqVbHr182lSx911KTNsPk6PMb0y2bs08fm66-bKEnSvr8MbZk2m6-bV0RwbxG2P5MKoy933YqMe0Vj7bWk1Pl4s59ZqtzzwtYbAvs4UGnRltyHuPVJcID6RAlwfH5gr_s1vUw65s2urWfScYi1DyedtCPQS2dU8NujgoAaLid4fmLhYZFute2UyVEsy_5O1Lve9SnRbq_UFXhadD_1rObbRQOMhuYZaoxLTQX2GClSnu8j_hZ87L35vLfMs2Qqsk-AfJ_hHH_IuKfM6bgL_J2uDKOJ4bvd5ssmfXb5I-0vEdIC39EURhIUw_5hz5EOJM1xXzY5_KlL-jpmsZzkRn48O4uK67naq_XQhbzKqLVV6jaYga3OuhwWwDOJwD6UepEV-nJbAhvgAQHoYBHnoFDx0JZqXRZzjT9iqb9fMT9c3Myv5hui6RISrKYWKtacLO2kEVIREBweN9ai1XCKCdiHZ7qICWyFyNJmhVCfQHAWw77NoBAXXQCU5u-xqAkJXYAPQMAhIN0iXFOsMTzyAyogMgzIcE68DNdqaU4UMIYEN4XEs4K-XiW1PiHOKm7MEfEPaj7nge-WatHmwN7jYCkpICDexVwMHkeldwQsTDJa9Cb2dFSy8wJCOOheRRiy3kLh0CSK1MIznSXK4Y9afHcJ_SOqh8ZCj8a0lfeM5G0QRo7kLUQkbbAYgkMD28QNAdVQBBSyUWCNq90h8Kp-zSuuXSyRqz4mrSKWOTwUDygXqYv5n3pVn-8SRyDOLqyram0hVI54eF7rs66RLC3R97bOkRTSnnDQXadqHXmwTBJaZt0NoElWrBHlXIRnFFviaCyfpK7AwVrc0LBh6zjVbMvHfNUtrqXhexxdQenQodyw1Y5yLaDivj59dYZBpIuRs1Ms3_5BHy7TMEkIl2wKsHYx3Yw0yYNr-KHuiM5g-iJluy4V2VD1FzRHGOcZ3g2DOCcmVVUZjjTDypU9x5lNG0dzEwzBa9USdrB2R5-gs9hz1jk0Qt8yI-85QX71Vxl6MsBOcF3YvwzhRhj8nId-NiP9n_riYEAAL10IKDTOFcApsz80tFRm1Vl5UC8yNR8Dewx01ebb3Z4yhZKR-9LHZqmyXUIOVfp5ejn34aW0SbbrZZ4OduDu-XtiW_MXx7_650Eq0gqrs4hF_z2ptESPs5617VvePGmZtyS2ntSPg3RIl-d0FS0-EYtCNNQTWx4uEPiIN3zWmj3zI88e9kr47OcnJtP30xlzYlHSZd-_wvQUzIosyZwmtM41564U4zzcl0s1p-qoiQWnee5F2TGCWWSllas0wWtHa3AV8WKc5_h4fqbqLk-2pUtNqXVqoRFI4CoAEc-OVnMZ5rPJEWe7eSznC8vvlg6_1xjT1B1zZ7p7tONjcSr1V6lAh_GFgzW7wKF3Fi_t0RnWJ22XomMJ3Zsc_icbhq7_-v4-z_PbrW1vVRp1ef-WtPV7NA7Z-3rY5821fUvrKK_-fXj3aK95lSLCz3PwMrw-WQ9p9EDb4_sSWQM_F8lwyaI-Q27YZe7Lx4CjZqfS5GfzUNTEjMKjESI3jtEkx2IETlIku-2oYpqoXUne6mRMUgJjajqf2CQbsFt3z8a3qOv637Nc6ZK2GdAaW5NdEZfu_4z4qRDCbNKhy6t2SKp2hP-9rdY_R1wmVPk1T-GPfYq2x_-uk1s-IcWaqF4V09PhtKKhz_Ofe4dg2TUw73sU8aMnaB-3YzP8SPB3zr_CNG2TrCbQNNpMzbVMB9wuM9VOi2Pk7vJkGB_pn4CrjPz7ot-j9z1_Y9vkSO79me8cbgIncbu_s8B55jvlQnW94XIZNV-ER5By-25ypEDE9r_0HLNN1mkc488u4AzJ0hxO0SwSnWFxdG2-ffs-Jpd87X2akAmLk8yW2XHJlqIxahuxHLFlEyaFFH1lyOt18-03vILk7Q.aIxq3A.UkQpZSELHyKyXqVBY6HcylO23ho'}
2025-08-01 10:21:00 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 10:21:00 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 10:21:00 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe5a7d87730>
2025-08-01 10:21:00 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:21:00 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:21:00 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 10:21:00 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:21:00 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 10:21:00 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 10:21:00 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 10:21:01 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 10:21:01 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 10:21:01 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 10:21:01 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 10:21:01 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 10:21:01 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 10:21:01 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 10:21:01 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 10:21:01 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 10:21:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:21:01 - services.base - INFO - Service operation completed: start_session
2025-08-01 10:21:01 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 10:21:01 - managers.commands_server - INFO - Checking commands server health
2025-08-01 10:21:01 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 10:21:01 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 10:21:01 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.457069396972656e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T07:21:00.481562'}, 'success': True}
2025-08-01 10:21:01 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 10:21:01 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 10:21:01 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 10:21:01 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009186267852783203,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T07:21:00.622687"
  },
  "success": false
}

2025-08-01 10:21:01 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009186267852783203,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T07:21:00.622687"
  },
  "success": false
}

2025-08-01 10:21:01 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0009186267852783203,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T07:21:00.622687"
  },
  "success": false
}

2025-08-01 10:21:01 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 10:21:01 - services.base - INFO - Service operation completed: start_session
2025-08-01 10:21:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:21:01 - services.base - INFO - Service operation completed: scan_network
2025-08-01 10:21:01 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 10:21:05 - managers.commands_server - DEBUG - Request completed in 3.76s with status 200
2025-08-01 10:21:05 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.5362367630004883, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T07:21:05.158208'}, 'success': True}
2025-08-01 10:21:05 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 10:21:05 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 10:21:05 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 10:21:05 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 10:21:05 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 10:21:05 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 10:21:05 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 10:21:05 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 10:21:05 - services.base - INFO - Service operation completed: scan_network
2025-08-01 10:29:34 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 10:29:34 - endpoints.settings - INFO - Request method: GET
2025-08-01 10:29:34 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 10:29:34 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIxs3Q.cbbojp2B5jLZVH-tyUicIWGnFDs'}
2025-08-01 10:29:34 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 10:29:34 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 10:29:34 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe5a574b970>
2025-08-01 10:29:34 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:29:34 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:29:34 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 10:29:34 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:29:34 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 10:29:34 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 10:29:34 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 10:29:34 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 10:29:34 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 10:29:34 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 10:29:34 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 10:29:34 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 10:29:34 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 10:29:34 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 10:29:34 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 10:29:34 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 10:29:34 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:29:34 - services.base - INFO - Service operation completed: start_session
2025-08-01 10:29:34 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 10:29:34 - managers.commands_server - INFO - Checking commands server health
2025-08-01 10:29:34 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 10:29:34 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 10:29:34 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.504753112792969e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T07:29:34.519811'}, 'success': True}
2025-08-01 10:29:34 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 10:29:34 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 10:29:35 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 10:29:35 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011181831359863281,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T07:29:34.659789"
  },
  "success": false
}

2025-08-01 10:29:35 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011181831359863281,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T07:29:34.659789"
  },
  "success": false
}

2025-08-01 10:29:35 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0011181831359863281,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T07:29:34.659789"
  },
  "success": false
}

2025-08-01 10:29:35 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 10:29:35 - services.base - INFO - Service operation completed: start_session
2025-08-01 10:29:35 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:29:35 - services.base - INFO - Service operation completed: scan_network
2025-08-01 10:29:35 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 10:29:37 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 10:29:37 - endpoints.settings - INFO - Request method: GET
2025-08-01 10:29:37 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 10:29:37 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIxs3w.6Qw1yyNrIE3QOAkuoGDNN8Xyydw'}
2025-08-01 10:29:37 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 10:29:37 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 10:29:37 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7fe5a5798460>
2025-08-01 10:29:37 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:29:37 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:29:37 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 10:29:37 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:29:37 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 10:29:37 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 10:29:37 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 10:29:37 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 10:29:37 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 10:29:37 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 10:29:37 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 10:29:37 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 10:29:37 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 10:29:37 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 10:29:37 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 10:29:37 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 10:29:39 - managers.commands_server - DEBUG - Request completed in 3.96s with status 200
2025-08-01 10:29:39 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'DESKTOP-DQ80I51', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.715291976928711, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T07:29:39.360501'}, 'success': True}
2025-08-01 10:29:39 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 10:29:39 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 10:29:39 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 10:29:40 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 10:29:40 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 10:29:40 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 10:29:40 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 10:29:40 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 10:29:40 - services.base - INFO - Service operation completed: scan_network
2025-08-01 10:38:41 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:41 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 10:38:41 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:41 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 10:38:41 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:41 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:41 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:41 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 10:38:41 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:41 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 10:38:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 10:38:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 10:38:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 10:38:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 10:38:42 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:38:42 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 10:38:43 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:51 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 10:40:51 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 10:40:52 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 10:40:52 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 10:40:52 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 10:40:52 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 11:09:46 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 11:09:51 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 11:10:00 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 11:10:00 - endpoints.settings - INFO - Request method: GET
2025-08-01 11:10:00 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 11:10:00 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIx2WA.ROTsLTWTHdYWTJvXTNv931cvjZ4'}
2025-08-01 11:10:00 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 11:10:00 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 11:10:00 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f547c757a00>
2025-08-01 11:10:00 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:00 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:00 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 11:10:00 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:00 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 11:10:00 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 11:10:00 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 11:10:00 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:10:00 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 11:10:00 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:10:00 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 11:10:00 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 11:10:00 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 11:10:00 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 11:10:00 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:10:00 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 11:10:00 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 11:10:00 - endpoints.settings - INFO - Request method: GET
2025-08-01 11:10:00 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 11:10:00 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIx2WA.ROTsLTWTHdYWTJvXTNv931cvjZ4'}
2025-08-01 11:10:00 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 11:10:00 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 11:10:00 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f547c343e20>
2025-08-01 11:10:00 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:00 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:00 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 11:10:00 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:00 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 11:10:00 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 11:10:00 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 11:10:01 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:10:01 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 11:10:01 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:10:01 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 11:10:01 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 11:10:01 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 11:10:01 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 11:10:01 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:10:01 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 11:10:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:01 - services.base - INFO - Service operation completed: start_session
2025-08-01 11:10:01 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 11:10:01 - managers.commands_server - INFO - Checking commands server health
2025-08-01 11:10:01 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 11:10:01 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 11:10:01 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.2901763916015625e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T08:10:01.099757'}, 'success': True}
2025-08-01 11:10:01 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 11:10:01 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 11:10:03 - managers.commands_server - DEBUG - Request completed in 2.04s with status 200
2025-08-01 11:10:03 - managers.commands_server - DEBUG - Received response: {'data': {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, 'error': None, 'metadata': {'executionTime': 1.853452444076538, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T08:10:03.084563'}, 'success': True}
2025-08-01 11:10:03 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/session/start'
2025-08-01 11:10:03 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, error: None
2025-08-01 11:10:03 - services.commands_server_operations.session_execute - INFO - Session started successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:03 - services.base - INFO - Service operation completed: start_session
2025-08-01 11:10:04 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:04 - services.base - INFO - Service operation completed: scan_network
2025-08-01 11:10:04 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 11:10:07 - managers.commands_server - DEBUG - Request completed in 3.44s with status 200
2025-08-01 11:10:07 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Tom-s-phone', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'NetflixBlock_D8BBC1473A43', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.2072837352752686, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T08:10:06.962324'}, 'success': True}
2025-08-01 11:10:07 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 11:10:07 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 4 devices
2025-08-01 11:10:07 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 4 devices
2025-08-01 11:10:07 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 11:10:08 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 11:10:08 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 11:10:08 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 11:10:08 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 4 devices
2025-08-01 11:10:08 - services.base - INFO - Service operation completed: scan_network
2025-08-01 11:10:54 - endpoints.settings - INFO - === Starting set_wifi_password endpoint ===
2025-08-01 11:10:54 - endpoints.settings - INFO - Request method: POST
2025-08-01 11:10:54 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-password
2025-08-01 11:10:54 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:54 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 11:10:54 - endpoints.settings - INFO - Request body parsed: {'password': '12345678', 'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:10:54 - endpoints.settings - INFO - WiFi password extracted from request: 12345678
2025-08-01 11:10:54 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:10:54 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:10:54 - endpoints.settings - INFO - Calling set_wifi_password service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, wifi_password=12345678
2025-08-01 11:10:54 - endpoints.settings - ERROR - Exception occurred in service call: set_wifi_password() takes 0 positional arguments but 4 were given
Traceback (most recent call last):
  File "/mnt/c/Users/Tom/OneDrive/Desktop/NetPilot/NetPilot/backend2/endpoints/settings.py", line 306, in set_wifi_password
    result, error = set_wifi_password(user_id, router_id, session_id, wifi_password)
TypeError: set_wifi_password() takes 0 positional arguments but 4 were given
2025-08-01 11:11:38 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 11:12:20 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 11:12:36 - endpoints.settings - INFO - === Starting set_wifi_password endpoint ===
2025-08-01 11:12:36 - endpoints.settings - INFO - Request method: POST
2025-08-01 11:12:36 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/wifi-password
2025-08-01 11:12:36 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:12:36 - endpoints.settings - INFO - Parsing request JSON body...
2025-08-01 11:12:36 - endpoints.settings - INFO - Request body parsed: {'password': '12345678', 'router_id': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:12:36 - endpoints.settings - INFO - WiFi password extracted from request: 12345678
2025-08-01 11:12:36 - endpoints.settings - INFO - Router ID extracted from request: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:12:36 - endpoints.settings - INFO - Using session_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:12:36 - endpoints.settings - INFO - Calling set_wifi_password service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, wifi_password=12345678
2025-08-01 11:12:36 - services.base - INFO - Service operation completed: set_wifi_password
2025-08-01 11:12:36 - services.commands_server_operations.settings_execute - INFO - Setting WiFi password for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:12:36 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 11:12:36 - managers.commands_server - INFO - Checking commands server health
2025-08-01 11:12:36 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 11:12:36 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 11:12:36 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.5987625122070312e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T08:12:36.320201'}, 'success': True}
2025-08-01 11:12:36 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 11:12:36 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/wifi/password
2025-08-01 11:12:38 - managers.commands_server - DEBUG - Request completed in 1.51s with status 200
2025-08-01 11:12:38 - managers.commands_server - DEBUG - Received response: {'data': 'WiFi password changed for network: OpenWrt', 'error': None, 'metadata': {'executionTime': 1.3345022201538086, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T08:12:37.791435'}, 'success': True}
2025-08-01 11:12:38 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/wifi/password'
2025-08-01 11:12:38 - services.commands_server_operations.settings_execute - INFO - Successfully set WiFi password for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:12:38 - services.base - INFO - Service operation completed: set_wifi_password
2025-08-01 11:12:38 - endpoints.settings - INFO - Service call completed - result: WiFi password updated successfully, error: None
2025-08-01 11:14:57 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 11:15:02 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 11:15:10 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 11:15:10 - endpoints.settings - INFO - Request method: GET
2025-08-01 11:15:10 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 11:15:10 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIx3jg.qiH-OP55Zc3e9YPPqAvDODqO79w'}
2025-08-01 11:15:10 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 11:15:10 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 11:15:10 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f05df957370>
2025-08-01 11:15:10 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:10 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:10 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 11:15:10 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:10 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 11:15:10 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 11:15:10 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 11:15:10 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:15:10 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 11:15:10 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:15:10 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 11:15:10 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 11:15:10 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 11:15:10 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 11:15:10 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:15:10 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 11:15:10 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 11:15:10 - endpoints.settings - INFO - Request method: GET
2025-08-01 11:15:10 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 11:15:10 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIx3jg.qiH-OP55Zc3e9YPPqAvDODqO79w'}
2025-08-01 11:15:10 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 11:15:10 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 11:15:10 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f05df543e80>
2025-08-01 11:15:10 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:10 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:10 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 11:15:10 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:10 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 11:15:10 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 11:15:10 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 11:15:11 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:15:11 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 11:15:11 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:15:11 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 11:15:11 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 11:15:11 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 11:15:11 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 11:15:11 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:15:11 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 11:15:11 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:11 - services.base - INFO - Service operation completed: start_session
2025-08-01 11:15:11 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 11:15:11 - managers.commands_server - INFO - Checking commands server health
2025-08-01 11:15:11 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 11:15:11 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 11:15:11 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.600120544433594e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T08:15:11.040076'}, 'success': True}
2025-08-01 11:15:11 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 11:15:11 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 11:15:11 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 11:15:11 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0031540393829345703,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:15:11.183002"
  },
  "success": false
}

2025-08-01 11:15:11 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0031540393829345703,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:15:11.183002"
  },
  "success": false
}

2025-08-01 11:15:11 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0031540393829345703,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:15:11.183002"
  },
  "success": false
}

2025-08-01 11:15:11 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 11:15:11 - services.base - INFO - Service operation completed: start_session
2025-08-01 11:15:45 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 11:15:45 - endpoints.settings - INFO - Request method: GET
2025-08-01 11:15:45 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 11:15:45 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIx3sQ.Gk2FUgKjVpCMkYbqI8fsFol-inw'}
2025-08-01 11:15:45 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 11:15:45 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 11:15:45 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f05df9562c0>
2025-08-01 11:15:45 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:45 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:45 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 11:15:45 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:45 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 11:15:45 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 11:15:45 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 11:15:45 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:15:45 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 11:15:45 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:15:45 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 11:15:45 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 11:15:45 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 11:15:45 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 11:15:45 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:15:45 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 11:15:46 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 11:15:46 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:46 - endpoints.settings - INFO - Request method: GET
2025-08-01 11:15:46 - services.base - INFO - Service operation completed: start_session
2025-08-01 11:15:46 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 11:15:46 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 11:15:46 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIx3sQ.Gk2FUgKjVpCMkYbqI8fsFol-inw'}
2025-08-01 11:15:46 - managers.commands_server - INFO - Checking commands server health
2025-08-01 11:15:46 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 11:15:46 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 11:15:46 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 11:15:46 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f05df58e170>
2025-08-01 11:15:46 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:46 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:46 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 11:15:46 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:46 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 11:15:46 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 11:15:46 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 11:15:46 - managers.commands_server - DEBUG - Request completed in 0.15s with status 200
2025-08-01 11:15:46 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.504753112792969e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T08:15:45.522753'}, 'success': True}
2025-08-01 11:15:46 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 11:15:46 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 11:15:46 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:15:46 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 11:15:46 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:15:46 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 11:15:46 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 11:15:46 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 11:15:46 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 11:15:46 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:15:46 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 11:15:46 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 11:15:46 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010941028594970703,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:15:45.660891"
  },
  "success": false
}

2025-08-01 11:15:46 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010941028594970703,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:15:45.660891"
  },
  "success": false
}

2025-08-01 11:15:46 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0010941028594970703,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:15:45.660891"
  },
  "success": false
}

2025-08-01 11:15:46 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 11:15:46 - services.base - INFO - Service operation completed: start_session
2025-08-01 11:15:47 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:15:47 - services.base - INFO - Service operation completed: scan_network
2025-08-01 11:15:47 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 11:15:51 - managers.commands_server - DEBUG - Request completed in 4.06s with status 200
2025-08-01 11:15:51 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Tom-s-phone', 'ip': '192.168.1.141', 'mac': '36:2a:54:88:88:f5', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'NetflixBlock_D8BBC1473A43', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.8011584281921387, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T08:15:50.756871'}, 'success': True}
2025-08-01 11:15:51 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 11:15:51 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 5 devices
2025-08-01 11:15:51 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 5 devices
2025-08-01 11:15:51 - services.db_operations.network_db - DEBUG - Created new device: 192.168.1.141 (36:2a:54:88:88:f5)
2025-08-01 11:15:51 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 11:15:52 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 11:15:52 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 11:15:52 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 11:15:52 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 1, updated 4 devices
2025-08-01 11:15:52 - services.base - INFO - Service operation completed: scan_network
2025-08-01 11:18:23 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 11:18:23 - endpoints.settings - INFO - Request method: GET
2025-08-01 11:18:23 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 11:18:23 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIx4Tw.FOHL7v71cLR5BFaEYCdi_IWKMyA'}
2025-08-01 11:18:23 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 11:18:23 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 11:18:23 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f05df58de40>
2025-08-01 11:18:23 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:18:23 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:18:23 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 11:18:23 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:18:23 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 11:18:23 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 11:18:23 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 11:18:23 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:18:23 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 11:18:23 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:18:23 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 11:18:23 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 11:18:23 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 11:18:23 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 11:18:23 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:18:23 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 11:18:23 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 11:18:23 - endpoints.settings - INFO - Request method: GET
2025-08-01 11:18:23 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 11:18:23 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVduOo0gS_ZWRn5sq7oaSVlpsDMY2YIy5vliQYEjMzeZW5Kj_fZPqmemWdqTZh5WQEBGRcU6cDCJ-X93a9FVFdVr3q4_-NaTfVkOXvlYfv68iANKuu_XNI61XH6s5osW3iJRsZs8b8-nhXgSTUKY5QoKVl1x7275US_GOFD9b8WvY9alJnsGMjgx_E7rkcYRrKxak09Z_eLJqVydxylNuePLi1myrzVrZBZNdPs2Ia4ZwfSjQZTs6InGwZY_rLDHS7nldWxaid0rgGUSmV-1u0m7SjXgct6ymj7etrCKHGGGr2pOZZdE2C45SaNnSxbIVa6_6tA6FF-PcTbrxmwGa-1u4O0YZlZHUer36tko_W_hKu1uEtaDWHEsyvLgmf9oh1oHhROHbCiZ_6ZLOhzxWATThwXaQRhlQ67Sqb8OtxmvV5WFc9Um_apOhhoXuWXRw3TyMIi8MlKHgqlMBrXMB2k1BoVHhVakMdQdP2wOZ-tKS8-hSFrxbbximBYy-mJpkf5kAasYTrRQBLVJxfUGnKhljOulCmytimlxS5Gm9pNA-ddlB5jWb9GKHDFlnT75ERnVIG3Ly0umkDxi3CBeKFUlFfsAGdE7qajIBL6dOlTKBvT6EtDiG9GeZ-EYJKmPEmGVcWwPG7zU4wcB3H1rRQP0qUTp6sLqMcZGFzC2FS2_ppLCYCBl17Bm4ZGfW5bA3vJI2VaNJ5E0N9kqT2FwO9puftfguCv0DrocjQ48jTwuujeWtcQ6I5S12WNoAmbLD6VeLMmVcQxGw2MbqS1zl9oFXdguvuHJJoJZdzFyKWBWpcLfBXJQ23v6lV_n1rYg0xmzDqiyXK0z2Byq0l_ou90hVULRca_HoT5hPeDWOkaxPl31YxYrxGfmJYdRgyTVgzkVo49i6NYK6HUOy1KyHyF7qxAeOiHnll0W3uFL6r7gHVybKpsXcyMWOuRbJ3p2_fFVOJlgXEwpjrGb_oI-Yn0hFDlE-BmSDLDdnLGbjmn5oODunt_wde3VdNrommo9wH5GiZ3oZmVDiDpRlaTrKlJSu6jnOZF0p3DdBH8yLlkmbVO7g01wee87Sh2boX6zI-xyT7eIvc_zm9SugDFlCOtJxt04w9PMJ6_9pIIfUZZ02r2DG7ZyHCe5wi3IHpPVO8Dxne4biYWEMczehPavmauumYUXw2rGcNHg9dJfUutZNzUzHbnClxpGEXZ1Nylk6K0ftfIeET0XMzdy_EHd8jiH39KE79Tp9BCXyEmQHPGUcZs99xAzaUTDZMhvrfO5P2lO9K1IzNNsBzbPJOb4RuOrckBTz4DeU6z6qE2gz9jxTazz7bntNth5doFEXjREqPxwmNiN63hwnb57vEaUrhMEZYLQd43CtZ25UnNFXdDsxbFNINFMlhX4GReG5oyGyUtUfTLgZ2GO_veFfDSgk1x8eghNkkISQLvk947YX8XpqiIN4LuxzcB5F2x1lVB7kMKlfevLJvrK6fOUSnmEdaNoUj6W879vu4_19mqa3rGmyMo1a2L2BpnqPhj5_X6Y8rO_NW_tq7rBMf8PHapj89j-fS6sIlhjwaw7e-vkLdZNGL7w9fiyRJexrkfS3POpy7BYJou5T5pAzpDzeS_sJJ52fcHg0JNhNkRwjCiRNMSwjEC1bjCO7fjBZBQaQ0iRfcXAUQN6TWfvMh7eobbs_OC5woMG5636humRE7f8544-CP1Z12rewbHpQNkPy72yx_hpxG3Hld5gmf-5TvD1-WSf0t1UGR6xYHVWLYkban5ds-Dj8uXcYZgmEXffLTeJ93Ax1_yfBPzD_Ow3-R8BiQnqMmkzbb8xPZfKeZhXlFna3EPTD69cWKXPm74t-j96lbSY04MBI_rRtHXHUzztCegq68wnX-xvbdqYr5ux0k19BKkrt6CjBjpT-1Yk8AZZuHOKvW6B4RuBEiuUELDovUPhZff_-o01ucLn7FDBAoBie4NciIFiOZIlIEGlCAHyasNydZ-731ff_AO6d5lk.aIx4Tw.FOHL7v71cLR5BFaEYCdi_IWKMyA'}
2025-08-01 11:18:23 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 11:18:23 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 11:18:23 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f05df5ec4f0>
2025-08-01 11:18:23 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:18:23 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:18:23 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 11:18:23 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:18:23 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 11:18:23 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 11:18:23 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 11:18:23 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:18:23 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 11:18:23 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 11:18:23 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 11:18:23 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 11:18:23 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 11:18:23 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 11:18:23 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 11:18:23 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 11:18:24 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:18:24 - services.base - INFO - Service operation completed: start_session
2025-08-01 11:18:24 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 11:18:24 - managers.commands_server - INFO - Checking commands server health
2025-08-01 11:18:24 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 11:18:24 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 11:18:24 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 2.9087066650390625e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T08:18:23.820304'}, 'success': True}
2025-08-01 11:18:24 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 11:18:24 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 11:18:24 - managers.commands_server - DEBUG - Request completed in 0.14s with status 400
2025-08-01 11:18:24 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007545948028564453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:18:23.956783"
  },
  "success": false
}

2025-08-01 11:18:24 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007545948028564453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:18:23.956783"
  },
  "success": false
}

2025-08-01 11:18:24 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.0007545948028564453,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T08:18:23.956783"
  },
  "success": false
}

2025-08-01 11:18:24 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 11:18:24 - services.base - INFO - Service operation completed: start_session
2025-08-01 11:18:25 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 11:18:25 - services.base - INFO - Service operation completed: scan_network
2025-08-01 11:18:25 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 11:18:29 - managers.commands_server - DEBUG - Request completed in 4.07s with status 200
2025-08-01 11:18:29 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Tom-s-phone', 'ip': '192.168.1.141', 'mac': '36:2a:54:88:88:f5', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'NetflixBlock_D8BBC1473A43', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Micro-Star INTL CO., LTD.'}], 'error': None, 'metadata': {'executionTime': 3.8176801204681396, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T08:18:28.456612'}, 'success': True}
2025-08-01 11:18:29 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 11:18:29 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 5 devices
2025-08-01 11:18:29 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 5 devices
2025-08-01 11:18:29 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.141 (36:2a:54:88:88:f5)
2025-08-01 11:18:29 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 11:18:29 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 11:18:29 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 11:18:29 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 11:18:29 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 5 devices
2025-08-01 11:18:29 - services.base - INFO - Service operation completed: scan_network
2025-08-01 15:03:32 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 15:03:37 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 15:04:35 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 15:04:35 - endpoints.settings - INFO - Request method: GET
2025-08-01 15:04:35 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 15:04:35 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9gO_ZWrPFfOYQ6U1FIT5pwAYR5eEGwIQ5gSpoRS_XtvTndVl9Qt3ftwJRQU26xlL1v2t13UZ48mbrN23H0dH1P2ZTcN2WP39dsuBiAbhmjsblm7-7p7xRjzFiOshcuU9nw5oNMqaq1wn2nivcIDLsywHEnow4O7XCisi42h8Q--bHb3l3JhkPqETZVYIYHptRe3DJn90OlC1Fy4u2Dn8n5cHwEeZdqjUXJ3rQNvzArtzmMfuoY9qkD1K0MGFkZUU0CufDdpZlE6_emDILisuLCaiZ7TyDHOU2GcK5Kn8pjLgw826CzWNCzRkCUfU8t9MWBTgTijMdIXRWwTg9HwBUEPh92XXfbsy0c2RDHUAj2QBELixAH9215CHXCSob_syvSnLtnrVCQSKPXyZDmrgmqlMijN2IecQimNedNsdVFtZdGksFI9Awvs402rikpb8zWwVTTAVDJYhSWoFDS0xUaThPLMnZDMZzfMDxc1yqvxBml6gKubqUtlcwFrN58xsQowBk1acz036Zxg6RBaZJVgyAZRZO0GoTxV3ll1O1_USlg1XiXOPovEbYhpfPpQsXQMcLcKtxQbBI39gAiwAlGldAFegZ4bcQGyOoUYM4fYs059rQaNNkPOOmmNCfKPSrmUge_elKorVZtF1fVGqDzkXY1V51BYeo-llYHHq9YmngZLdl4qH46aV2O6pHUpf2yBLHapRRZAPv5di--uoX-C9ZBI6JHIeeO1oLwtxCihvJUApQ1WnXdI1TZQnYc1VAEBbYS6xTXuGHj1sOWVNC4CpHpIcLNKJAYNhSPMRewT7qde9ed_kcEgZx82db21MJVPaGht9ZnXWBLXeGtryxL26lqqL354zlireEimzYBaDTrFMtiwJphzFVpbjlrr3vo4QUXcsUPHkZ5GjIiO56byplvSiONn3I2sU_HYw9yQzQ5zrVLZfX36mgJJoS56Sc-JlP8XfZjijIh8uBZzgHSr4Ra4gR9d3Q81R4Bz7wuE7bpEbKeKv8I5QhhP93IkRRkB1HWtO-KS1q7kOc5i2Cicm2AMXpuWaZ827uRjZJF4zjaHeuibRuw955Tb_HUB35RqA1TjWQTOG65xSxn6xQL1f2qrg2xzqPEAgeM8eIrnI64lnNBKiS3aVeiJuxE2zr6U4OL6VR1p2JhP_f2oztjJQyzl2J7lFY98pyjqK6dWE1Oej4f2wwK2y_mh4x4kLrodmufzbngOQndzvHfwiTm1HzGJk2Jz0wB_k-e9KYucKKlRFZ5JfJUE6h5MkyWXl1eU4Jfr-NQDLqqks0pZTcbHFCfwAo_24lHOOJO6PWtUFIslHk_XOOxzAjmJl71ZjlpohdzxShSpdD6spKnVyFqi--Nzzm2Fx65Kc1RXFsx6Fh5tFSQtmzX6sNyKoDDJuHVsReHrD0mIzofr487xCSH00msiwrNrit5LOusrHtNBa58irroZoiPQduHXD8va04bwOAw3Fu6wAXR9BtcS_G3L9D_FOPbD1_f3ZVne8q7L6yzuy-ENdM17PI3F-7bsy_bavWVNXNb_e3j_6K5lnUHCzz0Yja9P1mMWP-D1-POIbIGfh2SMingooLunddJE76fgI8Pn13wjT01bLDA8nlLoRuHCZWgEQ3ECp_c9Uc0zcbjheQMmkGEI1ZDlTINiRPL-Xkxvcd8Pf2W50YGuHeEZ25LdENf-_4z4qRDEbLOxL-tuBHU3pb_nm_XXiGiGlV_LLP1xT-H1-OWcEF92eTlDxdq42RTTsvGyocHPy593h2DoLbAcBhjxoyfwHndTO_5I8C_Of8K0XQs2E567p7AzFoOyL_XlxtqBJ0F3X4JxemS_ANcF_u9Fv8fvLJfTHTjhrL9wvcPM6kXYs3dadZ7lQY6IftBdpiCWiH8EGcP2syMGAsL-NjDUHmzTOCWfXUApnCYZlCBpKDpFo_DZff_-55hE5db7DOCARnFqTx0YsCdIhNjHNIPtaUBlKUFeKfx63X3_A2rx4i8.aIytUw.i9AP1UqPVWML2Fq30D8FBjJQVdk'}
2025-08-01 15:04:35 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 15:04:35 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 15:04:35 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f134dbd9570>
2025-08-01 15:04:35 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:35 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:35 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 15:04:35 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:35 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 15:04:35 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 15:04:35 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 15:04:35 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 15:04:35 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 15:04:35 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 15:04:35 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 15:04:35 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 15:04:35 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 15:04:35 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 15:04:35 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 15:04:35 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 15:04:36 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:36 - services.base - INFO - Service operation completed: start_session
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 15:04:36 - managers.commands_server - INFO - Checking commands server health
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 15:04:36 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:36 - services.base - INFO - Service operation completed: start_session
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Performing health check...
2025-08-01 15:04:36 - managers.commands_server - INFO - Checking commands server health
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/health
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Request completed in 0.18s with status 200
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 0.0003020763397216797, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T12:04:37.314713'}, 'success': True}
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Request completed in 0.14s with status 200
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Received response: {'data': {'message': 'Server is healthy'}, 'error': None, 'metadata': {'executionTime': 3.0517578125e-05, 'routerId': None, 'sessionId': None, 'timestamp': '2025-08-01T12:04:37.468704'}, 'success': True}
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Commands server health check successful
2025-08-01 15:04:36 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/session/start
2025-08-01 15:04:37 - managers.commands_server - DEBUG - Request completed in 0.23s with status 400
2025-08-01 15:04:37 - managers.commands_server - ERROR - Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.009177446365356445,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T12:04:37.705823"
  },
  "success": false
}

2025-08-01 15:04:37 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/session/start': Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.009177446365356445,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T12:04:37.705823"
  },
  "success": false
}

2025-08-01 15:04:37 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: None, error: Commands server returned 400: {
  "data": null,
  "error": {
    "code": "SESSION_ALREADY_ACTIVE",
    "details": null,
    "message": "Session is already active"
  },
  "metadata": {
    "executionTime": 0.009177446365356445,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T12:04:37.705823"
  },
  "success": false
}

2025-08-01 15:04:37 - services.commands_server_operations.session_execute - INFO - Session already active for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff - treating as success
2025-08-01 15:04:37 - services.base - INFO - Service operation completed: start_session
2025-08-01 15:04:37 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:37 - services.base - INFO - Service operation completed: scan_network
2025-08-01 15:04:37 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 15:04:38 - managers.commands_server - DEBUG - Request completed in 0.33s with status 500
2025-08-01 15:04:38 - managers.commands_server - ERROR - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Failed to get ARP table: Channel closed."
  },
  "metadata": {
    "executionTime": 0.18721294403076172,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T12:04:38.586154"
  },
  "success": false
}

2025-08-01 15:04:38 - managers.commands_server - ERROR - Failed to execute command via direct endpoint '/api/network/scan': Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Failed to get ARP table: Channel closed."
  },
  "metadata": {
    "executionTime": 0.18721294403076172,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T12:04:38.586154"
  },
  "success": false
}

2025-08-01 15:04:38 - services.base - ERROR - Service operation failed: scan_network - Commands server returned 500: {
  "data": null,
  "error": {
    "code": "COMMAND_FAILED",
    "details": null,
    "message": "Command failed: Failed to get ARP table: Channel closed."
  },
  "metadata": {
    "executionTime": 0.18721294403076172,
    "routerId": "e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f",
    "sessionId": "ec3c8136-679c-4504-a892-8c6ed45f63ff",
    "timestamp": "2025-08-01T12:04:38.586154"
  },
  "success": false
}

2025-08-01 15:04:38 - endpoints.settings - INFO - === Starting get_router_id endpoint ===
2025-08-01 15:04:38 - endpoints.settings - INFO - Request method: GET
2025-08-01 15:04:38 - endpoints.settings - INFO - Request URL: http://localhost:5000/api/settings/router-id
2025-08-01 15:04:38 - endpoints.settings - INFO - Request headers: {'Host': 'localhost:5000', 'Connection': 'keep-alive', 'Sec-Ch-Ua-Platform': '"Windows"', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Sec-Ch-Ua': '"Not)A;Brand";v="8", "Chromium";v="138", "Google Chrome";v="138"', 'Sec-Ch-Ua-Mobile': '?0', 'Accept': '*/*', 'Origin': 'http://localhost:5173', 'Sec-Fetch-Site': 'same-site', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Dest': 'empty', 'Referer': 'http://localhost:5173/', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,he;q=0.8', 'Cookie': 'session=.eJytVdmuo9gO_ZWrPFfOYQ6U1FIT5pwAYR5eEGwIQ5gSpoRS_XtvTndVl9Qt3ftwJRQU26xlL1v2t13UZ48mbrN23H0dH1P2ZTcN2WP39dsuBiAbhmjsblm7-7p7xRjzFiOshcuU9nw5oNMqaq1wn2nivcIDLsywHEnow4O7XCisi42h8Q--bHb3l3JhkPqETZVYIYHptRe3DJn90OlC1Fy4u2Dn8n5cHwEeZdqjUXJ3rQNvzArtzmMfuoY9qkD1K0MGFkZUU0CufDdpZlE6_emDILisuLCaiZ7TyDHOU2GcK5Kn8pjLgw826CzWNCzRkCUfU8t9MWBTgTijMdIXRWwTg9HwBUEPh92XXfbsy0c2RDHUAj2QBELixAH9215CHXCSob_syvSnLtnrVCQSKPXyZDmrgmqlMijN2IecQimNedNsdVFtZdGksFI9Awvs402rikpb8zWwVTTAVDJYhSWoFDS0xUaThPLMnZDMZzfMDxc1yqvxBml6gKubqUtlcwFrN58xsQowBk1acz036Zxg6RBaZJVgyAZRZO0GoTxV3ll1O1_USlg1XiXOPovEbYhpfPpQsXQMcLcKtxQbBI39gAiwAlGldAFegZ4bcQGyOoUYM4fYs059rQaNNkPOOmmNCfKPSrmUge_elKorVZtF1fVGqDzkXY1V51BYeo-llYHHq9YmngZLdl4qH46aV2O6pHUpf2yBLHapRRZAPv5di--uoX-C9ZBI6JHIeeO1oLwtxCihvJUApQ1WnXdI1TZQnYc1VAEBbYS6xTXuGHj1sOWVNC4CpHpIcLNKJAYNhSPMRewT7qde9ed_kcEgZx82db21MJVPaGht9ZnXWBLXeGtryxL26lqqL354zlireEimzYBaDTrFMtiwJphzFVpbjlrr3vo4QUXcsUPHkZ5GjIiO56byplvSiONn3I2sU_HYw9yQzQ5zrVLZfX36mgJJoS56Sc-JlP8XfZjijIh8uBZzgHSr4Ra4gR9d3Q81R4Bz7wuE7bpEbKeKv8I5QhhP93IkRRkB1HWtO-KS1q7kOc5i2Cicm2AMXpuWaZ827uRjZJF4zjaHeuibRuw955Tb_HUB35RqA1TjWQTOG65xSxn6xQL1f2qrg2xzqPEAgeM8eIrnI64lnNBKiS3aVeiJuxE2zr6U4OL6VR1p2JhP_f2oztjJQyzl2J7lFY98pyjqK6dWE1Oej4f2wwK2y_mh4x4kLrodmufzbngOQndzvHfwiTm1HzGJk2Jz0wB_k-e9KYucKKlRFZ5JfJUE6h5MkyWXl1eU4Jfr-NQDLqqks0pZTcbHFCfwAo_24lHOOJO6PWtUFIslHk_XOOxzAjmJl71ZjlpohdzxShSpdD6spKnVyFqi--Nzzm2Fx65Kc1RXFsx6Fh5tFSQtmzX6sNyKoDDJuHVsReHrD0mIzofr487xCSH00msiwrNrit5LOusrHtNBa58irroZoiPQduHXD8va04bwOAw3Fu6wAXR9BtcS_G3L9D_FOPbD1_f3ZVne8q7L6yzuy-ENdM17PI3F-7bsy_bavWVNXNb_e3j_6K5lnUHCzz0Yja9P1mMWP-D1-POIbIGfh2SMingooLunddJE76fgI8Pn13wjT01bLDA8nlLoRuHCZWgEQ3ECp_c9Uc0zcbjheQMmkGEI1ZDlTINiRPL-Xkxvcd8Pf2W50YGuHeEZ25LdENf-_4z4qRDEbLOxL-tuBHU3pb_nm_XXiGiGlV_LLP1xT-H1-OWcEF92eTlDxdq42RTTsvGyocHPy593h2DoLbAcBhjxoyfwHndTO_5I8C_Of8K0XQs2E567p7AzFoOyL_XlxtqBJ0F3X4JxemS_ANcF_u9Fv8fvLJfTHTjhrL9wvcPM6kXYs3dadZ7lQY6IftBdpiCWiH8EGcP2syMGAsL-NjDUHmzTOCWfXUApnCYZlCBpKDpFo_DZff_-55hE5db7DOCARnFqTx0YsCdIhNjHNIPtaUBlKUFeKfx63X3_A2rx4i8.aIytVg.SkVUvAbZBWSppyGWOpqpVWZhdm4'}
2025-08-01 15:04:38 - endpoints.settings - INFO - Remote address: 127.0.0.1
2025-08-01 15:04:38 - endpoints.settings - INFO - User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
2025-08-01 15:04:38 - endpoints.settings - INFO - Database session obtained: <sqlalchemy.orm.session.Session object at 0x7f134c519030>
2025-08-01 15:04:38 - endpoints.settings - INFO - User ID from session: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:38 - endpoints.settings - INFO - Calling get_router_id_setting service with user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:38 - services.settings_service - INFO - === Starting get_router_id_setting ===
2025-08-01 15:04:38 - services.settings_service - INFO - Input parameter - user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:38 - services.settings_service - INFO - User ID type: <class 'str'>
2025-08-01 15:04:38 - services.settings_service - INFO - Querying UserSetting for routerId...
2025-08-01 15:04:38 - services.settings_service - INFO - Query: session.query(UserSetting).filter_by(user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, setting_key='routerId')
2025-08-01 15:04:38 - services.settings_service - INFO - Found UserSetting record: id=33039718-fdde-458e-b250-50e52516db96, setting_value={'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 15:04:38 - services.settings_service - INFO - Setting value type: <class 'dict'>
2025-08-01 15:04:38 - services.settings_service - INFO - Router ID found: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 15:04:38 - services.settings_service - INFO - Router ID type: <class 'str'>
2025-08-01 15:04:38 - services.settings_service - INFO - Router ID is valid and non-empty
2025-08-01 15:04:38 - services.settings_service - INFO - === get_router_id_setting completed successfully ===
2025-08-01 15:04:38 - endpoints.settings - INFO - Service call completed - result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}, error: None
2025-08-01 15:04:38 - endpoints.settings - INFO - Service call successful, returning result: {'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f'}
2025-08-01 15:04:38 - endpoints.settings - INFO - === get_router_id endpoint completed successfully ===
2025-08-01 15:04:39 - managers.commands_server - DEBUG - Request completed in 2.79s with status 200
2025-08-01 15:04:39 - managers.commands_server - DEBUG - Received response: {'data': {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, 'error': None, 'metadata': {'executionTime': 2.0525050163269043, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T12:04:39.546113'}, 'success': True}
2025-08-01 15:04:39 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/session/start'
2025-08-01 15:04:39 - services.commands_server_operations.session_execute - DEBUG - Commands server response - data: {'infrastructure_ready': True, 'message': 'Session established successfully', 'router_reachable': True, 'session_id': 'ec3c8136-679c-4504-a892-8c6ed45f63ff'}, error: None
2025-08-01 15:04:39 - services.commands_server_operations.session_execute - INFO - Session started successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with session ID ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:39 - services.base - INFO - Service operation completed: start_session
2025-08-01 15:04:40 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:40 - services.base - INFO - Service operation completed: scan_network
2025-08-01 15:04:40 - managers.commands_server - DEBUG - Making GET request to http://34.38.207.87:5000/api/network/scan
2025-08-01 15:04:44 - managers.commands_server - DEBUG - Request completed in 3.85s with status 200
2025-08-01 15:04:44 - managers.commands_server - DEBUG - Received response: {'data': [{'hostname': 'Tom-s-phone', 'ip': '192.168.1.141', 'mac': '36:2a:54:88:88:f5', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.140', 'mac': 'ee:c8:2d:ec:2d:5e', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.126', 'mac': 'fa:01:d0:6c:5a:9f', 'vendor': 'Unknown Vendor'}, {'hostname': 'Unknown', 'ip': '192.168.1.185', 'mac': '6a:35:fa:2d:a2:2f', 'vendor': 'Unknown Vendor'}, {'hostname': 'NetflixBlock_D8BBC1473A43', 'ip': '192.168.1.122', 'mac': 'd8:bb:c1:47:3a:43', 'vendor': 'Unknown Vendor'}], 'error': None, 'metadata': {'executionTime': 3.7717723846435547, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T12:04:44.694628'}, 'success': True}
2025-08-01 15:04:44 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/network/scan'
2025-08-01 15:04:44 - services.commands_server_operations.network_execute - INFO - Network scan completed successfully for router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, found 5 devices
2025-08-01 15:04:44 - services.db_operations.network_db - INFO - Saving network scan result for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f with 5 devices
2025-08-01 15:04:44 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.141 (36:2a:54:88:88:f5)
2025-08-01 15:04:44 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.140 (ee:c8:2d:ec:2d:5e)
2025-08-01 15:04:45 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.126 (fa:01:d0:6c:5a:9f)
2025-08-01 15:04:45 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.185 (6a:35:fa:2d:a2:2f)
2025-08-01 15:04:45 - services.db_operations.network_db - DEBUG - Updated existing device: 192.168.1.122 (d8:bb:c1:47:3a:43)
2025-08-01 15:04:45 - services.db_operations.network_db - INFO - Network scan save completed for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f: created 0, updated 5 devices
2025-08-01 15:04:45 - services.base - INFO - Service operation completed: scan_network
2025-08-01 15:04:57 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:57 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD ENDPOINT - Starting request processing
2025-08-01 15:04:57 - endpoints.whitelist - INFO -   - Authenticated user_id: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:57 - endpoints.whitelist - INFO -   - Router ID: e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 15:04:57 - endpoints.whitelist - INFO -   - Session ID: ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:04:57 - endpoints.whitelist - INFO -   - Request body: {'ip': '192.168.1.126', 'name': "Tom's Tablet", 'description': "Tom's Tablet - fa:01:d0:6c:5a:9f"}
2025-08-01 15:04:57 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD - Calling service with IP: 192.168.1.126, name: Tom's Tablet
2025-08-01 15:04:57 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-08-01 15:04:57 - services.db_operations.whitelist_db - INFO - Added device 192.168.1.126 to whitelist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 15:04:57 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/add
2025-08-01 15:04:59 - managers.commands_server - DEBUG - Request completed in 1.73s with status 200
2025-08-01 15:04:59 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.126 added to whitelist.', 'error': None, 'metadata': {'executionTime': 1.626589059829712, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T12:04:59.373700'}, 'success': True}
2025-08-01 15:04:59 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/add'
2025-08-01 15:04:59 - services.commands_server_operations.whitelist_execute - INFO - Added device 192.168.1.126 to whitelist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 15:04:59 - services.base - INFO - Service operation completed: add_device_to_whitelist
2025-08-01 15:04:59 - endpoints.whitelist - INFO - 🔍 WHITELIST ADD - Success! Result: Device 192.168.1.126 added to whitelist.
2025-08-01 15:05:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:01 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 15:05:01 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 15:05:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:01 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 15:05:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:01 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 15:05:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:01 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 15:05:01 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:01 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 15:05:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_whitelist
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 15:05:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_blacklist
2025-08-01 15:05:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 15:05:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:02 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_whitelist_limit_rate
2025-08-01 15:05:02 - services.base - INFO - Service operation completed: get_blacklist_limit_rate
2025-08-01 15:05:04 - middleware - DEBUG - Router context established: user_id=ec3c8136-679c-4504-a892-8c6ed45f63ff, router_id=e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f, session_id=ec3c8136-679c-4504-a892-8c6ed45f63ff
2025-08-01 15:05:04 - services.base - INFO - Service operation completed: remove_device_from_whitelist
2025-08-01 15:05:04 - services.db_operations.whitelist_db - INFO - Removed device 192.168.1.126 from whitelist for user ec3c8136-679c-4504-a892-8c6ed45f63ff, router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 15:05:04 - managers.commands_server - DEBUG - Making POST request to http://34.38.207.87:5000/api/whitelist/remove
2025-08-01 15:05:06 - managers.commands_server - DEBUG - Request completed in 1.72s with status 200
2025-08-01 15:05:06 - managers.commands_server - DEBUG - Received response: {'data': 'Device 192.168.1.126 removed from whitelist.', 'error': None, 'metadata': {'executionTime': 1.6227524280548096, 'routerId': 'e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f', 'sessionId': 'ec3c8136-679c-4504-a892-8c6ed45f63ff', 'timestamp': '2025-08-01T12:05:06.915943'}, 'success': True}
2025-08-01 15:05:06 - managers.commands_server - INFO - Successfully executed command via direct endpoint '/api/whitelist/remove'
2025-08-01 15:05:06 - services.commands_server_operations.whitelist_execute - INFO - Removed device 192.168.1.126 from whitelist on router e4fbea8e8f1c372c919be32613793c6c1e8313dd8a9b38bef9a9b45114ad1c1f
2025-08-01 15:05:06 - services.base - INFO - Service operation completed: remove_device_from_whitelist
2025-08-01 16:02:21 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
2025-08-01 16:02:27 - managers.commands_server - INFO - Commands server manager initialized with URL: http://34.38.207.87:5000
